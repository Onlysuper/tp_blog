((typeof self !== 'undefined' ? self : this)["webpackJsonp"] = (typeof self !== 'undefined' ? self : this)["webpackJsonp"] || []).push([["user-menu"],{

/***/ "./node_modules/@babel/runtime-corejs2/core-js/symbol.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime-corejs2/core-js/symbol.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! core-js/library/fn/symbol */ \"./node_modules/core-js/library/fn/symbol/index.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9jb3JlLWpzL3N5bWJvbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2NvcmUtanMvc3ltYm9sLmpzPzY3YmIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbFwiKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime-corejs2/core-js/symbol.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js":
/*!************************************************************************!*\
  !*** ./node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! core-js/library/fn/symbol/iterator */ \"./node_modules/core-js/library/fn/symbol/iterator.js\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yLmpzPzVkNTgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvclwiKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js\n");

/***/ }),

/***/ "./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return _typeof; });\n/* harmony import */ var _core_js_symbol_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core-js/symbol/iterator */ \"./node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js\");\n/* harmony import */ var _core_js_symbol_iterator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_core_js_symbol_iterator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _core_js_symbol__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core-js/symbol */ \"./node_modules/@babel/runtime-corejs2/core-js/symbol.js\");\n/* harmony import */ var _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_core_js_symbol__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nfunction _typeof2(obj) { if (typeof _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a === \"function\" && typeof _core_js_symbol_iterator__WEBPACK_IMPORTED_MODULE_0___default.a === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a === \"function\" && obj.constructor === _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a && obj !== _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a === \"function\" && _typeof2(_core_js_symbol_iterator__WEBPACK_IMPORTED_MODULE_0___default.a) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a === \"function\" && obj.constructor === _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a && obj !== _core_js_symbol__WEBPACK_IMPORTED_MODULE_1___default.a.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS90eXBlb2YuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS90eXBlb2YuanM/NzYxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX1N5bWJvbCRpdGVyYXRvciBmcm9tIFwiLi4vLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3JcIjtcbmltcG9ydCBfU3ltYm9sIGZyb20gXCIuLi8uLi9jb3JlLWpzL3N5bWJvbFwiO1xuXG5mdW5jdGlvbiBfdHlwZW9mMihvYmopIHsgaWYgKHR5cGVvZiBfU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIF9TeW1ib2wkaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZjIgPSBmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIF9TeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9TeW1ib2wgJiYgb2JqICE9PSBfU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIGlmICh0eXBlb2YgX1N5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIF90eXBlb2YyKF9TeW1ib2wkaXRlcmF0b3IpID09PSBcInN5bWJvbFwiKSB7XG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX1N5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX1N5bWJvbCAmJiBvYmogIT09IF9TeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IF90eXBlb2YyKG9iaik7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js\n");

/***/ }),

/***/ "./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true&":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader??ref--8-oneOf-1-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--8-oneOf-1-2!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n    if(true) {\n      // 1572857640607\n      var cssReload = __webpack_require__(/*! ./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js */ \"./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.i, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHZ1ZS9jbGktc2VydmljZS9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanM/IS4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/IS4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvc3R5bGVQb3N0TG9hZGVyLmpzIS4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8hLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/IS4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8hLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/IS4vc3JjL3ZpZXdzL2FkbWluL3VzZXJNZW51LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTJlZGUwM2I4Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdmlld3MvYWRtaW4vdXNlck1lbnUudnVlP2NlNTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgLy8gMTU3Mjg1NzY0MDYwN1xuICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIvVXNlcnMvYXBwbGUvV09SS19TUEFDRS8yMDE5MDcyNHVzZXItc2VydmUtcGVyZ2UvdXNlci1zZXJ2ZXItcGFnZS9ub2RlX21vZHVsZXMvQHZ1ZS9jbGktc2VydmljZS9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9obXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7XCJobXJcIjp0cnVlLFwicHVibGljUGF0aFwiOlwiLi4vLi4vXCIsXCJsb2NhbHNcIjpmYWxzZX0pO1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGNzc1JlbG9hZCk7XG4gICAgICBtb2R1bGUuaG90LmFjY2VwdCh1bmRlZmluZWQsIGNzc1JlbG9hZCk7XG4gICAgfVxuICAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true&\n");

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=script&lang=js&":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/views/admin/userMenu.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var _src_common_zTree_js_jquery_ztree_all_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @src/common/zTree/js/jquery.ztree.all.js */ \"./src/common/zTree/js/jquery.ztree.all.js\");\n/* harmony import */ var _src_components_DataPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @src/components/DataPage */ \"./src/components/DataPage/index.vue\");\n/* harmony import */ var _src_common_mixinsPc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @src/common/mixinsPc */ \"./src/common/mixinsPc.js\");\n/* harmony import */ var _src_components_DataPage_dataPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @src/components/DataPage/dataPage */ \"./src/components/DataPage/dataPage.js\");\n/* harmony import */ var _src_apis__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @src/apis */ \"./src/apis/index.js\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: \"userMenu\",\n  components: {\n    \"myp-data-page\": _src_components_DataPage__WEBPACK_IMPORTED_MODULE_1__[\"default\"] // 数据列表组件\n\n  },\n  mixins: [_src_components_DataPage_dataPage__WEBPACK_IMPORTED_MODULE_3__[\"mixinDataTable\"], _src_common_mixinsPc__WEBPACK_IMPORTED_MODULE_2__[\"mixinsPc\"]],\n  data: function data() {\n    var _this = this;\n\n    var httpMethodOptions = [{\n      value: \"GET\",\n      label: \"GET\"\n    }, {\n      value: \"POST\",\n      label: \"POST\"\n    }, {\n      value: \"PATCH\",\n      label: \"PATCH\"\n    }, {\n      value: \"DELETE\",\n      label: \"DELETE\"\n    }, {\n      value: \"PUT\",\n      label: \"PUT\"\n    }, {\n      value: \"HEADN\",\n      label: \"HEADN\"\n    }, {\n      value: \"OPTIONS\",\n      label: \"OPTIONS\"\n    }];\n    return {\n      setting: {},\n      dataList: [],\n      tableVisible: false,\n      editFuncFormVisible: false,\n      httpMethodOptions: httpMethodOptions,\n      editFuncForm: {},\n      functionMenu: {},\n      treeNodeObj: \"\",\n      treeId: \"rootTreeNenu\",\n      zTreeObj: \"\",\n      addFuncFormVisible: false,\n      addFuncFormRules: {},\n      addFuncForm: {\n        menuName: \"\",\n        functionName: \"\",\n        url: \"\",\n        httpMethod: \"\",\n        functionCode: \"\",\n        // 功能类型\n        typeOptions: [{\n          value: \"add\",\n          label: \"新增\"\n        }, {\n          value: \"edit\",\n          label: \"修改\"\n        }, {\n          value: \"page\",\n          label: \"分页查询\"\n        }, {\n          value: \"delete\",\n          label: \"删除\"\n        }] // 请求方法\n\n      },\n      menuFunctionParentNode: \"\",\n      addFormVisible: false,\n      addForm: {\n        addOptions: [{\n          value: true,\n          label: \"是\"\n        }, {\n          value: false,\n          label: \"否\"\n        }]\n      },\n      editFormVisible: false,\n      editForm: {\n        editOptions: [{\n          value: true,\n          label: \"是\"\n        }, {\n          value: false,\n          label: \"否\"\n        }]\n      },\n      editOptionsResult: [{\n        value: true,\n        label: \"是\"\n      }, {\n        value: false,\n        label: \"否\"\n      }],\n      addFormRules: {},\n      formLabelWidth: \"100px\",\n      // 列表数据\n      actionUrl: _src_apis__WEBPACK_IMPORTED_MODULE_4__[\"getMenuTreePage\"],\n      searchConditionDefault: {\n        menuCode: \"\",\n        page: 1,\n        limit: 10\n      },\n      searchCondition: {\n        menuCode: \"\",\n        page: 1,\n        limit: 10\n      },\n      tableData: {\n        // getDataUrl: {\n        //   url: getMenuTreePage // 初始化数据\n        // },\n        dataHeader: [// table列信息 key=>表头标题，word=>表内容信息\n        {\n          key: \"功能\",\n          width: \"130px\",\n          sortable: true,\n          word: \"functionName\"\n        }, {\n          key: \"功能编号\",\n          width: \"\",\n          word: \"functionCode\"\n        }, {\n          key: \"url\",\n          word: \"url\",\n          width: \"\"\n        }, {\n          key: \"请求方法\",\n          width: \"\",\n          word: \"httpMethod\"\n        }],\n        operation: {\n          width: \"120px\",\n          options: [// 操作按钮\n          {\n            text: \"编辑\",\n            color: \"#1890ff\",\n            visibleFn: function visibleFn() {\n              return _this.adminFilter(\"menu_function_edit\");\n            },\n            cb: function cb(rowdata) {\n              _this.editFuncForm = rowdata;\n              _this.editFuncForm.menuName = _this.functionMenu.menuName;\n              _this.editFuncFormVisible = true;\n            }\n          }, {\n            text: \"删除\",\n            visibleFn: function visibleFn() {\n              return _this.adminFilter(\"menu_function_delete\");\n            },\n            cb: function cb(rowdata) {\n              _this.$confirm(\"此操作将永久删除该功能, 是否继续?\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\"\n              }).then(function () {\n                Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"deleteMenuFunction\"])()(rowdata.functionCode).then(function (data) {\n                  if (data.code == \"00\") {\n                    _this.Message_pc({\n                      type: \"success\",\n                      message: \"删除成功!\"\n                    }); // 更新数据\n\n\n                    _this.searchCondition = {\n                      menuCode: _this.functionMenu.menuCode,\n                      page: 1,\n                      limit: 10\n                    };\n\n                    _this.seachstartHandle();\n                  } else {\n                    _this.Message_pc({\n                      type: \"warning\",\n                      message: data.msg\n                    });\n                  }\n                });\n              });\n            }\n          }]\n        }\n      },\n      dataTreeProps: {\n        label: \"menuName\",\n        isLeaf: \"isParent\"\n      }\n    };\n  },\n  methods: {\n    // 新增功能弹出显示\n    addFuncDialog: function addFuncDialog() {\n      this.addFuncForm.httpMethod = \"\";\n      this.addFuncForm.functiontype = \"\";\n      this.addFuncForm.functionName = \"\";\n      this.addFuncForm.url = \"\";\n      this.addFuncForm.functionCode = \"\";\n      this.addFuncForm.httpMethod = \"GET\";\n      var functionMenu = this.functionMenu;\n      var addFuncForm = this.addFuncForm;\n      this.addFuncForm.menuName = functionMenu.menuName;\n      this.addFuncFormVisible = true;\n    },\n    editFuncSave: function editFuncSave() {\n      var _this2 = this;\n\n      // 修改功能保存\n      this.saveLoading = true;\n      var editFuncForm = this.editFuncForm;\n      Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"patchEditMenuFunction\"])()({\n        menuCode: this.functionMenu.menuCode,\n        menuName: editFuncForm.menuName,\n        functionName: editFuncForm.functionName,\n        url: editFuncForm.url,\n        httpMethod: editFuncForm.httpMethod,\n        functionCode: editFuncForm.functionCode // ...this.editFuncForm\n\n      }).then(function (data) {\n        if (data.code == \"00\") {\n          _this2.Message_pc({\n            type: \"success\",\n            message: \"恭喜您，功能更改成功!\"\n          }); // 更新数据\n\n\n          _this2.searchCondition = {\n            // 查询条件\n            menuCode: _this2.functionMenu.menuCode,\n            page: 1,\n            limit: 10\n          };\n\n          _this2.seachstartHandle();\n\n          _this2.editFuncFormVisible = false;\n        } else {\n          _this2.Message_pc({\n            type: \"warning\",\n            message: data.msg\n          });\n        }\n\n        _this2.saveLoading = false;\n      });\n    },\n    // 新增菜单功能类型改变\n    functionTypeChange: function functionTypeChange(data) {\n      if (data.value == \"\") {\n        return false;\n      }\n\n      var menuCode = this.functionMenu.menuCode;\n      var functionName = \"\";\n      var url = \"/\" + menuCode;\n\n      if (data == \"add\") {\n        this.addFuncForm.httpMethod = \"POST\";\n        functionName = \"新增\";\n      } else if (data == \"edit\") {\n        functionName = \"修改\";\n        this.addFuncForm.httpMethod = \"PATCH\";\n      } else if (data == \"page\") {\n        functionName = \"分页查询\";\n        this.addFuncForm.httpMethod = \"GET\";\n        url += \"/page\";\n      } else if (data == \"delete\") {\n        functionName = \"删除\";\n        this.addFuncForm.httpMethod = \"DELETE\";\n        url += \"/delete/*\";\n      }\n\n      this.addFuncForm.functionName = functionName;\n      this.addFuncForm.url = url;\n      this.addFuncForm.functionCode = menuCode + \"_\" + data;\n    },\n    // 保存新增功能\n    addFuncSave: function addFuncSave() {\n      var _this3 = this;\n\n      this.saveLoading = true;\n      Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"postAddMenuFunction\"])()({\n        menuCode: this.functionMenu.menuCode,\n        menuName: this.addFuncForm.menuName,\n        \"function-type\": this.addFuncForm.functiontype,\n        functionName: this.addFuncForm.functionName,\n        url: this.addFuncForm.url,\n        httpMethod: this.addFuncForm.httpMethod,\n        functionCode: this.addFuncForm.functionCode\n      }).then(function (data) {\n        if (data.code == \"00\") {\n          _this3.Message_pc({\n            type: \"success\",\n            message: \"恭喜您，添加功能成功!\"\n          }); // 更新数据\n\n\n          _this3.searchCondition = {\n            menuCode: _this3.functionMenu.menuCode,\n            page: 1,\n            limit: 10\n          };\n\n          _this3.seachstartHandle();\n\n          _this3.addFuncFormVisible = false;\n        } else {\n          _this3.Message_pc({\n            type: \"warning\",\n            message: data.msg\n          });\n        }\n\n        _this3.saveLoading = false;\n      });\n    },\n    removeHoverDom: function removeHoverDom(treeId, treeNode) {\n      $(\"#addBtn_\" + treeNode.tId).unbind().remove();\n    },\n    addHoverDom: function addHoverDom(treeId, treeNode) {\n      var _this4 = this;\n\n      this.treeNodeObj = treeNode;\n      var sObj = $(\"#\" + treeNode.tId + \"_span\");\n\n      if (!treeNode.isParent || treeNode.editNameFlag || $(\"#addBtn_\" + treeNode.tId).length > 0) {\n        return;\n      }\n\n      var addStr = \"<span class='button add' id='addBtn_\" + treeNode.tId + \"' title='添加菜单' onfocus='this.blur();'></span>\";\n      sObj.after(addStr);\n      var btn = $(\"#addBtn_\" + treeNode.tId);\n\n      if (btn) {\n        btn.bind(\"click\", function () {\n          // 点击新增按钮\n          // treeNode.menuCode\n          _this4.addForm.parentCode = treeNode.menuCode;\n          _this4.addFormVisible = true;\n          return false;\n        });\n      }\n    },\n    addSave: function addSave() {\n      var _this5 = this;\n\n      // 保存新增信息\n      this.saveLoading = true;\n      var addForm = this.addForm;\n      Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"patchAddMenuTree\"])()({\n        menuName: addForm.menuName,\n        parentCode: addForm.parentCode,\n        menuCode: addForm.menuCode,\n        isParent: addForm.isParent,\n        url: addForm.url\n      }).then(function (data) {\n        if (data.code == \"00\") {\n          _this5.Message_pc({\n            type: \"success\",\n            message: \"恭喜您，新增菜单成功!\"\n          });\n\n          _this5.zTreeObj.reAsyncChildNodes(_this5.treeNodeObj, \"refresh\");\n\n          _this5.zTreeObj.expandNode(_this5.treeNodeObj, null, null, null);\n\n          _this5.addFormVisible = false;\n        } else {\n          _this5.Message_pc({\n            type: \"warning\",\n            message: data.msg\n          });\n        }\n\n        _this5.saveLoading = false;\n      });\n    },\n    // 树加载成功之后展开根节点\n    zTreeOnAsyncSuccess: function zTreeOnAsyncSuccess(event, treeId, treeNode, msg) {\n      var _this6 = this;\n\n      this.$nextTick(function () {\n        var treeObj = $.fn.zTree.getZTreeObj(_this6.treeId);\n        var nodes = treeObj.getNodes();\n\n        for (var i = 0; i < nodes.length; i++) {\n          treeObj.expandNode(nodes[i], true);\n        }\n      });\n    },\n    // 点击编辑按钮\n    beforeEditName: function beforeEditName(treeId, treeNode) {\n      // this.resetForm(\"editForm\");\n      this.editForm = {};\n      this.treeNodeObj = treeNode.getParentNode();\n      this.editForm = treeNode; // editForm.isParent = false;\n\n      if (treeNode.isParent) {\n        this.editForm.editOptions = [{\n          value: true,\n          label: \"是\"\n        }, {\n          value: false,\n          label: \"否\"\n        }];\n      } else {\n        this.editForm.editOptions = [{\n          value: false,\n          label: \"是\"\n        }, {\n          value: true,\n          label: \"否\"\n        }];\n      }\n\n      this.editFormVisible = true;\n    },\n    editSave: function editSave() {\n      var _this7 = this;\n\n      this.saveLoading = true;\n      var editForm = this.editForm;\n      Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"patchEditMenuTree\"])()({\n        menuName: editForm.menuName,\n        menuCode: editForm.menuCode,\n        isParent: editForm.isParent,\n        url: editForm.url\n      }).then(function (data) {\n        if (data.code == \"00\") {\n          _this7.Message_pc({\n            type: \"success\",\n            message: \"恭喜您，更改成功!\"\n          });\n\n          _this7.zTreeObj.reAsyncChildNodes(_this7.treeNodeObj, \"refresh\");\n\n          _this7.zTreeObj.expandNode(_this7.treeNodeObj, null, null, null);\n\n          _this7.editFormVisible = false;\n        } else {\n          _this7.Message_pc({\n            type: \"warning\",\n            message: data.msg\n          });\n        }\n\n        _this7.saveLoading = false;\n      });\n    },\n    // 点击删除按钮\n    beforeRemove: function beforeRemove(treeId, treeNode) {\n      var _this8 = this;\n\n      if (treeNode.isParent && treeNode.children != null && treeNode.children.length != 0) {\n        this.Message_pc({\n          message: \"操作失败: 请先删除该菜单下的子菜单\",\n          type: \"warning\"\n        });\n        return false;\n      } // return false;\n\n\n      this.$confirm(\"确定删除吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"deleteMenuTree\"])()(treeNode.menuCode).then(function (data) {\n          if (data.code == \"00\") {\n            _this8.Message_pc({\n              type: \"success\",\n              message: \"删除成功!\"\n            });\n\n            _this8.zTreeObj.removeNode(treeNode, false);\n          } else {\n            _this8.Message_pc({\n              type: \"warning\",\n              message: data.msg\n            });\n          }\n        });\n      }).catch(function () {\n        _this8.Message_pc({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n      return false;\n    },\n    zTreeOnClick: function zTreeOnClick(event, treeId, treeNode) {\n      if (treeNode.isParent) {\n        this.zTreeObj.expandNode(treeNode, null, null, null);\n      } else {\n        this.functionMenu = treeNode; // 同步当前所点击的菜单menuCode\n\n        this.menuFunctionParentNode = treeNode; // 更新数据\n\n        this.$set(this.searchCondition, \"menuCode\", treeNode.menuCode);\n        this.seachstartHandle(); // 显示表格\n\n        this.tableVisible = true;\n      }\n\n      return false;\n    },\n    // 加载树列表\n    rootTreeload: function rootTreeload(node, resolve) {\n      Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"getMenuTrees\"])()({\n        _: new Date() * 1\n      }).then(function (data) {});\n    },\n\n    /**移动知识节点前处理*/\n    zTreeBeforeDrag: function zTreeBeforeDrag(treeId, treeNodes) {// console.log('前------------');\n      // console.log(treeId)\n    },\n\n    /**拖拽释放之后结束前执行  */\n    zTreeBeforeDrop: function zTreeBeforeDrop(treeId, treeNodes, targetNode, moveType_) {\n      var _this9 = this;\n\n      var menuParentCode = treeNodes[0].parentCode;\n      var targetParentCode = targetNode.parentCode;\n      var menuCode = treeNodes[0].menuCode;\n      var menuName = treeNodes[0].menuName;\n      var targetCode = targetNode.menuCode;\n      var moveType = moveType_;\n\n      if (treeNodes[0].level != targetNode.level || moveType == \"inner\" || menuParentCode != targetParentCode) {\n        return false;\n      } else {\n        Object(_src_apis__WEBPACK_IMPORTED_MODULE_4__[\"dropMenuTree\"])()({\n          menuCode: menuCode,\n          targetCode: targetCode,\n          moveType: moveType\n        }).then(function (res) {\n          if (res.code == \"00\") {\n            _this9.Message_pc({\n              message: \"\\u83DC\\u5355'\".concat(menuName, \"'\\u4F4D\\u7F6E\\u79FB\\u52A8\\u6210\\u529F\"),\n              type: \"success\",\n              center: true\n            });\n          }\n        });\n      }\n    },\n    initFn: function initFn() {\n      var _this10 = this;\n\n      // 配置ztree初始化属性，异步加载路径\n      this.setting = {\n        async: {\n          enable: true,\n          url: this.oaIp + \"/menu/tree\",\n          type: \"get\",\n          dataType: \"json\",\n          autoParam: [\"menuCode\"]\n        },\n        view: {\n          addHoverDom: this.addHoverDom,\n          removeHoverDom: this.removeHoverDom,\n          selectedMulti: false\n        },\n        check: {\n          enable: true\n        },\n        data: {\n          simpleData: {\n            enable: true,\n            idKey: \"menuCode\",\n            pIdKey: \"parentCode\"\n          },\n          keep: {\n            leaf: false,\n            parent: true\n          },\n          key: {\n            name: \"menuName\"\n          }\n        },\n        edit: {\n          enable: true\n        },\n        callback: {\n          onAsyncSuccess: this.zTreeOnAsyncSuccess,\n          beforeEditName: this.beforeEditName,\n          beforeRemove: this.beforeRemove,\n          onClick: this.zTreeOnClick,\n          beforeDrag: this.zTreeBeforeDrag,\n          beforeDrop: this.zTreeBeforeDrop\n        }\n      };\n      this.$nextTick(function () {\n        _this10.zTreeObj = $.fn.zTree.init($(\"#rootTreeNenu\"), _this10.setting);\n      });\n    }\n  },\n  computed: {\n    oaIp: function oaIp() {\n      // nginx配置的路由\n      return this.$store.state.Base.oaIp;\n    }\n  },\n  mounted: function mounted() {\n    this.initFn();\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPyEuL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8hLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/IS4vc3JjL3ZpZXdzL2FkbWluL3VzZXJNZW51LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdXNlck1lbnUudnVlPzAwYzgiXSwic291cmNlc0NvbnRlbnQiOlsiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwiYWRtaW4tcGFnZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJhZG1pbi1tYWluLWJveCB0cmVlLXRhYmxlLWJveFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRyZWUtYm94XCI+XG4gICAgICAgIDwhLS0gPGVsLXRyZWUgOnByb3BzPVwiZGF0YVRyZWVQcm9wc1wiIHJlbmRlci1hZnRlci1leHBhbmQ9XCJ0cnVlXCIgQG5vZGUtY2xpY2s9XCJ0cmVlQ2xpY2tcIiA6bG9hZD1cInJvb3RUcmVlbG9hZFwiIGxhenkgc2hvdy1jaGVja2JveD4gLS0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ6VHJlZURlbW9CYWNrZ3JvdW5kIGxlZnRcIj5cbiAgICAgICAgICA8dWwgaWQ9XCJyb290VHJlZU5lbnVcIiBjbGFzcz1cInp0cmVlXCI+PC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS1ib3hcIiB2LXNob3c9XCJ0YWJsZVZpc2libGVcIj5cbiAgICAgICAgPGVsLWJ1dHRvbi1ncm91cCBjbGFzcz1cImJ1dHRvbi1ncm91cFwiPlxuICAgICAgICAgIDxlbC1idXR0b24gY2xhc3M9XCJteWJ1dHRvblwiIEBjbGljaz1cImFkZEZ1bmNEaWFsb2dcIiBzaXplPVwic21hbGxcIiB0eXBlPVwicHJpbWFyeVwiIGljb249XCJlbC1pY29uLXBsdXNcIj7mlrDlop48L2VsLWJ1dHRvbj5cbiAgICAgICAgPC9lbC1idXR0b24tZ3JvdXA+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS1jb250YWluZXJcIj5cbiAgICAgICAgPG15cC1kYXRhLXBhZ2UgOmFjdGlvblVybD1cImFjdGlvblVybFwiIEBwYWdlY291bnQ9XCJwYWdlY291bnRIYW5kbGVcIiBAcGFnZWxpbWl0PVwicGFnZWxpbWl0SGFuZGxlXCIgQG9wZXJhdGlvbj1cIm9wZXJhdGlvbkhhbmRsZVwiIHJlZj1cImRhdGFUYWJsZVwiIDp0YWJsZURhdGFJbml0PVwidGFibGVEYXRhXCIgOmRhdGFMaXN0PVwiZGF0YUxpc3RcIiA6cGFnZT1cInBvc3RQYWdlXCIgOmxpbWl0PVwicG9zdExpbWl0XCIgOnNlYXJjaD1cInNlYXJjaENvbmRpdGlvblwiIDpkYXRhQ291bnQ9XCJkYXRhQ291bnRcIiA6bG9hZGluZz1cInRhYmxlTGFkaW5nXCI+PC9teXAtZGF0YS1wYWdlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDwhLS0g5paw5aKe5Yqf6IO9IHN0YXJ0IC0tPlxuICAgIDxlbC1kaWFsb2cgdi1kaWFsb2dEcmFnIHRpdGxlPVwi5paw5aKe5Yqf6IO9XCIgY2VudGVyIDp2aXNpYmxlLnN5bmM9XCJhZGRGdW5jRm9ybVZpc2libGVcIiB3aWR0aD1cIjUwMHB4XCI+XG4gICAgICA8ZWwtZm9ybSBzaXplPVwic21hbGxcIiA6bW9kZWw9XCJhZGRGdW5jRm9ybVwiIHJlZj1cImFkZEZ1bmNGb3JtXCIgOnJ1bGVzPVwiYWRkRnVuY0Zvcm1SdWxlc1wiPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5b2S5bGe6I+c5Y2VXCIgcHJvcD1cIm1lbnVOYW1lXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtaW5wdXQgOmRpc2FibGVkPVwidHJ1ZVwiIHYtbW9kZWw9XCJhZGRGdW5jRm9ybS5tZW51TmFtZVwiIGF1dG8tY29tcGxldGU9XCJvZmZcIj48L2VsLWlucHV0PlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWKn+iDveexu+Wei1wiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLXNlbGVjdCBAY2hhbmdlPVwiZnVuY3Rpb25UeXBlQ2hhbmdlXCIgcHJvcD1cImZ1bmN0aW9udHlwZVwiIHYtbW9kZWw9XCJhZGRGdW5jRm9ybS5mdW5jdGlvbnR5cGVcIiBwbGFjZWhvbGRlcj1cIuWKn+iDveexu+Wei1wiPlxuICAgICAgICAgICAgPGVsLW9wdGlvbiB2LWZvcj1cIml0ZW0gaW4gYWRkRnVuY0Zvcm0udHlwZU9wdGlvbnNcIiA6a2V5PVwiaXRlbS52YWx1ZVwiIDpsYWJlbD1cIml0ZW0ubGFiZWxcIiA6dmFsdWU9XCJpdGVtLnZhbHVlXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgPC9lbC1zZWxlY3Q+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5Yqf6IO95ZCN56ewXCIgcHJvcD1cImZ1bmN0aW9uTmFtZVwiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJhZGRGdW5jRm9ybS5mdW5jdGlvbk5hbWVcIiBhdXRvLWNvbXBsZXRlPVwib2ZmXCI+PC9lbC1pbnB1dD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLlip/og711cmxcIiBwcm9wPVwidXJsXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImFkZEZ1bmNGb3JtLnVybFwiIGF1dG8tY29tcGxldGU9XCJvZmZcIj48L2VsLWlucHV0PlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuivt+axguaWueazlVwiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLXNlbGVjdCBwcm9wPVwiaHR0cE1ldGhvZFwiIHYtbW9kZWw9XCJhZGRGdW5jRm9ybS5odHRwTWV0aG9kXCIgcGxhY2Vob2xkZXI9XCLor7fmsYLmlrnms5VcIj5cbiAgICAgICAgICAgIDxlbC1vcHRpb24gdi1mb3I9XCJpdGVtIGluIGh0dHBNZXRob2RPcHRpb25zXCIgOmtleT1cIml0ZW0udmFsdWVcIiA6bGFiZWw9XCJpdGVtLmxhYmVsXCIgOnZhbHVlPVwiaXRlbS52YWx1ZVwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgIDwvZWwtc2VsZWN0PlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWKn+iDvee8luWPt1wiIHByb3A9XCJmdW5jdGlvbkNvZGVcIiA6bGFiZWwtd2lkdGg9XCJmb3JtTGFiZWxXaWR0aFwiPlxuICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPVwiYWRkRnVuY0Zvcm0uZnVuY3Rpb25Db2RlXCIgYXV0by1jb21wbGV0ZT1cIm9mZlwiPjwvZWwtaW5wdXQ+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgPC9lbC1mb3JtPlxuICAgICAgPGRpdiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwiYWRkRnVuY0Zvcm1WaXNpYmxlID0gZmFsc2VcIj7lj5Yg5raIPC9lbC1idXR0b24+XG4gICAgICAgIDxlbC1idXR0b24gOmxvYWRpbmc9XCJzYXZlTG9hZGluZ1wiIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiYWRkRnVuY1NhdmUoJ2FkZEZ1bmNGb3JtJylcIj7noa4g5a6aPC9lbC1idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2VsLWRpYWxvZz5cbiAgICA8IS0tIOaWsOWinuWKn+iDvSBlbmQgLS0+XG4gICAgPCEtLSDlip/og73nvJbovpEgc3RhcnQgLS0+XG4gICAgPGVsLWRpYWxvZyB2LWRpYWxvZ0RyYWcgdGl0bGU9XCLkv67mlLnlip/og71cIiBjZW50ZXIgOnZpc2libGUuc3luYz1cImVkaXRGdW5jRm9ybVZpc2libGVcIiB3aWR0aD1cIjUwMHB4XCI+XG4gICAgICA8ZWwtZm9ybSBzaXplPVwic21hbGxcIiA6bW9kZWw9XCJlZGl0RnVuY0Zvcm1cIiByZWY9XCJlZGl0RnVuY0Zvcm1cIiA6cnVsZXM9XCJhZGRGb3JtUnVsZXNcIj5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuW9kuWxnuiPnOWNlVwiIHByb3A9XCJtZW51TmFtZVwiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLWlucHV0IDpkaXNhYmxlZD1cInRydWVcIiB2LW1vZGVsPVwiZWRpdEZ1bmNGb3JtLm1lbnVOYW1lXCIgYXV0by1jb21wbGV0ZT1cIm9mZlwiPjwvZWwtaW5wdXQ+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5Yqf6IO95ZCN56ewXCIgcHJvcD1cImZ1bmN0aW9uTmFtZVwiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJlZGl0RnVuY0Zvcm0uZnVuY3Rpb25OYW1lXCIgYXV0by1jb21wbGV0ZT1cIm9mZlwiPjwvZWwtaW5wdXQ+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5Yqf6IO9dXJsXCIgcHJvcD1cInVybFwiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJlZGl0RnVuY0Zvcm0udXJsXCIgYXV0by1jb21wbGV0ZT1cIm9mZlwiPjwvZWwtaW5wdXQ+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi6K+35rGC5pa55rOVXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtc2VsZWN0IHByb3A9XCJodHRwTWV0aG9kXCIgdi1tb2RlbD1cImVkaXRGdW5jRm9ybS5odHRwTWV0aG9kXCIgcGxhY2Vob2xkZXI9XCLmmK/lkKbmnInkuIvnuqfoj5zljZVcIj5cbiAgICAgICAgICAgIDxlbC1vcHRpb24gdi1mb3I9XCJpdGVtIGluIGh0dHBNZXRob2RPcHRpb25zXCIgOmtleT1cIml0ZW0udmFsdWVcIiA6bGFiZWw9XCJpdGVtLmxhYmVsXCIgOnZhbHVlPVwiaXRlbS52YWx1ZVwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgIDwvZWwtc2VsZWN0PlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWKn+iDvee8luWPt1wiIHByb3A9XCJmdW5jdGlvbkNvZGVcIiA6bGFiZWwtd2lkdGg9XCJmb3JtTGFiZWxXaWR0aFwiPlxuICAgICAgICAgIDxlbC1pbnB1dCA6ZGlzYWJsZWQ9XCJ0cnVlXCIgdi1tb2RlbD1cImVkaXRGdW5jRm9ybS5mdW5jdGlvbkNvZGVcIiBhdXRvLWNvbXBsZXRlPVwib2ZmXCI+PC9lbC1pbnB1dD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8ZGl2IHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJlZGl0RnVuY0Zvcm1WaXNpYmxlID0gZmFsc2VcIj7lj5Yg5raIPC9lbC1idXR0b24+XG4gICAgICAgIDxlbC1idXR0b24gOmxvYWRpbmc9XCJzYXZlTG9hZGluZ1wiIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiZWRpdEZ1bmNTYXZlKCdlZGl0RnVuY0Zvcm1WaXNpYmxlJylcIj7noa4g5a6aPC9lbC1idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2VsLWRpYWxvZz5cbiAgICA8IS0tIOWKn+iDvee8lui+kSBlbmQgLS0+XG4gICAgPCEtLSDmlrDlop7oj5zljZUgc3RhcnQgLS0+XG4gICAgPGVsLWRpYWxvZyB2LWRpYWxvZ0RyYWcgdGl0bGU9XCLmlrDlop7oj5zljZVcIiBjZW50ZXIgOnZpc2libGUuc3luYz1cImFkZEZvcm1WaXNpYmxlXCIgd2lkdGg9XCI1MDBweFwiPlxuICAgICAgPGVsLWZvcm0gc2l6ZT1cInNtYWxsXCIgOm1vZGVsPVwiYWRkRm9ybVwiIHJlZj1cImFkZEZvcm1cIiA6cnVsZXM9XCJhZGRGb3JtUnVsZXNcIj5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuiPnOWNleWQjeensFwiIHByb3A9XCJtZW51TmFtZVwiIDpsYWJlbC13aWR0aD1cImZvcm1MYWJlbFdpZHRoXCI+XG4gICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJhZGRGb3JtLm1lbnVOYW1lXCIgYXV0by1jb21wbGV0ZT1cIm9mZlwiPjwvZWwtaW5wdXQ+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi6I+c5Y2V57yW5Y+3XCIgcHJvcD1cIm1lbnVDb2RlXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImFkZEZvcm0ubWVudUNvZGVcIiBhdXRvLWNvbXBsZXRlPVwib2ZmXCI+PC9lbC1pbnB1dD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLmmK/lkKbmnInkuIvnuqfoj5zljZVcIj5cbiAgICAgICAgICA8ZWwtc3dpdGNoIHYtbW9kZWw9XCJhZGRGb3JtLmlzUGFyZW50XCIgYWN0aXZlLXZhbHVlPVwiVFJVRVwiIGluYWN0aXZlLXZhbHVlPVwiRkFMU0VcIiBhY3RpdmUtdGV4dD1cIuaYr1wiIGluYWN0aXZlLXRleHQ9XCLlkKZcIj48L2VsLXN3aXRjaD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgIDxlbC1mb3JtLWl0ZW0gdi1pZj1cIihhZGRGb3JtLmlzUGFyZW50PT0nVFJVRSc/ZmFsc2U6dHJ1ZSlcIiBsYWJlbD1cIuiPnOWNlXVybFwiIHByb3A9XCJ1cmxcIiA6bGFiZWwtd2lkdGg9XCJmb3JtTGFiZWxXaWR0aFwiPlxuICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPVwiYWRkRm9ybS51cmxcIiBhdXRvLWNvbXBsZXRlPVwib2ZmXCI+PC9lbC1pbnB1dD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8ZGl2IHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJhZGRGb3JtVmlzaWJsZSA9IGZhbHNlXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuICAgICAgICA8ZWwtYnV0dG9uIDpsb2FkaW5nPVwic2F2ZUxvYWRpbmdcIiB0eXBlPVwicHJpbWFyeVwiIEBjbGljaz1cImFkZFNhdmUoJ2FkZEZvcm0nKVwiPuehriDlrpo8L2VsLWJ1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZWwtZGlhbG9nPlxuICAgIDwhLS0g5paw5aKe6I+c5Y2VIGVuZCAtLT5cbiAgICA8IS0tIOe8lui+kSBzdGFydCAtLT5cbiAgICA8ZWwtZGlhbG9nIHYtZGlhbG9nRHJhZyB0aXRsZT1cIuS/ruaUueiPnOWNlVwiIGNlbnRlciA6dmlzaWJsZS5zeW5jPVwiZWRpdEZvcm1WaXNpYmxlXCIgd2lkdGg9XCI1MDBweFwiPlxuICAgICAgPGVsLWZvcm0gc2l6ZT1cInNtYWxsXCIgOm1vZGVsPVwiZWRpdEZvcm1cIiByZWY9XCJlZGl0Rm9ybVwiIDpydWxlcz1cImFkZEZvcm1SdWxlc1wiPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi6I+c5Y2V5ZCN56ewXCIgcHJvcD1cIm1lbnVOYW1lXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImVkaXRGb3JtLm1lbnVOYW1lXCIgYXV0by1jb21wbGV0ZT1cIm9mZlwiPjwvZWwtaW5wdXQ+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi6I+c5Y2V57yW5Y+3XCIgcHJvcD1cIm1lbnVDb2RlXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtaW5wdXQgOmRpc2FibGVkPVwidHJ1ZVwiIHYtbW9kZWw9XCJlZGl0Rm9ybS5tZW51Q29kZVwiIGF1dG8tY29tcGxldGU9XCJvZmZcIj48L2VsLWlucHV0PlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPGVsLWZvcm0taXRlbSB2LWlmPVwiIWVkaXRGb3JtLmlzUGFyZW50XCIgbGFiZWw9XCLoj5zljZV1cmxcIiBwcm9wPVwidXJsXCIgOmxhYmVsLXdpZHRoPVwiZm9ybUxhYmVsV2lkdGhcIj5cbiAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImVkaXRGb3JtLnVybFwiIGF1dG8tY29tcGxldGU9XCJvZmZcIj48L2VsLWlucHV0PlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuaYr+WQpuacieS4i+e6p+iPnOWNlVwiPlxuICAgICAgICAgIDwhLS0ge3tlZGl0Rm9ybS5pc1BhcmVudH19XG4gICAgICAgICAgPGVsLXN3aXRjaCB2LW1vZGVsPVwiZWRpdEZvcm0uaXNQYXJlbnRcIiBhY3RpdmUtdmFsdWU9XCJ0cnVlXCIgaW5hY3RpdmUtdmFsdWU9XCJmYWxzZVwiIGFjdGl2ZS10ZXh0PVwi5pivXCIgaW5hY3RpdmUtdGV4dD1cIuWQplwiPlxuICAgICAgICAgIDwvZWwtc3dpdGNoPi0tPlxuICAgICAgICAgIDxlbC1zZWxlY3QgOmRpc2FibGVkPVwidHJ1ZVwiIHByb3A9XCJpc1BhcmVudFwiIHYtbW9kZWw9XCJlZGl0Rm9ybS5pc1BhcmVudFwiIHBsYWNlaG9sZGVyPVwi5piv5ZCm5pyJ5LiL57qn6I+c5Y2VXCI+XG4gICAgICAgICAgICA8ZWwtb3B0aW9uIHYtZm9yPVwiaXRlbSBpbiBlZGl0T3B0aW9uc1Jlc3VsdFwiIDprZXk9XCJpdGVtLnZhbHVlXCIgOmxhYmVsPVwiaXRlbS5sYWJlbFwiIDp2YWx1ZT1cIml0ZW0udmFsdWVcIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8ZGl2IHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJlZGl0Rm9ybVZpc2libGUgPSBmYWxzZVwiPuWPliDmtog8L2VsLWJ1dHRvbj5cbiAgICAgICAgPGVsLWJ1dHRvbiA6bG9hZGluZz1cInNhdmVMb2FkaW5nXCIgdHlwZT1cInByaW1hcnlcIiBAY2xpY2s9XCJlZGl0U2F2ZSgnZWRpdEZvcm0nKVwiPuehriDlrpo8L2VsLWJ1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZWwtZGlhbG9nPlxuICAgIDwhLS0g57yW6L6RIGVuZCAtLT5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuPCEtLSBBZGQgXCJzY29wZWRcIiBhdHRyaWJ1dGUgdG8gbGltaXQgQ1NTIHRvIHRoaXMgY29tcG9uZW50IG9ubHkgLS0+XG5cbjxzdHlsZSBsYW5nPSdzY3NzJyBzY29wZWQ+XG5AaW1wb3J0IFwiLi4vLi4vY29tbW9uL3pUcmVlL2Nzcy9tZXRyb1N0eWxlL21ldHJvU3R5bGUuY3NzXCI7XG4udHJlZS10YWJsZS1ib3gge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAudHJlZS1ib3gge1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIGZsZXg6MCAwIDI1MHB4O1xuICB9XG4gIC50YWJsZS1ib3gge1xuICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xuICAgIHdpZHRoOjEwMCU7XG4gICAgcGFkZGluZzogMTBweCAwO1xuICAgIC50YWJsZS1jb250YWluZXJ7XG4gICAgICBmbGV4OjE7XG4gICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgIGJvdHRvbTowO1xuICAgICAgbGVmdDowO1xuICAgICAgcmlnaHQ6MDtcbiAgICAgIHRvcDogNjBweDtcbiAgICB9XG4gIH1cbn1cbjwvc3R5bGU+XG48c2NyaXB0PlxuaW1wb3J0IFwiQHNyYy9jb21tb24velRyZWUvanMvanF1ZXJ5Lnp0cmVlLmFsbC5qc1wiO1xuaW1wb3J0IERhdGFQYWdlIGZyb20gXCJAc3JjL2NvbXBvbmVudHMvRGF0YVBhZ2VcIjtcbmltcG9ydCB7IG1peGluc1BjIH0gZnJvbSBcIkBzcmMvY29tbW9uL21peGluc1BjXCI7XG5pbXBvcnQgeyBtaXhpbkRhdGFUYWJsZSB9IGZyb20gXCJAc3JjL2NvbXBvbmVudHMvRGF0YVBhZ2UvZGF0YVBhZ2VcIjtcbmltcG9ydCB7XG4gIGdldE1lbnVUcmVlcyxcbiAgZHJvcE1lbnVUcmVlLFxuICBnZXRNZW51VHJlZVBhZ2UsXG4gIHBhdGNoRWRpdE1lbnVUcmVlLFxuICBwYXRjaEFkZE1lbnVUcmVlLFxuICBkZWxldGVNZW51VHJlZSxcbiAgcG9zdEFkZE1lbnVGdW5jdGlvbixcbiAgcGF0Y2hFZGl0TWVudUZ1bmN0aW9uLFxuICBkZWxldGVNZW51RnVuY3Rpb25cbn0gZnJvbSBcIkBzcmMvYXBpc1wiO1xuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiBcInVzZXJNZW51XCIsXG4gIGNvbXBvbmVudHM6IHtcbiAgICBcIm15cC1kYXRhLXBhZ2VcIjogRGF0YVBhZ2UgLy8g5pWw5o2u5YiX6KGo57uE5Lu2XG4gIH0sXG4gIG1peGluczogW21peGluRGF0YVRhYmxlLCBtaXhpbnNQY10sXG4gIGRhdGEoKSB7XG4gICAgdmFyIGh0dHBNZXRob2RPcHRpb25zID0gW1xuICAgICAge1xuICAgICAgICB2YWx1ZTogXCJHRVRcIixcbiAgICAgICAgbGFiZWw6IFwiR0VUXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiBcIlBPU1RcIixcbiAgICAgICAgbGFiZWw6IFwiUE9TVFwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB2YWx1ZTogXCJQQVRDSFwiLFxuICAgICAgICBsYWJlbDogXCJQQVRDSFwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB2YWx1ZTogXCJERUxFVEVcIixcbiAgICAgICAgbGFiZWw6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiBcIlBVVFwiLFxuICAgICAgICBsYWJlbDogXCJQVVRcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IFwiSEVBRE5cIixcbiAgICAgICAgbGFiZWw6IFwiSEVBRE5cIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IFwiT1BUSU9OU1wiLFxuICAgICAgICBsYWJlbDogXCJPUFRJT05TXCJcbiAgICAgIH1cbiAgICBdO1xuICAgIHJldHVybiB7XG4gICAgICBzZXR0aW5nOiB7fSxcbiAgICAgIGRhdGFMaXN0OiBbXSxcbiAgICAgIHRhYmxlVmlzaWJsZTogZmFsc2UsXG4gICAgICBlZGl0RnVuY0Zvcm1WaXNpYmxlOiBmYWxzZSxcbiAgICAgIGh0dHBNZXRob2RPcHRpb25zOiBodHRwTWV0aG9kT3B0aW9ucyxcbiAgICAgIGVkaXRGdW5jRm9ybToge30sXG4gICAgICBmdW5jdGlvbk1lbnU6IHt9LFxuICAgICAgdHJlZU5vZGVPYmo6IFwiXCIsXG4gICAgICB0cmVlSWQ6IFwicm9vdFRyZWVOZW51XCIsXG4gICAgICB6VHJlZU9iajogXCJcIixcbiAgICAgIGFkZEZ1bmNGb3JtVmlzaWJsZTogZmFsc2UsXG4gICAgICBhZGRGdW5jRm9ybVJ1bGVzOiB7fSxcbiAgICAgIGFkZEZ1bmNGb3JtOiB7XG4gICAgICAgIG1lbnVOYW1lOiBcIlwiLFxuICAgICAgICBmdW5jdGlvbk5hbWU6IFwiXCIsXG4gICAgICAgIHVybDogXCJcIixcbiAgICAgICAgaHR0cE1ldGhvZDogXCJcIixcbiAgICAgICAgZnVuY3Rpb25Db2RlOiBcIlwiLFxuICAgICAgICAvLyDlip/og73nsbvlnotcbiAgICAgICAgdHlwZU9wdGlvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogXCJhZGRcIixcbiAgICAgICAgICAgIGxhYmVsOiBcIuaWsOWinlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogXCJlZGl0XCIsXG4gICAgICAgICAgICBsYWJlbDogXCLkv67mlLlcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IFwicGFnZVwiLFxuICAgICAgICAgICAgbGFiZWw6IFwi5YiG6aG15p+l6K+iXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiBcImRlbGV0ZVwiLFxuICAgICAgICAgICAgbGFiZWw6IFwi5Yig6ZmkXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgICAgLy8g6K+35rGC5pa55rOVXG4gICAgICB9LFxuICAgICAgbWVudUZ1bmN0aW9uUGFyZW50Tm9kZTogXCJcIixcbiAgICAgIGFkZEZvcm1WaXNpYmxlOiBmYWxzZSxcbiAgICAgIGFkZEZvcm06IHtcbiAgICAgICAgYWRkT3B0aW9uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgbGFiZWw6IFwi5pivXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsOiBcIuWQplwiXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgZWRpdEZvcm1WaXNpYmxlOiBmYWxzZSxcbiAgICAgIGVkaXRGb3JtOiB7XG4gICAgICAgIGVkaXRPcHRpb25zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICBsYWJlbDogXCLmmK9cIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWw6IFwi5ZCmXCJcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBlZGl0T3B0aW9uc1Jlc3VsdDogW1xuICAgICAgICB7XG4gICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgbGFiZWw6IFwi5pivXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICBsYWJlbDogXCLlkKZcIlxuICAgICAgICB9XG4gICAgICBdLFxuXG4gICAgICBhZGRGb3JtUnVsZXM6IHt9LFxuICAgICAgZm9ybUxhYmVsV2lkdGg6IFwiMTAwcHhcIixcbiAgICAgIC8vIOWIl+ihqOaVsOaNrlxuICAgICAgYWN0aW9uVXJsOiBnZXRNZW51VHJlZVBhZ2UsXG4gICAgICBzZWFyY2hDb25kaXRpb25EZWZhdWx0OiB7XG4gICAgICAgIG1lbnVDb2RlOiBcIlwiLFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogMTBcbiAgICAgIH0sXG4gICAgICBzZWFyY2hDb25kaXRpb246IHtcbiAgICAgICAgbWVudUNvZGU6IFwiXCIsXG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAxMFxuICAgICAgfSxcbiAgICAgIHRhYmxlRGF0YToge1xuICAgICAgICAvLyBnZXREYXRhVXJsOiB7XG4gICAgICAgIC8vICAgdXJsOiBnZXRNZW51VHJlZVBhZ2UgLy8g5Yid5aeL5YyW5pWw5o2uXG4gICAgICAgIC8vIH0sXG4gICAgICAgIGRhdGFIZWFkZXI6IFtcbiAgICAgICAgICAvLyB0YWJsZeWIl+S/oeaBryBrZXk9PuihqOWktOagh+mimO+8jHdvcmQ9PuihqOWGheWuueS/oeaBr1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogXCLlip/og71cIixcbiAgICAgICAgICAgIHdpZHRoOiBcIjEzMHB4XCIsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdvcmQ6IFwiZnVuY3Rpb25OYW1lXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogXCLlip/og73nvJblj7dcIixcbiAgICAgICAgICAgIHdpZHRoOiBcIlwiLFxuICAgICAgICAgICAgd29yZDogXCJmdW5jdGlvbkNvZGVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAga2V5OiBcInVybFwiLFxuICAgICAgICAgICAgd29yZDogXCJ1cmxcIixcbiAgICAgICAgICAgIHdpZHRoOiBcIlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBrZXk6IFwi6K+35rGC5pa55rOVXCIsXG4gICAgICAgICAgICB3aWR0aDogXCJcIixcbiAgICAgICAgICAgIHdvcmQ6IFwiaHR0cE1ldGhvZFwiXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBvcGVyYXRpb246IHtcbiAgICAgICAgICB3aWR0aDogXCIxMjBweFwiLFxuICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIC8vIOaTjeS9nOaMiemSrlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0ZXh0OiBcIue8lui+kVwiLFxuICAgICAgICAgICAgICBjb2xvcjogXCIjMTg5MGZmXCIsXG4gICAgICAgICAgICAgIHZpc2libGVGbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkbWluRmlsdGVyKFwibWVudV9mdW5jdGlvbl9lZGl0XCIpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjYjogcm93ZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0RnVuY0Zvcm0gPSByb3dkYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdEZ1bmNGb3JtLm1lbnVOYW1lID0gdGhpcy5mdW5jdGlvbk1lbnUubWVudU5hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0RnVuY0Zvcm1WaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGV4dDogXCLliKDpmaRcIixcbiAgICAgICAgICAgICAgdmlzaWJsZUZuOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRtaW5GaWx0ZXIoXCJtZW51X2Z1bmN0aW9uX2RlbGV0ZVwiKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2I6IHJvd2RhdGEgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oXCLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xlip/og70sIOaYr+WQpue7p+e7rT9cIiwgXCLmj5DnpLpcIiwge1xuICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IFwi56Gu5a6aXCIsXG4gICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiBcIuWPlua2iFwiLFxuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCJcbiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZU1lbnVGdW5jdGlvbigpKHJvd2RhdGEuZnVuY3Rpb25Db2RlKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IFwiMDBcIikge1xuICAgICAgICAgICAgICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCLliKDpmaTmiJDlip8hXCJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDmlbDmja5cbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaENvbmRpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVDb2RlOiB0aGlzLmZ1bmN0aW9uTWVudS5tZW51Q29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogMTBcbiAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhY2hzdGFydEhhbmRsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tc2dcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkYXRhVHJlZVByb3BzOiB7XG4gICAgICAgIGxhYmVsOiBcIm1lbnVOYW1lXCIsXG4gICAgICAgIGlzTGVhZjogXCJpc1BhcmVudFwiXG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIC8vIOaWsOWinuWKn+iDveW8ueWHuuaYvuekulxuICAgIGFkZEZ1bmNEaWFsb2coKSB7XG4gICAgICB0aGlzLmFkZEZ1bmNGb3JtLmh0dHBNZXRob2QgPSBcIlwiO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybS5mdW5jdGlvbnR5cGUgPSBcIlwiO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybS5mdW5jdGlvbk5hbWUgPSBcIlwiO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybS51cmwgPSBcIlwiO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybS5mdW5jdGlvbkNvZGUgPSBcIlwiO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybS5odHRwTWV0aG9kID0gXCJHRVRcIjtcbiAgICAgIHZhciBmdW5jdGlvbk1lbnUgPSB0aGlzLmZ1bmN0aW9uTWVudTtcbiAgICAgIHZhciBhZGRGdW5jRm9ybSA9IHRoaXMuYWRkRnVuY0Zvcm07XG4gICAgICB0aGlzLmFkZEZ1bmNGb3JtLm1lbnVOYW1lID0gZnVuY3Rpb25NZW51Lm1lbnVOYW1lO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybVZpc2libGUgPSB0cnVlO1xuICAgIH0sXG4gICAgZWRpdEZ1bmNTYXZlKCkge1xuICAgICAgLy8g5L+u5pS55Yqf6IO95L+d5a2YXG4gICAgICB0aGlzLnNhdmVMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHZhciBlZGl0RnVuY0Zvcm0gPSB0aGlzLmVkaXRGdW5jRm9ybTtcbiAgICAgIHBhdGNoRWRpdE1lbnVGdW5jdGlvbigpKHtcbiAgICAgICAgbWVudUNvZGU6IHRoaXMuZnVuY3Rpb25NZW51Lm1lbnVDb2RlLFxuICAgICAgICBtZW51TmFtZTogZWRpdEZ1bmNGb3JtLm1lbnVOYW1lLFxuICAgICAgICBmdW5jdGlvbk5hbWU6IGVkaXRGdW5jRm9ybS5mdW5jdGlvbk5hbWUsXG4gICAgICAgIHVybDogZWRpdEZ1bmNGb3JtLnVybCxcbiAgICAgICAgaHR0cE1ldGhvZDogZWRpdEZ1bmNGb3JtLmh0dHBNZXRob2QsXG4gICAgICAgIGZ1bmN0aW9uQ29kZTogZWRpdEZ1bmNGb3JtLmZ1bmN0aW9uQ29kZVxuICAgICAgICAvLyAuLi50aGlzLmVkaXRGdW5jRm9ybVxuICAgICAgfSkudGhlbihkYXRhID0+IHtcbiAgICAgICAgaWYgKGRhdGEuY29kZSA9PSBcIjAwXCIpIHtcbiAgICAgICAgIHRoaXMuTWVzc2FnZV9wYyh7XG4gICAgICAgICAgICB0eXBlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwi5oGt5Zac5oKo77yM5Yqf6IO95pu05pS55oiQ5YqfIVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8g5pu05paw5pWw5o2uXG4gICAgICAgICAgdGhpcy5zZWFyY2hDb25kaXRpb24gPSB7XG4gICAgICAgICAgICAvLyDmn6Xor6LmnaHku7ZcbiAgICAgICAgICAgIG1lbnVDb2RlOiB0aGlzLmZ1bmN0aW9uTWVudS5tZW51Q29kZSxcbiAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICBsaW1pdDogMTBcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuc2VhY2hzdGFydEhhbmRsZSgpO1xuICAgICAgICAgIHRoaXMuZWRpdEZ1bmNGb3JtVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tc2dcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOaWsOWinuiPnOWNleWKn+iDveexu+Wei+aUueWPmFxuICAgIGZ1bmN0aW9uVHlwZUNoYW5nZShkYXRhKSB7XG4gICAgICBpZiAoZGF0YS52YWx1ZSA9PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGxldCBtZW51Q29kZSA9IHRoaXMuZnVuY3Rpb25NZW51Lm1lbnVDb2RlO1xuICAgICAgbGV0IGZ1bmN0aW9uTmFtZSA9IFwiXCI7XG4gICAgICBsZXQgdXJsID0gXCIvXCIgKyBtZW51Q29kZTtcbiAgICAgIGlmIChkYXRhID09IFwiYWRkXCIpIHtcbiAgICAgICAgdGhpcy5hZGRGdW5jRm9ybS5odHRwTWV0aG9kID0gXCJQT1NUXCI7XG4gICAgICAgIGZ1bmN0aW9uTmFtZSA9IFwi5paw5aKeXCI7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgPT0gXCJlZGl0XCIpIHtcbiAgICAgICAgZnVuY3Rpb25OYW1lID0gXCLkv67mlLlcIjtcbiAgICAgICAgdGhpcy5hZGRGdW5jRm9ybS5odHRwTWV0aG9kID0gXCJQQVRDSFwiO1xuICAgICAgfSBlbHNlIGlmIChkYXRhID09IFwicGFnZVwiKSB7XG4gICAgICAgIGZ1bmN0aW9uTmFtZSA9IFwi5YiG6aG15p+l6K+iXCI7XG4gICAgICAgIHRoaXMuYWRkRnVuY0Zvcm0uaHR0cE1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgIHVybCArPSBcIi9wYWdlXCI7XG4gICAgICB9IGVsc2UgaWYgKGRhdGEgPT0gXCJkZWxldGVcIikge1xuICAgICAgICBmdW5jdGlvbk5hbWUgPSBcIuWIoOmZpFwiO1xuICAgICAgICB0aGlzLmFkZEZ1bmNGb3JtLmh0dHBNZXRob2QgPSBcIkRFTEVURVwiO1xuICAgICAgICB1cmwgKz0gXCIvZGVsZXRlLypcIjtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWRkRnVuY0Zvcm0uZnVuY3Rpb25OYW1lID0gZnVuY3Rpb25OYW1lO1xuICAgICAgdGhpcy5hZGRGdW5jRm9ybS51cmwgPSB1cmw7XG4gICAgICB0aGlzLmFkZEZ1bmNGb3JtLmZ1bmN0aW9uQ29kZSA9IG1lbnVDb2RlICsgXCJfXCIgKyBkYXRhO1xuICAgIH0sXG4gICAgLy8g5L+d5a2Y5paw5aKe5Yqf6IO9XG4gICAgYWRkRnVuY1NhdmUoKSB7XG4gICAgICB0aGlzLnNhdmVMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHBvc3RBZGRNZW51RnVuY3Rpb24oKSh7XG4gICAgICAgIG1lbnVDb2RlOiB0aGlzLmZ1bmN0aW9uTWVudS5tZW51Q29kZSxcbiAgICAgICAgbWVudU5hbWU6IHRoaXMuYWRkRnVuY0Zvcm0ubWVudU5hbWUsXG4gICAgICAgIFwiZnVuY3Rpb24tdHlwZVwiOiB0aGlzLmFkZEZ1bmNGb3JtLmZ1bmN0aW9udHlwZSxcbiAgICAgICAgZnVuY3Rpb25OYW1lOiB0aGlzLmFkZEZ1bmNGb3JtLmZ1bmN0aW9uTmFtZSxcbiAgICAgICAgdXJsOiB0aGlzLmFkZEZ1bmNGb3JtLnVybCxcbiAgICAgICAgaHR0cE1ldGhvZDogdGhpcy5hZGRGdW5jRm9ybS5odHRwTWV0aG9kLFxuICAgICAgICBmdW5jdGlvbkNvZGU6IHRoaXMuYWRkRnVuY0Zvcm0uZnVuY3Rpb25Db2RlXG4gICAgICB9KS50aGVuKGRhdGEgPT4ge1xuICAgICAgICBpZiAoZGF0YS5jb2RlID09IFwiMDBcIikge1xuICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgIHR5cGU6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCLmga3llpzmgqjvvIzmt7vliqDlip/og73miJDlip8hXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyDmm7TmlrDmlbDmja5cbiAgICAgICAgICB0aGlzLnNlYXJjaENvbmRpdGlvbiA9IHtcbiAgICAgICAgICAgIG1lbnVDb2RlOiB0aGlzLmZ1bmN0aW9uTWVudS5tZW51Q29kZSxcbiAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICBsaW1pdDogMTBcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMuc2VhY2hzdGFydEhhbmRsZSgpO1xuICAgICAgICAgIHRoaXMuYWRkRnVuY0Zvcm1WaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICB0aGlzLk1lc3NhZ2VfcGMoe1xuICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1zZ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVtb3ZlSG92ZXJEb20odHJlZUlkLCB0cmVlTm9kZSkge1xuICAgICAgJChcIiNhZGRCdG5fXCIgKyB0cmVlTm9kZS50SWQpXG4gICAgICAgIC51bmJpbmQoKVxuICAgICAgICAucmVtb3ZlKCk7XG4gICAgfSxcbiAgICBhZGRIb3ZlckRvbSh0cmVlSWQsIHRyZWVOb2RlKSB7XG4gICAgICB0aGlzLnRyZWVOb2RlT2JqID0gdHJlZU5vZGU7XG4gICAgICB2YXIgc09iaiA9ICQoXCIjXCIgKyB0cmVlTm9kZS50SWQgKyBcIl9zcGFuXCIpO1xuICAgICAgaWYgKFxuICAgICAgICAhdHJlZU5vZGUuaXNQYXJlbnQgfHxcbiAgICAgICAgdHJlZU5vZGUuZWRpdE5hbWVGbGFnIHx8XG4gICAgICAgICQoXCIjYWRkQnRuX1wiICsgdHJlZU5vZGUudElkKS5sZW5ndGggPiAwXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGFkZFN0ciA9XG4gICAgICAgIFwiPHNwYW4gY2xhc3M9J2J1dHRvbiBhZGQnIGlkPSdhZGRCdG5fXCIgK1xuICAgICAgICB0cmVlTm9kZS50SWQgK1xuICAgICAgICBcIicgdGl0bGU9J+a3u+WKoOiPnOWNlScgb25mb2N1cz0ndGhpcy5ibHVyKCk7Jz48L3NwYW4+XCI7XG4gICAgICBzT2JqLmFmdGVyKGFkZFN0cik7XG4gICAgICB2YXIgYnRuID0gJChcIiNhZGRCdG5fXCIgKyB0cmVlTm9kZS50SWQpO1xuICAgICAgaWYgKGJ0bikge1xuICAgICAgICBidG4uYmluZChcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAvLyDngrnlh7vmlrDlop7mjInpkq5cbiAgICAgICAgICAvLyB0cmVlTm9kZS5tZW51Q29kZVxuICAgICAgICAgIHRoaXMuYWRkRm9ybS5wYXJlbnRDb2RlID0gdHJlZU5vZGUubWVudUNvZGU7XG4gICAgICAgICAgdGhpcy5hZGRGb3JtVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFkZFNhdmUoKSB7XG4gICAgICAvLyDkv53lrZjmlrDlop7kv6Hmga9cbiAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSB0cnVlO1xuICAgICAgdmFyIGFkZEZvcm0gPSB0aGlzLmFkZEZvcm07XG4gICAgICBwYXRjaEFkZE1lbnVUcmVlKCkoe1xuICAgICAgICBtZW51TmFtZTogYWRkRm9ybS5tZW51TmFtZSxcbiAgICAgICAgcGFyZW50Q29kZTogYWRkRm9ybS5wYXJlbnRDb2RlLFxuICAgICAgICBtZW51Q29kZTogYWRkRm9ybS5tZW51Q29kZSxcbiAgICAgICAgaXNQYXJlbnQ6IGFkZEZvcm0uaXNQYXJlbnQsXG4gICAgICAgIHVybDogYWRkRm9ybS51cmxcbiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGlmIChkYXRhLmNvZGUgPT0gXCIwMFwiKSB7XG4gICAgICAgICB0aGlzLk1lc3NhZ2VfcGMoe1xuICAgICAgICAgICAgdHlwZTogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIuaBreWWnOaCqO+8jOaWsOWinuiPnOWNleaIkOWKnyFcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuelRyZWVPYmoucmVBc3luY0NoaWxkTm9kZXModGhpcy50cmVlTm9kZU9iaiwgXCJyZWZyZXNoXCIpO1xuICAgICAgICAgIHRoaXMuelRyZWVPYmouZXhwYW5kTm9kZSh0aGlzLnRyZWVOb2RlT2JqLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgICAgICB0aGlzLmFkZEZvcm1WaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICB0aGlzLk1lc3NhZ2VfcGMoe1xuICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1zZ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g5qCR5Yqg6L295oiQ5Yqf5LmL5ZCO5bGV5byA5qC56IqC54K5XG4gICAgelRyZWVPbkFzeW5jU3VjY2VzcyhldmVudCwgdHJlZUlkLCB0cmVlTm9kZSwgbXNnKSB7XG4gICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgIHZhciB0cmVlT2JqID0gJC5mbi56VHJlZS5nZXRaVHJlZU9iaih0aGlzLnRyZWVJZCk7XG4gICAgICAgIHZhciBub2RlcyA9IHRyZWVPYmouZ2V0Tm9kZXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRyZWVPYmouZXhwYW5kTm9kZShub2Rlc1tpXSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g54K55Ye757yW6L6R5oyJ6ZKuXG4gICAgYmVmb3JlRWRpdE5hbWUodHJlZUlkLCB0cmVlTm9kZSkge1xuICAgICAgLy8gdGhpcy5yZXNldEZvcm0oXCJlZGl0Rm9ybVwiKTtcbiAgICAgIHRoaXMuZWRpdEZvcm0gPSB7fTtcbiAgICAgIHRoaXMudHJlZU5vZGVPYmogPSB0cmVlTm9kZS5nZXRQYXJlbnROb2RlKCk7XG4gICAgICB0aGlzLmVkaXRGb3JtID0gdHJlZU5vZGU7XG4gICAgICAvLyBlZGl0Rm9ybS5pc1BhcmVudCA9IGZhbHNlO1xuICAgICAgaWYgKHRyZWVOb2RlLmlzUGFyZW50KSB7XG4gICAgICAgIHRoaXMuZWRpdEZvcm0uZWRpdE9wdGlvbnMgPSBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICBsYWJlbDogXCLmmK9cIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWw6IFwi5ZCmXCJcbiAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVkaXRGb3JtLmVkaXRPcHRpb25zID0gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsOiBcIuaYr1wiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGxhYmVsOiBcIuWQplwiXG4gICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgfVxuICAgICAgdGhpcy5lZGl0Rm9ybVZpc2libGUgPSB0cnVlO1xuICAgIH0sXG4gICAgZWRpdFNhdmUoKSB7XG4gICAgICB0aGlzLnNhdmVMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIGxldCBlZGl0Rm9ybSA9IHRoaXMuZWRpdEZvcm07XG4gICAgICBwYXRjaEVkaXRNZW51VHJlZSgpKHtcbiAgICAgICAgbWVudU5hbWU6IGVkaXRGb3JtLm1lbnVOYW1lLFxuICAgICAgICBtZW51Q29kZTogZWRpdEZvcm0ubWVudUNvZGUsXG4gICAgICAgIGlzUGFyZW50OiBlZGl0Rm9ybS5pc1BhcmVudCxcbiAgICAgICAgdXJsOiBlZGl0Rm9ybS51cmxcbiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIGlmIChkYXRhLmNvZGUgPT0gXCIwMFwiKSB7XG4gICAgICAgICB0aGlzLk1lc3NhZ2VfcGMoe1xuICAgICAgICAgICAgdHlwZTogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIuaBreWWnOaCqO+8jOabtOaUueaIkOWKnyFcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuelRyZWVPYmoucmVBc3luY0NoaWxkTm9kZXModGhpcy50cmVlTm9kZU9iaiwgXCJyZWZyZXNoXCIpO1xuICAgICAgICAgIHRoaXMuelRyZWVPYmouZXhwYW5kTm9kZSh0aGlzLnRyZWVOb2RlT2JqLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgICAgICB0aGlzLmVkaXRGb3JtVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiLFxuICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tc2dcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOeCueWHu+WIoOmZpOaMiemSrlxuICAgIGJlZm9yZVJlbW92ZSh0cmVlSWQsIHRyZWVOb2RlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRyZWVOb2RlLmlzUGFyZW50ICYmXG4gICAgICAgIHRyZWVOb2RlLmNoaWxkcmVuICE9IG51bGwgJiZcbiAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ubGVuZ3RoICE9IDBcbiAgICAgICkge1xuICAgICAgIHRoaXMuTWVzc2FnZV9wYyh7XG4gICAgICAgICAgbWVzc2FnZTogXCLmk43kvZzlpLHotKU6IOivt+WFiOWIoOmZpOivpeiPnOWNleS4i+eahOWtkOiPnOWNlVwiLFxuICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gZmFsc2U7XG4gICAgICB0aGlzLiRjb25maXJtKFwi56Gu5a6a5Yig6Zmk5ZCX77yfXCIsIFwi5o+Q56S6XCIsIHtcbiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IFwi56Gu5a6aXCIsXG4gICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IFwi5Y+W5raIXCIsXG4gICAgICAgIHR5cGU6IFwid2FybmluZ1wiXG4gICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlTWVudVRyZWUoKSh0cmVlTm9kZS5tZW51Q29kZSkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gXCIwMFwiKSB7XG4gICAgICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIuWIoOmZpOaIkOWKnyFcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGhpcy56VHJlZU9iai5yZW1vdmVOb2RlKHRyZWVOb2RlLCBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgIHRoaXMuTWVzc2FnZV9wYyh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tc2dcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICB0aGlzLk1lc3NhZ2VfcGMoe1xuICAgICAgICAgICAgdHlwZTogXCJpbmZvXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIuW3suWPlua2iOWIoOmZpFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgelRyZWVPbkNsaWNrKGV2ZW50LCB0cmVlSWQsIHRyZWVOb2RlKSB7XG4gICAgICBpZiAodHJlZU5vZGUuaXNQYXJlbnQpIHtcbiAgICAgICAgdGhpcy56VHJlZU9iai5leHBhbmROb2RlKHRyZWVOb2RlLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZnVuY3Rpb25NZW51ID0gdHJlZU5vZGU7IC8vIOWQjOatpeW9k+WJjeaJgOeCueWHu+eahOiPnOWNlW1lbnVDb2RlXG4gICAgICAgIHRoaXMubWVudUZ1bmN0aW9uUGFyZW50Tm9kZSA9IHRyZWVOb2RlO1xuICAgICAgICAvLyDmm7TmlrDmlbDmja5cbiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2VhcmNoQ29uZGl0aW9uLCBcIm1lbnVDb2RlXCIsIHRyZWVOb2RlLm1lbnVDb2RlKTtcbiAgICAgICAgdGhpcy5zZWFjaHN0YXJ0SGFuZGxlKCk7XG4gICAgICAgIC8vIOaYvuekuuihqOagvFxuICAgICAgICB0aGlzLnRhYmxlVmlzaWJsZSA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICAvLyDliqDovb3moJHliJfooahcbiAgICByb290VHJlZWxvYWQobm9kZSwgcmVzb2x2ZSkge1xuICAgICAgZ2V0TWVudVRyZWVzKCkoe1xuICAgICAgICBfOiBuZXcgRGF0ZSgpICogMVxuICAgICAgfSkudGhlbihkYXRhID0+IHsgfSk7XG4gICAgfSxcbiAgICAvKirnp7vliqjnn6Xor4boioLngrnliY3lpITnkIYqL1xuICAgIHpUcmVlQmVmb3JlRHJhZyh0cmVlSWQsIHRyZWVOb2Rlcykge1xuICAgICAgLy8gY29uc29sZS5sb2coJ+WJjS0tLS0tLS0tLS0tLScpO1xuICAgICAgLy8gY29uc29sZS5sb2codHJlZUlkKVxuICAgIH0sXG4gICAgLyoq5ouW5ou96YeK5pS+5LmL5ZCO57uT5p2f5YmN5omn6KGMICAqL1xuICAgIHpUcmVlQmVmb3JlRHJvcCh0cmVlSWQsIHRyZWVOb2RlcywgdGFyZ2V0Tm9kZSwgbW92ZVR5cGVfKSB7XG4gICAgICBsZXQgbWVudVBhcmVudENvZGUgPSB0cmVlTm9kZXNbMF0ucGFyZW50Q29kZTtcbiAgICAgIGxldCB0YXJnZXRQYXJlbnRDb2RlID0gdGFyZ2V0Tm9kZS5wYXJlbnRDb2RlO1xuICAgICAgbGV0IG1lbnVDb2RlID0gdHJlZU5vZGVzWzBdLm1lbnVDb2RlO1xuICAgICAgbGV0IG1lbnVOYW1lID0gdHJlZU5vZGVzWzBdLm1lbnVOYW1lO1xuICAgICAgbGV0IHRhcmdldENvZGUgPSB0YXJnZXROb2RlLm1lbnVDb2RlO1xuICAgICAgbGV0IG1vdmVUeXBlID0gbW92ZVR5cGVfO1xuICAgICAgaWYgKFxuICAgICAgICB0cmVlTm9kZXNbMF0ubGV2ZWwgIT0gdGFyZ2V0Tm9kZS5sZXZlbCB8fFxuICAgICAgICBtb3ZlVHlwZSA9PSBcImlubmVyXCIgfHxcbiAgICAgICAgbWVudVBhcmVudENvZGUgIT0gdGFyZ2V0UGFyZW50Q29kZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyb3BNZW51VHJlZSgpKHtcbiAgICAgICAgICBtZW51Q29kZTogbWVudUNvZGUsXG4gICAgICAgICAgdGFyZ2V0Q29kZTogdGFyZ2V0Q29kZSxcbiAgICAgICAgICBtb3ZlVHlwZTogbW92ZVR5cGVcbiAgICAgICAgfSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgIGlmIChyZXMuY29kZSA9PSBcIjAwXCIpIHtcbiAgICAgICAgICAgdGhpcy5NZXNzYWdlX3BjKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogYOiPnOWNlScke21lbnVOYW1lfSfkvY3nva7np7vliqjmiJDlip9gLFxuICAgICAgICAgICAgICB0eXBlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgY2VudGVyOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5pdEZuKCkge1xuICAgICAgLy8g6YWN572uenRyZWXliJ3lp4vljJblsZ7mgKfvvIzlvILmraXliqDovb3ot6/lvoRcbiAgICAgIHRoaXMuc2V0dGluZyA9IHtcbiAgICAgICAgYXN5bmM6IHtcbiAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgdXJsOiB0aGlzLm9hSXAgKyBcIi9tZW51L3RyZWVcIixcbiAgICAgICAgICB0eXBlOiBcImdldFwiLFxuICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICBhdXRvUGFyYW06IFtcIm1lbnVDb2RlXCJdXG4gICAgICAgIH0sXG4gICAgICAgIHZpZXc6IHtcbiAgICAgICAgICBhZGRIb3ZlckRvbTogdGhpcy5hZGRIb3ZlckRvbSxcbiAgICAgICAgICByZW1vdmVIb3ZlckRvbTogdGhpcy5yZW1vdmVIb3ZlckRvbSxcbiAgICAgICAgICBzZWxlY3RlZE11bHRpOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBjaGVjazoge1xuICAgICAgICAgIGVuYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc2ltcGxlRGF0YToge1xuICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgaWRLZXk6IFwibWVudUNvZGVcIixcbiAgICAgICAgICAgIHBJZEtleTogXCJwYXJlbnRDb2RlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGtlZXA6IHtcbiAgICAgICAgICAgIGxlYWY6IGZhbHNlLFxuICAgICAgICAgICAgcGFyZW50OiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBrZXk6IHtcbiAgICAgICAgICAgIG5hbWU6IFwibWVudU5hbWVcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZWRpdDoge1xuICAgICAgICAgIGVuYWJsZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjYWxsYmFjazoge1xuICAgICAgICAgIG9uQXN5bmNTdWNjZXNzOiB0aGlzLnpUcmVlT25Bc3luY1N1Y2Nlc3MsXG4gICAgICAgICAgYmVmb3JlRWRpdE5hbWU6IHRoaXMuYmVmb3JlRWRpdE5hbWUsXG4gICAgICAgICAgYmVmb3JlUmVtb3ZlOiB0aGlzLmJlZm9yZVJlbW92ZSxcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLnpUcmVlT25DbGljayxcbiAgICAgICAgICBiZWZvcmVEcmFnOiB0aGlzLnpUcmVlQmVmb3JlRHJhZyxcbiAgICAgICAgICBiZWZvcmVEcm9wOiB0aGlzLnpUcmVlQmVmb3JlRHJvcFxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLnpUcmVlT2JqID0gJC5mbi56VHJlZS5pbml0KCQoXCIjcm9vdFRyZWVOZW51XCIpLCB0aGlzLnNldHRpbmcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBjb21wdXRlZDoge1xuICAgIG9hSXAoKSB7XG4gICAgICAvLyBuZ2lueOmFjee9rueahOi3r+eUsVxuICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLkJhc2Uub2FJcDtcbiAgICB9XG4gIH0sXG4gIG1vdW50ZWQoKSB7XG4gICAgdGhpcy5pbml0Rm4oKTtcbiAgfVxufTtcbjwvc2NyaXB0PiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRkE7QUFDQTtBQXJCQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFGQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBTkE7QUFZQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFoQ0E7QUFoQkE7QUE1QkE7QUFpRkE7QUFDQTtBQUNBO0FBRkE7QUE3S0E7QUFrTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBREE7QUFWQTtBQWNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFqQ0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvWEE7QUFpWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBam1CQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"5354fe5c-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"5354fe5c-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return render; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"staticRenderFns\", function() { return staticRenderFns; });\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"admin-page\" },\n    [\n      _c(\"div\", { staticClass: \"admin-main-box tree-table-box\" }, [\n        _vm._m(0),\n        _c(\n          \"div\",\n          {\n            directives: [\n              {\n                name: \"show\",\n                rawName: \"v-show\",\n                value: _vm.tableVisible,\n                expression: \"tableVisible\"\n              }\n            ],\n            staticClass: \"table-box\"\n          },\n          [\n            _c(\n              \"el-button-group\",\n              { staticClass: \"button-group\" },\n              [\n                _c(\n                  \"el-button\",\n                  {\n                    staticClass: \"mybutton\",\n                    attrs: {\n                      size: \"small\",\n                      type: \"primary\",\n                      icon: \"el-icon-plus\"\n                    },\n                    on: { click: _vm.addFuncDialog }\n                  },\n                  [_vm._v(\"新增\")]\n                )\n              ],\n              1\n            ),\n            _c(\n              \"div\",\n              { staticClass: \"table-container\" },\n              [\n                _c(\"myp-data-page\", {\n                  ref: \"dataTable\",\n                  attrs: {\n                    actionUrl: _vm.actionUrl,\n                    tableDataInit: _vm.tableData,\n                    dataList: _vm.dataList,\n                    page: _vm.postPage,\n                    limit: _vm.postLimit,\n                    search: _vm.searchCondition,\n                    dataCount: _vm.dataCount,\n                    loading: _vm.tableLading\n                  },\n                  on: {\n                    pagecount: _vm.pagecountHandle,\n                    pagelimit: _vm.pagelimitHandle,\n                    operation: _vm.operationHandle\n                  }\n                })\n              ],\n              1\n            )\n          ],\n          1\n        )\n      ]),\n      _c(\n        \"el-dialog\",\n        {\n          directives: [{ name: \"dialogDrag\", rawName: \"v-dialogDrag\" }],\n          attrs: {\n            title: \"新增功能\",\n            center: \"\",\n            visible: _vm.addFuncFormVisible,\n            width: \"500px\"\n          },\n          on: {\n            \"update:visible\": function($event) {\n              _vm.addFuncFormVisible = $event\n            }\n          }\n        },\n        [\n          _c(\n            \"el-form\",\n            {\n              ref: \"addFuncForm\",\n              attrs: {\n                size: \"small\",\n                model: _vm.addFuncForm,\n                rules: _vm.addFuncFormRules\n              }\n            },\n            [\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"归属菜单\",\n                    prop: \"menuName\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { disabled: true, \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.addFuncForm.menuName,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addFuncForm, \"menuName\", $$v)\n                      },\n                      expression: \"addFuncForm.menuName\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能类型\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\n                    \"el-select\",\n                    {\n                      attrs: { prop: \"functiontype\", placeholder: \"功能类型\" },\n                      on: { change: _vm.functionTypeChange },\n                      model: {\n                        value: _vm.addFuncForm.functiontype,\n                        callback: function($$v) {\n                          _vm.$set(_vm.addFuncForm, \"functiontype\", $$v)\n                        },\n                        expression: \"addFuncForm.functiontype\"\n                      }\n                    },\n                    _vm._l(_vm.addFuncForm.typeOptions, function(item) {\n                      return _c(\"el-option\", {\n                        key: item.value,\n                        attrs: { label: item.label, value: item.value }\n                      })\n                    }),\n                    1\n                  )\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能名称\",\n                    prop: \"functionName\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.addFuncForm.functionName,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addFuncForm, \"functionName\", $$v)\n                      },\n                      expression: \"addFuncForm.functionName\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能url\",\n                    prop: \"url\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.addFuncForm.url,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addFuncForm, \"url\", $$v)\n                      },\n                      expression: \"addFuncForm.url\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"请求方法\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\n                    \"el-select\",\n                    {\n                      attrs: { prop: \"httpMethod\", placeholder: \"请求方法\" },\n                      model: {\n                        value: _vm.addFuncForm.httpMethod,\n                        callback: function($$v) {\n                          _vm.$set(_vm.addFuncForm, \"httpMethod\", $$v)\n                        },\n                        expression: \"addFuncForm.httpMethod\"\n                      }\n                    },\n                    _vm._l(_vm.httpMethodOptions, function(item) {\n                      return _c(\"el-option\", {\n                        key: item.value,\n                        attrs: { label: item.label, value: item.value }\n                      })\n                    }),\n                    1\n                  )\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能编号\",\n                    prop: \"functionCode\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.addFuncForm.functionCode,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addFuncForm, \"functionCode\", $$v)\n                      },\n                      expression: \"addFuncForm.functionCode\"\n                    }\n                  })\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _c(\n            \"div\",\n            {\n              staticClass: \"dialog-footer\",\n              attrs: { slot: \"footer\" },\n              slot: \"footer\"\n            },\n            [\n              _c(\n                \"el-button\",\n                {\n                  on: {\n                    click: function($event) {\n                      _vm.addFuncFormVisible = false\n                    }\n                  }\n                },\n                [_vm._v(\"取 消\")]\n              ),\n              _c(\n                \"el-button\",\n                {\n                  attrs: { loading: _vm.saveLoading, type: \"primary\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.addFuncSave(\"addFuncForm\")\n                    }\n                  }\n                },\n                [_vm._v(\"确 定\")]\n              )\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _c(\n        \"el-dialog\",\n        {\n          directives: [{ name: \"dialogDrag\", rawName: \"v-dialogDrag\" }],\n          attrs: {\n            title: \"修改功能\",\n            center: \"\",\n            visible: _vm.editFuncFormVisible,\n            width: \"500px\"\n          },\n          on: {\n            \"update:visible\": function($event) {\n              _vm.editFuncFormVisible = $event\n            }\n          }\n        },\n        [\n          _c(\n            \"el-form\",\n            {\n              ref: \"editFuncForm\",\n              attrs: {\n                size: \"small\",\n                model: _vm.editFuncForm,\n                rules: _vm.addFormRules\n              }\n            },\n            [\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"归属菜单\",\n                    prop: \"menuName\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { disabled: true, \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.editFuncForm.menuName,\n                      callback: function($$v) {\n                        _vm.$set(_vm.editFuncForm, \"menuName\", $$v)\n                      },\n                      expression: \"editFuncForm.menuName\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能名称\",\n                    prop: \"functionName\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.editFuncForm.functionName,\n                      callback: function($$v) {\n                        _vm.$set(_vm.editFuncForm, \"functionName\", $$v)\n                      },\n                      expression: \"editFuncForm.functionName\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能url\",\n                    prop: \"url\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.editFuncForm.url,\n                      callback: function($$v) {\n                        _vm.$set(_vm.editFuncForm, \"url\", $$v)\n                      },\n                      expression: \"editFuncForm.url\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"请求方法\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\n                    \"el-select\",\n                    {\n                      attrs: {\n                        prop: \"httpMethod\",\n                        placeholder: \"是否有下级菜单\"\n                      },\n                      model: {\n                        value: _vm.editFuncForm.httpMethod,\n                        callback: function($$v) {\n                          _vm.$set(_vm.editFuncForm, \"httpMethod\", $$v)\n                        },\n                        expression: \"editFuncForm.httpMethod\"\n                      }\n                    },\n                    _vm._l(_vm.httpMethodOptions, function(item) {\n                      return _c(\"el-option\", {\n                        key: item.value,\n                        attrs: { label: item.label, value: item.value }\n                      })\n                    }),\n                    1\n                  )\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"功能编号\",\n                    prop: \"functionCode\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { disabled: true, \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.editFuncForm.functionCode,\n                      callback: function($$v) {\n                        _vm.$set(_vm.editFuncForm, \"functionCode\", $$v)\n                      },\n                      expression: \"editFuncForm.functionCode\"\n                    }\n                  })\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _c(\n            \"div\",\n            {\n              staticClass: \"dialog-footer\",\n              attrs: { slot: \"footer\" },\n              slot: \"footer\"\n            },\n            [\n              _c(\n                \"el-button\",\n                {\n                  on: {\n                    click: function($event) {\n                      _vm.editFuncFormVisible = false\n                    }\n                  }\n                },\n                [_vm._v(\"取 消\")]\n              ),\n              _c(\n                \"el-button\",\n                {\n                  attrs: { loading: _vm.saveLoading, type: \"primary\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.editFuncSave(\"editFuncFormVisible\")\n                    }\n                  }\n                },\n                [_vm._v(\"确 定\")]\n              )\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _c(\n        \"el-dialog\",\n        {\n          directives: [{ name: \"dialogDrag\", rawName: \"v-dialogDrag\" }],\n          attrs: {\n            title: \"新增菜单\",\n            center: \"\",\n            visible: _vm.addFormVisible,\n            width: \"500px\"\n          },\n          on: {\n            \"update:visible\": function($event) {\n              _vm.addFormVisible = $event\n            }\n          }\n        },\n        [\n          _c(\n            \"el-form\",\n            {\n              ref: \"addForm\",\n              attrs: {\n                size: \"small\",\n                model: _vm.addForm,\n                rules: _vm.addFormRules\n              }\n            },\n            [\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"菜单名称\",\n                    prop: \"menuName\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.addForm.menuName,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addForm, \"menuName\", $$v)\n                      },\n                      expression: \"addForm.menuName\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"菜单编号\",\n                    prop: \"menuCode\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.addForm.menuCode,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addForm, \"menuCode\", $$v)\n                      },\n                      expression: \"addForm.menuCode\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                { attrs: { label: \"是否有下级菜单\" } },\n                [\n                  _c(\"el-switch\", {\n                    attrs: {\n                      \"active-value\": \"TRUE\",\n                      \"inactive-value\": \"FALSE\",\n                      \"active-text\": \"是\",\n                      \"inactive-text\": \"否\"\n                    },\n                    model: {\n                      value: _vm.addForm.isParent,\n                      callback: function($$v) {\n                        _vm.$set(_vm.addForm, \"isParent\", $$v)\n                      },\n                      expression: \"addForm.isParent\"\n                    }\n                  })\n                ],\n                1\n              ),\n              (_vm.addForm.isParent == \"TRUE\"\n              ? false\n              : true)\n                ? _c(\n                    \"el-form-item\",\n                    {\n                      attrs: {\n                        label: \"菜单url\",\n                        prop: \"url\",\n                        \"label-width\": _vm.formLabelWidth\n                      }\n                    },\n                    [\n                      _c(\"el-input\", {\n                        attrs: { \"auto-complete\": \"off\" },\n                        model: {\n                          value: _vm.addForm.url,\n                          callback: function($$v) {\n                            _vm.$set(_vm.addForm, \"url\", $$v)\n                          },\n                          expression: \"addForm.url\"\n                        }\n                      })\n                    ],\n                    1\n                  )\n                : _vm._e()\n            ],\n            1\n          ),\n          _c(\n            \"div\",\n            {\n              staticClass: \"dialog-footer\",\n              attrs: { slot: \"footer\" },\n              slot: \"footer\"\n            },\n            [\n              _c(\n                \"el-button\",\n                {\n                  on: {\n                    click: function($event) {\n                      _vm.addFormVisible = false\n                    }\n                  }\n                },\n                [_vm._v(\"取 消\")]\n              ),\n              _c(\n                \"el-button\",\n                {\n                  attrs: { loading: _vm.saveLoading, type: \"primary\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.addSave(\"addForm\")\n                    }\n                  }\n                },\n                [_vm._v(\"确 定\")]\n              )\n            ],\n            1\n          )\n        ],\n        1\n      ),\n      _c(\n        \"el-dialog\",\n        {\n          directives: [{ name: \"dialogDrag\", rawName: \"v-dialogDrag\" }],\n          attrs: {\n            title: \"修改菜单\",\n            center: \"\",\n            visible: _vm.editFormVisible,\n            width: \"500px\"\n          },\n          on: {\n            \"update:visible\": function($event) {\n              _vm.editFormVisible = $event\n            }\n          }\n        },\n        [\n          _c(\n            \"el-form\",\n            {\n              ref: \"editForm\",\n              attrs: {\n                size: \"small\",\n                model: _vm.editForm,\n                rules: _vm.addFormRules\n              }\n            },\n            [\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"菜单名称\",\n                    prop: \"menuName\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.editForm.menuName,\n                      callback: function($$v) {\n                        _vm.$set(_vm.editForm, \"menuName\", $$v)\n                      },\n                      expression: \"editForm.menuName\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"el-form-item\",\n                {\n                  attrs: {\n                    label: \"菜单编号\",\n                    prop: \"menuCode\",\n                    \"label-width\": _vm.formLabelWidth\n                  }\n                },\n                [\n                  _c(\"el-input\", {\n                    attrs: { disabled: true, \"auto-complete\": \"off\" },\n                    model: {\n                      value: _vm.editForm.menuCode,\n                      callback: function($$v) {\n                        _vm.$set(_vm.editForm, \"menuCode\", $$v)\n                      },\n                      expression: \"editForm.menuCode\"\n                    }\n                  })\n                ],\n                1\n              ),\n              !_vm.editForm.isParent\n                ? _c(\n                    \"el-form-item\",\n                    {\n                      attrs: {\n                        label: \"菜单url\",\n                        prop: \"url\",\n                        \"label-width\": _vm.formLabelWidth\n                      }\n                    },\n                    [\n                      _c(\"el-input\", {\n                        attrs: { \"auto-complete\": \"off\" },\n                        model: {\n                          value: _vm.editForm.url,\n                          callback: function($$v) {\n                            _vm.$set(_vm.editForm, \"url\", $$v)\n                          },\n                          expression: \"editForm.url\"\n                        }\n                      })\n                    ],\n                    1\n                  )\n                : _vm._e(),\n              _c(\n                \"el-form-item\",\n                { attrs: { label: \"是否有下级菜单\" } },\n                [\n                  _c(\n                    \"el-select\",\n                    {\n                      attrs: {\n                        disabled: true,\n                        prop: \"isParent\",\n                        placeholder: \"是否有下级菜单\"\n                      },\n                      model: {\n                        value: _vm.editForm.isParent,\n                        callback: function($$v) {\n                          _vm.$set(_vm.editForm, \"isParent\", $$v)\n                        },\n                        expression: \"editForm.isParent\"\n                      }\n                    },\n                    _vm._l(_vm.editOptionsResult, function(item) {\n                      return _c(\"el-option\", {\n                        key: item.value,\n                        attrs: { label: item.label, value: item.value }\n                      })\n                    }),\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _c(\n            \"div\",\n            {\n              staticClass: \"dialog-footer\",\n              attrs: { slot: \"footer\" },\n              slot: \"footer\"\n            },\n            [\n              _c(\n                \"el-button\",\n                {\n                  on: {\n                    click: function($event) {\n                      _vm.editFormVisible = false\n                    }\n                  }\n                },\n                [_vm._v(\"取 消\")]\n              ),\n              _c(\n                \"el-button\",\n                {\n                  attrs: { loading: _vm.saveLoading, type: \"primary\" },\n                  on: {\n                    click: function($event) {\n                      return _vm.editSave(\"editForm\")\n                    }\n                  }\n                },\n                [_vm._v(\"确 定\")]\n              )\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"tree-box\" }, [\n      _c(\"div\", { staticClass: \"zTreeDemoBackground left\" }, [\n        _c(\"ul\", { staticClass: \"ztree\", attrs: { id: \"rootTreeNenu\" } })\n      ])\n    ])\n  }\n]\nrender._withStripped = true\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzP3tcImNhY2hlRGlyZWN0b3J5XCI6XCJub2RlX21vZHVsZXMvLmNhY2hlL3Z1ZS1sb2FkZXJcIixcImNhY2hlSWRlbnRpZmllclwiOlwiNTM1NGZlNWMtdnVlLWxvYWRlci10ZW1wbGF0ZVwifSEuL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3RlbXBsYXRlTG9hZGVyLmpzPyEuL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/IS4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPyEuL3NyYy92aWV3cy9hZG1pbi91c2VyTWVudS52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MmVkZTAzYjgmc2NvcGVkPXRydWUmLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL2FkbWluL3VzZXJNZW51LnZ1ZT9iNGY5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciByZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIF92bSA9IHRoaXNcbiAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50XG4gIHZhciBfYyA9IF92bS5fc2VsZi5fYyB8fCBfaFxuICByZXR1cm4gX2MoXG4gICAgXCJkaXZcIixcbiAgICB7IHN0YXRpY0NsYXNzOiBcImFkbWluLXBhZ2VcIiB9LFxuICAgIFtcbiAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwiYWRtaW4tbWFpbi1ib3ggdHJlZS10YWJsZS1ib3hcIiB9LCBbXG4gICAgICAgIF92bS5fbSgwKSxcbiAgICAgICAgX2MoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInNob3dcIixcbiAgICAgICAgICAgICAgICByYXdOYW1lOiBcInYtc2hvd1wiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0udGFibGVWaXNpYmxlLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwidGFibGVWaXNpYmxlXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcInRhYmxlLWJveFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgXCJlbC1idXR0b24tZ3JvdXBcIixcbiAgICAgICAgICAgICAgeyBzdGF0aWNDbGFzczogXCJidXR0b24tZ3JvdXBcIiB9LFxuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICBcImVsLWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJteWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInByaW1hcnlcIixcbiAgICAgICAgICAgICAgICAgICAgICBpY29uOiBcImVsLWljb24tcGx1c1wiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uOiB7IGNsaWNrOiBfdm0uYWRkRnVuY0RpYWxvZyB9XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgW192bS5fdihcIuaWsOWinlwiKV1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgeyBzdGF0aWNDbGFzczogXCJ0YWJsZS1jb250YWluZXJcIiB9LFxuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgX2MoXCJteXAtZGF0YS1wYWdlXCIsIHtcbiAgICAgICAgICAgICAgICAgIHJlZjogXCJkYXRhVGFibGVcIixcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvblVybDogX3ZtLmFjdGlvblVybCxcbiAgICAgICAgICAgICAgICAgICAgdGFibGVEYXRhSW5pdDogX3ZtLnRhYmxlRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YUxpc3Q6IF92bS5kYXRhTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogX3ZtLnBvc3RQYWdlLFxuICAgICAgICAgICAgICAgICAgICBsaW1pdDogX3ZtLnBvc3RMaW1pdCxcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoOiBfdm0uc2VhcmNoQ29uZGl0aW9uLFxuICAgICAgICAgICAgICAgICAgICBkYXRhQ291bnQ6IF92bS5kYXRhQ291bnQsXG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IF92bS50YWJsZUxhZGluZ1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2Vjb3VudDogX3ZtLnBhZ2Vjb3VudEhhbmRsZSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZWxpbWl0OiBfdm0ucGFnZWxpbWl0SGFuZGxlLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IF92bS5vcGVyYXRpb25IYW5kbGVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApXG4gICAgICAgICAgXSxcbiAgICAgICAgICAxXG4gICAgICAgIClcbiAgICAgIF0pLFxuICAgICAgX2MoXG4gICAgICAgIFwiZWwtZGlhbG9nXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBkaXJlY3RpdmVzOiBbeyBuYW1lOiBcImRpYWxvZ0RyYWdcIiwgcmF3TmFtZTogXCJ2LWRpYWxvZ0RyYWdcIiB9XSxcbiAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdGl0bGU6IFwi5paw5aKe5Yqf6IO9XCIsXG4gICAgICAgICAgICBjZW50ZXI6IFwiXCIsXG4gICAgICAgICAgICB2aXNpYmxlOiBfdm0uYWRkRnVuY0Zvcm1WaXNpYmxlLFxuICAgICAgICAgICAgd2lkdGg6IFwiNTAwcHhcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgb246IHtcbiAgICAgICAgICAgIFwidXBkYXRlOnZpc2libGVcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICAgIF92bS5hZGRGdW5jRm9ybVZpc2libGUgPSAkZXZlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFtcbiAgICAgICAgICBfYyhcbiAgICAgICAgICAgIFwiZWwtZm9ybVwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByZWY6IFwiYWRkRnVuY0Zvcm1cIixcbiAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICBzaXplOiBcInNtYWxsXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IF92bS5hZGRGdW5jRm9ybSxcbiAgICAgICAgICAgICAgICBydWxlczogX3ZtLmFkZEZ1bmNGb3JtUnVsZXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJlbC1mb3JtLWl0ZW1cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCLlvZLlsZ7oj5zljZVcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJtZW51TmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxhYmVsLXdpZHRoXCI6IF92bS5mb3JtTGFiZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXCJlbC1pbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGRpc2FibGVkOiB0cnVlLCBcImF1dG8tY29tcGxldGVcIjogXCJvZmZcIiB9LFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWRkRnVuY0Zvcm0ubWVudU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmFkZEZ1bmNGb3JtLCBcIm1lbnVOYW1lXCIsICQkdilcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiYWRkRnVuY0Zvcm0ubWVudU5hbWVcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuWKn+iDveexu+Wei1wiLFxuICAgICAgICAgICAgICAgICAgICBcImxhYmVsLXdpZHRoXCI6IF92bS5mb3JtTGFiZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgIFwiZWwtc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBwcm9wOiBcImZ1bmN0aW9udHlwZVwiLCBwbGFjZWhvbGRlcjogXCLlip/og73nsbvlnotcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgIG9uOiB7IGNoYW5nZTogX3ZtLmZ1bmN0aW9uVHlwZUNoYW5nZSB9LFxuICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFkZEZ1bmNGb3JtLmZ1bmN0aW9udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigkJHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmFkZEZ1bmNGb3JtLCBcImZ1bmN0aW9udHlwZVwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJhZGRGdW5jRm9ybS5mdW5jdGlvbnR5cGVcIlxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgX3ZtLl9sKF92bS5hZGRGdW5jRm9ybS50eXBlT3B0aW9ucywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYyhcImVsLW9wdGlvblwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBsYWJlbDogaXRlbS5sYWJlbCwgdmFsdWU6IGl0ZW0udmFsdWUgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtZm9ybS1pdGVtXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwi5Yqf6IO95ZCN56ewXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb3A6IFwiZnVuY3Rpb25OYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibGFiZWwtd2lkdGhcIjogX3ZtLmZvcm1MYWJlbFdpZHRoXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBfYyhcImVsLWlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgXCJhdXRvLWNvbXBsZXRlXCI6IFwib2ZmXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFkZEZ1bmNGb3JtLmZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uYWRkRnVuY0Zvcm0sIFwiZnVuY3Rpb25OYW1lXCIsICQkdilcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiYWRkRnVuY0Zvcm0uZnVuY3Rpb25OYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJlbC1mb3JtLWl0ZW1cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCLlip/og711cmxcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsYWJlbC13aWR0aFwiOiBfdm0uZm9ybUxhYmVsV2lkdGhcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZWwtaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBcImF1dG8tY29tcGxldGVcIjogXCJvZmZcIiB9LFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWRkRnVuY0Zvcm0udXJsLFxuICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigkJHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kc2V0KF92bS5hZGRGdW5jRm9ybSwgXCJ1cmxcIiwgJCR2KVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJhZGRGdW5jRm9ybS51cmxcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuivt+axguaWueazlVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxhYmVsLXdpZHRoXCI6IF92bS5mb3JtTGFiZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgIFwiZWwtc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBwcm9wOiBcImh0dHBNZXRob2RcIiwgcGxhY2Vob2xkZXI6IFwi6K+35rGC5pa55rOVXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5hZGRGdW5jRm9ybS5odHRwTWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uYWRkRnVuY0Zvcm0sIFwiaHR0cE1ldGhvZFwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJhZGRGdW5jRm9ybS5odHRwTWV0aG9kXCJcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF92bS5fbChfdm0uaHR0cE1ldGhvZE9wdGlvbnMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2MoXCJlbC1vcHRpb25cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgbGFiZWw6IGl0ZW0ubGFiZWwsIHZhbHVlOiBpdGVtLnZhbHVlIH1cbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuWKn+iDvee8luWPt1wiLFxuICAgICAgICAgICAgICAgICAgICBwcm9wOiBcImZ1bmN0aW9uQ29kZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxhYmVsLXdpZHRoXCI6IF92bS5mb3JtTGFiZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXCJlbC1pbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IFwiYXV0by1jb21wbGV0ZVwiOiBcIm9mZlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5hZGRGdW5jRm9ybS5mdW5jdGlvbkNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmFkZEZ1bmNGb3JtLCBcImZ1bmN0aW9uQ29kZVwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcImFkZEZ1bmNGb3JtLmZ1bmN0aW9uQ29kZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfYyhcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImRpYWxvZy1mb290ZXJcIixcbiAgICAgICAgICAgICAgYXR0cnM6IHsgc2xvdDogXCJmb290ZXJcIiB9LFxuICAgICAgICAgICAgICBzbG90OiBcImZvb3RlclwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdm0uYWRkRnVuY0Zvcm1WaXNpYmxlID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW192bS5fdihcIuWPliDmtohcIildXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgbG9hZGluZzogX3ZtLnNhdmVMb2FkaW5nLCB0eXBlOiBcInByaW1hcnlcIiB9LFxuICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uYWRkRnVuY1NhdmUoXCJhZGRGdW5jRm9ybVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbX3ZtLl92KFwi56GuIOWumlwiKV1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApXG4gICAgICAgIF0sXG4gICAgICAgIDFcbiAgICAgICksXG4gICAgICBfYyhcbiAgICAgICAgXCJlbC1kaWFsb2dcIixcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7IG5hbWU6IFwiZGlhbG9nRHJhZ1wiLCByYXdOYW1lOiBcInYtZGlhbG9nRHJhZ1wiIH1dLFxuICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICB0aXRsZTogXCLkv67mlLnlip/og71cIixcbiAgICAgICAgICAgIGNlbnRlcjogXCJcIixcbiAgICAgICAgICAgIHZpc2libGU6IF92bS5lZGl0RnVuY0Zvcm1WaXNpYmxlLFxuICAgICAgICAgICAgd2lkdGg6IFwiNTAwcHhcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgb246IHtcbiAgICAgICAgICAgIFwidXBkYXRlOnZpc2libGVcIjogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICAgIF92bS5lZGl0RnVuY0Zvcm1WaXNpYmxlID0gJGV2ZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgX2MoXG4gICAgICAgICAgICBcImVsLWZvcm1cIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcmVmOiBcImVkaXRGdW5jRm9ybVwiLFxuICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogX3ZtLmVkaXRGdW5jRm9ybSxcbiAgICAgICAgICAgICAgICBydWxlczogX3ZtLmFkZEZvcm1SdWxlc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuW9kuWxnuiPnOWNlVwiLFxuICAgICAgICAgICAgICAgICAgICBwcm9wOiBcIm1lbnVOYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibGFiZWwtd2lkdGhcIjogX3ZtLmZvcm1MYWJlbFdpZHRoXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBfYyhcImVsLWlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgZGlzYWJsZWQ6IHRydWUsIFwiYXV0by1jb21wbGV0ZVwiOiBcIm9mZlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5lZGl0RnVuY0Zvcm0ubWVudU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmVkaXRGdW5jRm9ybSwgXCJtZW51TmFtZVwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcImVkaXRGdW5jRm9ybS5tZW51TmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtZm9ybS1pdGVtXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwi5Yqf6IO95ZCN56ewXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb3A6IFwiZnVuY3Rpb25OYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibGFiZWwtd2lkdGhcIjogX3ZtLmZvcm1MYWJlbFdpZHRoXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBfYyhcImVsLWlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgXCJhdXRvLWNvbXBsZXRlXCI6IFwib2ZmXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmVkaXRGdW5jRm9ybS5mdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmVkaXRGdW5jRm9ybSwgXCJmdW5jdGlvbk5hbWVcIiwgJCR2KVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJlZGl0RnVuY0Zvcm0uZnVuY3Rpb25OYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJlbC1mb3JtLWl0ZW1cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCLlip/og711cmxcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsYWJlbC13aWR0aFwiOiBfdm0uZm9ybUxhYmVsV2lkdGhcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZWwtaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBcImF1dG8tY29tcGxldGVcIjogXCJvZmZcIiB9LFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uZWRpdEZ1bmNGb3JtLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uZWRpdEZ1bmNGb3JtLCBcInVybFwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcImVkaXRGdW5jRm9ybS51cmxcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuivt+axguaWueazlVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxhYmVsLXdpZHRoXCI6IF92bS5mb3JtTGFiZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgIFwiZWwtc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJodHRwTWV0aG9kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogXCLmmK/lkKbmnInkuIvnuqfoj5zljZVcIlxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uZWRpdEZ1bmNGb3JtLmh0dHBNZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kc2V0KF92bS5lZGl0RnVuY0Zvcm0sIFwiaHR0cE1ldGhvZFwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJlZGl0RnVuY0Zvcm0uaHR0cE1ldGhvZFwiXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBfdm0uX2woX3ZtLmh0dHBNZXRob2RPcHRpb25zLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKFwiZWwtb3B0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IGxhYmVsOiBpdGVtLmxhYmVsLCB2YWx1ZTogaXRlbS52YWx1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJlbC1mb3JtLWl0ZW1cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCLlip/og73nvJblj7dcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJmdW5jdGlvbkNvZGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsYWJlbC13aWR0aFwiOiBfdm0uZm9ybUxhYmVsV2lkdGhcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZWwtaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBkaXNhYmxlZDogdHJ1ZSwgXCJhdXRvLWNvbXBsZXRlXCI6IFwib2ZmXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmVkaXRGdW5jRm9ybS5mdW5jdGlvbkNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmVkaXRGdW5jRm9ybSwgXCJmdW5jdGlvbkNvZGVcIiwgJCR2KVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJlZGl0RnVuY0Zvcm0uZnVuY3Rpb25Db2RlXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApLFxuICAgICAgICAgIF9jKFxuICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwiZGlhbG9nLWZvb3RlclwiLFxuICAgICAgICAgICAgICBhdHRyczogeyBzbG90OiBcImZvb3RlclwiIH0sXG4gICAgICAgICAgICAgIHNsb3Q6IFwiZm9vdGVyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgIF92bS5lZGl0RnVuY0Zvcm1WaXNpYmxlID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW192bS5fdihcIuWPliDmtohcIildXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgbG9hZGluZzogX3ZtLnNhdmVMb2FkaW5nLCB0eXBlOiBcInByaW1hcnlcIiB9LFxuICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uZWRpdEZ1bmNTYXZlKFwiZWRpdEZ1bmNGb3JtVmlzaWJsZVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbX3ZtLl92KFwi56GuIOWumlwiKV1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApXG4gICAgICAgIF0sXG4gICAgICAgIDFcbiAgICAgICksXG4gICAgICBfYyhcbiAgICAgICAgXCJlbC1kaWFsb2dcIixcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7IG5hbWU6IFwiZGlhbG9nRHJhZ1wiLCByYXdOYW1lOiBcInYtZGlhbG9nRHJhZ1wiIH1dLFxuICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICB0aXRsZTogXCLmlrDlop7oj5zljZVcIixcbiAgICAgICAgICAgIGNlbnRlcjogXCJcIixcbiAgICAgICAgICAgIHZpc2libGU6IF92bS5hZGRGb3JtVmlzaWJsZSxcbiAgICAgICAgICAgIHdpZHRoOiBcIjUwMHB4XCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICBcInVwZGF0ZTp2aXNpYmxlXCI6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgICBfdm0uYWRkRm9ybVZpc2libGUgPSAkZXZlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFtcbiAgICAgICAgICBfYyhcbiAgICAgICAgICAgIFwiZWwtZm9ybVwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByZWY6IFwiYWRkRm9ybVwiLFxuICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogX3ZtLmFkZEZvcm0sXG4gICAgICAgICAgICAgICAgcnVsZXM6IF92bS5hZGRGb3JtUnVsZXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJlbC1mb3JtLWl0ZW1cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCLoj5zljZXlkI3np7BcIixcbiAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJtZW51TmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImxhYmVsLXdpZHRoXCI6IF92bS5mb3JtTGFiZWxXaWR0aFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgX2MoXCJlbC1pbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IFwiYXV0by1jb21wbGV0ZVwiOiBcIm9mZlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5hZGRGb3JtLm1lbnVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigkJHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kc2V0KF92bS5hZGRGb3JtLCBcIm1lbnVOYW1lXCIsICQkdilcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiYWRkRm9ybS5tZW51TmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtZm9ybS1pdGVtXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwi6I+c5Y2V57yW5Y+3XCIsXG4gICAgICAgICAgICAgICAgICAgIHByb3A6IFwibWVudUNvZGVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsYWJlbC13aWR0aFwiOiBfdm0uZm9ybUxhYmVsV2lkdGhcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZWwtaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBcImF1dG8tY29tcGxldGVcIjogXCJvZmZcIiB9LFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uYWRkRm9ybS5tZW51Q29kZSxcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uYWRkRm9ybSwgXCJtZW51Q29kZVwiLCAkJHYpXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcImFkZEZvcm0ubWVudUNvZGVcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHsgYXR0cnM6IHsgbGFiZWw6IFwi5piv5ZCm5pyJ5LiL57qn6I+c5Y2VXCIgfSB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZWwtc3dpdGNoXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZS12YWx1ZVwiOiBcIlRSVUVcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImluYWN0aXZlLXZhbHVlXCI6IFwiRkFMU0VcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZS10ZXh0XCI6IFwi5pivXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJpbmFjdGl2ZS10ZXh0XCI6IFwi5ZCmXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFkZEZvcm0uaXNQYXJlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmFkZEZvcm0sIFwiaXNQYXJlbnRcIiwgJCR2KVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJhZGRGb3JtLmlzUGFyZW50XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgKF92bS5hZGRGb3JtLmlzUGFyZW50ID09IFwiVFJVRVwiXG4gICAgICAgICAgICAgID8gZmFsc2VcbiAgICAgICAgICAgICAgOiB0cnVlKVxuICAgICAgICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgICAgICAgIFwiZWwtZm9ybS1pdGVtXCIsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwi6I+c5Y2VdXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbC13aWR0aFwiOiBfdm0uZm9ybUxhYmVsV2lkdGhcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICBfYyhcImVsLWlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IFwiYXV0by1jb21wbGV0ZVwiOiBcIm9mZlwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmFkZEZvcm0udXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmFkZEZvcm0sIFwidXJsXCIsICQkdilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJhZGRGb3JtLnVybFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogX3ZtLl9lKClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfYyhcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImRpYWxvZy1mb290ZXJcIixcbiAgICAgICAgICAgICAgYXR0cnM6IHsgc2xvdDogXCJmb290ZXJcIiB9LFxuICAgICAgICAgICAgICBzbG90OiBcImZvb3RlclwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdm0uYWRkRm9ybVZpc2libGUgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbX3ZtLl92KFwi5Y+WIOa2iFwiKV1cbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgXCJlbC1idXR0b25cIixcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhdHRyczogeyBsb2FkaW5nOiBfdm0uc2F2ZUxvYWRpbmcsIHR5cGU6IFwicHJpbWFyeVwiIH0sXG4gICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5hZGRTYXZlKFwiYWRkRm9ybVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbX3ZtLl92KFwi56GuIOWumlwiKV1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApXG4gICAgICAgIF0sXG4gICAgICAgIDFcbiAgICAgICksXG4gICAgICBfYyhcbiAgICAgICAgXCJlbC1kaWFsb2dcIixcbiAgICAgICAge1xuICAgICAgICAgIGRpcmVjdGl2ZXM6IFt7IG5hbWU6IFwiZGlhbG9nRHJhZ1wiLCByYXdOYW1lOiBcInYtZGlhbG9nRHJhZ1wiIH1dLFxuICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICB0aXRsZTogXCLkv67mlLnoj5zljZVcIixcbiAgICAgICAgICAgIGNlbnRlcjogXCJcIixcbiAgICAgICAgICAgIHZpc2libGU6IF92bS5lZGl0Rm9ybVZpc2libGUsXG4gICAgICAgICAgICB3aWR0aDogXCI1MDBweFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgXCJ1cGRhdGU6dmlzaWJsZVwiOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAgX3ZtLmVkaXRGb3JtVmlzaWJsZSA9ICRldmVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW1xuICAgICAgICAgIF9jKFxuICAgICAgICAgICAgXCJlbC1mb3JtXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJlZjogXCJlZGl0Rm9ybVwiLFxuICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgIHNpemU6IFwic21hbGxcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogX3ZtLmVkaXRGb3JtLFxuICAgICAgICAgICAgICAgIHJ1bGVzOiBfdm0uYWRkRm9ybVJ1bGVzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtZm9ybS1pdGVtXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwi6I+c5Y2V5ZCN56ewXCIsXG4gICAgICAgICAgICAgICAgICAgIHByb3A6IFwibWVudU5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsYWJlbC13aWR0aFwiOiBfdm0uZm9ybUxhYmVsV2lkdGhcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFwiZWwtaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBcImF1dG8tY29tcGxldGVcIjogXCJvZmZcIiB9LFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uZWRpdEZvcm0ubWVudU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiRzZXQoX3ZtLmVkaXRGb3JtLCBcIm1lbnVOYW1lXCIsICQkdilcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiZWRpdEZvcm0ubWVudU5hbWVcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuiPnOWNlee8luWPt1wiLFxuICAgICAgICAgICAgICAgICAgICBwcm9wOiBcIm1lbnVDb2RlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibGFiZWwtd2lkdGhcIjogX3ZtLmZvcm1MYWJlbFdpZHRoXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBfYyhcImVsLWlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgZGlzYWJsZWQ6IHRydWUsIFwiYXV0by1jb21wbGV0ZVwiOiBcIm9mZlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5lZGl0Rm9ybS5tZW51Q29kZSxcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oJCR2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uZWRpdEZvcm0sIFwibWVudUNvZGVcIiwgJCR2KVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJlZGl0Rm9ybS5tZW51Q29kZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICFfdm0uZWRpdEZvcm0uaXNQYXJlbnRcbiAgICAgICAgICAgICAgICA/IF9jKFxuICAgICAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBcIuiPnOWNlXVybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGFiZWwtd2lkdGhcIjogX3ZtLmZvcm1MYWJlbFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgX2MoXCJlbC1pbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBcImF1dG8tY29tcGxldGVcIjogXCJvZmZcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF92bS5lZGl0Rm9ybS51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigkJHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uZWRpdEZvcm0sIFwidXJsXCIsICQkdilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbjogXCJlZGl0Rm9ybS51cmxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWZvcm0taXRlbVwiLFxuICAgICAgICAgICAgICAgIHsgYXR0cnM6IHsgbGFiZWw6IFwi5piv5ZCm5pyJ5LiL57qn6I+c5Y2VXCIgfSB9LFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICBcImVsLXNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDogXCJpc1BhcmVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi5piv5ZCm5pyJ5LiL57qn6I+c5Y2VXCJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX3ZtLmVkaXRGb3JtLmlzUGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCQkdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uJHNldChfdm0uZWRpdEZvcm0sIFwiaXNQYXJlbnRcIiwgJCR2KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwiZWRpdEZvcm0uaXNQYXJlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgX3ZtLl9sKF92bS5lZGl0T3B0aW9uc1Jlc3VsdCwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYyhcImVsLW9wdGlvblwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyczogeyBsYWJlbDogaXRlbS5sYWJlbCwgdmFsdWU6IGl0ZW0udmFsdWUgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAxXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfYyhcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImRpYWxvZy1mb290ZXJcIixcbiAgICAgICAgICAgICAgYXR0cnM6IHsgc2xvdDogXCJmb290ZXJcIiB9LFxuICAgICAgICAgICAgICBzbG90OiBcImZvb3RlclwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICBcImVsLWJ1dHRvblwiLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBfdm0uZWRpdEZvcm1WaXNpYmxlID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW192bS5fdihcIuWPliDmtohcIildXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgIFwiZWwtYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXR0cnM6IHsgbG9hZGluZzogX3ZtLnNhdmVMb2FkaW5nLCB0eXBlOiBcInByaW1hcnlcIiB9LFxuICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uZWRpdFNhdmUoXCJlZGl0Rm9ybVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbX3ZtLl92KFwi56GuIOWumlwiKV1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgICApXG4gICAgICAgIF0sXG4gICAgICAgIDFcbiAgICAgIClcbiAgICBdLFxuICAgIDFcbiAgKVxufVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtcbiAgZnVuY3Rpb24oKSB7XG4gICAgdmFyIF92bSA9IHRoaXNcbiAgICB2YXIgX2ggPSBfdm0uJGNyZWF0ZUVsZW1lbnRcbiAgICB2YXIgX2MgPSBfdm0uX3NlbGYuX2MgfHwgX2hcbiAgICByZXR1cm4gX2MoXCJkaXZcIiwgeyBzdGF0aWNDbGFzczogXCJ0cmVlLWJveFwiIH0sIFtcbiAgICAgIF9jKFwiZGl2XCIsIHsgc3RhdGljQ2xhc3M6IFwielRyZWVEZW1vQmFja2dyb3VuZCBsZWZ0XCIgfSwgW1xuICAgICAgICBfYyhcInVsXCIsIHsgc3RhdGljQ2xhc3M6IFwienRyZWVcIiwgYXR0cnM6IHsgaWQ6IFwicm9vdFRyZWVOZW51XCIgfSB9KVxuICAgICAgXSlcbiAgICBdKVxuICB9XG5dXG5yZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWVcblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"5354fe5c-vue-loader-template\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&\n");

/***/ }),

/***/ "./src/common/zTree/js/jquery.ztree.all.js":
/*!*************************************************!*\
  !*** ./src/common/zTree/js/jquery.ztree.all.js ***!
  \*************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(jQuery) {/* harmony import */ var core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.array.find */ \"./node_modules/core-js/modules/es6.array.find.js\");\n/* harmony import */ var core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.regexp.replace */ \"./node_modules/core-js/modules/es6.regexp.replace.js\");\n/* harmony import */ var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es6.regexp.split */ \"./node_modules/core-js/modules/es6.regexp.split.js\");\n/* harmony import */ var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es6.regexp.to-string */ \"./node_modules/core-js/modules/es6.regexp.to-string.js\");\n/* harmony import */ var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _Users_apple_WORK_SPACE_20190724user_serve_perge_user_server_page_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node_modules/@babel/runtime-corejs2/helpers/esm/typeof */ \"./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js\");\n/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es6.function.name */ \"./node_modules/core-js/modules/es6.function.name.js\");\n/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\n/*\n * JQuery zTree core v3.5.29\n * http://treejs.cn/\n *\n * Copyright (c) 2010 Hunter.z\n *\n * Licensed same as jquery - MIT License\n * http://www.opensource.org/licenses/mit-license.php\n *\n * email: hunter.z@263.net\n * Date: 2017-06-19\n */\n(function (_$) {\n  var settings = {},\n      roots = {},\n      caches = {},\n      //default consts of core\n  _consts = {\n    className: {\n      BUTTON: \"button\",\n      LEVEL: \"level\",\n      ICO_LOADING: \"ico_loading\",\n      SWITCH: \"switch\",\n      NAME: 'node_name'\n    },\n    event: {\n      NODECREATED: \"ztree_nodeCreated\",\n      CLICK: \"ztree_click\",\n      EXPAND: \"ztree_expand\",\n      COLLAPSE: \"ztree_collapse\",\n      ASYNC_SUCCESS: \"ztree_async_success\",\n      ASYNC_ERROR: \"ztree_async_error\",\n      REMOVE: \"ztree_remove\",\n      SELECTED: \"ztree_selected\",\n      UNSELECTED: \"ztree_unselected\"\n    },\n    id: {\n      A: \"_a\",\n      ICON: \"_ico\",\n      SPAN: \"_span\",\n      SWITCH: \"_switch\",\n      UL: \"_ul\"\n    },\n    line: {\n      ROOT: \"root\",\n      ROOTS: \"roots\",\n      CENTER: \"center\",\n      BOTTOM: \"bottom\",\n      NOLINE: \"noline\",\n      LINE: \"line\"\n    },\n    folder: {\n      OPEN: \"open\",\n      CLOSE: \"close\",\n      DOCU: \"docu\"\n    },\n    node: {\n      CURSELECTED: \"curSelectedNode\"\n    }\n  },\n      //default setting of core\n  _setting = {\n    treeId: \"\",\n    treeObj: null,\n    view: {\n      addDiyDom: null,\n      autoCancelSelected: true,\n      dblClickExpand: true,\n      expandSpeed: \"fast\",\n      fontCss: {},\n      nameIsHTML: false,\n      selectedMulti: true,\n      showIcon: true,\n      showLine: true,\n      showTitle: true,\n      txtSelectedEnable: false\n    },\n    data: {\n      key: {\n        children: \"children\",\n        name: \"name\",\n        title: \"\",\n        url: \"url\",\n        icon: \"icon\"\n      },\n      simpleData: {\n        enable: false,\n        idKey: \"id\",\n        pIdKey: \"pId\",\n        rootPId: null\n      },\n      keep: {\n        parent: false,\n        leaf: false\n      }\n    },\n    async: {\n      enable: false,\n      contentType: \"application/x-www-form-urlencoded\",\n      type: \"post\",\n      dataType: \"text\",\n      url: \"\",\n      autoParam: [],\n      otherParam: [],\n      dataFilter: null\n    },\n    callback: {\n      beforeAsync: null,\n      beforeClick: null,\n      beforeDblClick: null,\n      beforeRightClick: null,\n      beforeMouseDown: null,\n      beforeMouseUp: null,\n      beforeExpand: null,\n      beforeCollapse: null,\n      beforeRemove: null,\n      onAsyncError: null,\n      onAsyncSuccess: null,\n      onNodeCreated: null,\n      onClick: null,\n      onDblClick: null,\n      onRightClick: null,\n      onMouseDown: null,\n      onMouseUp: null,\n      onExpand: null,\n      onCollapse: null,\n      onRemove: null\n    }\n  },\n      //default root of core\n  //zTree use root to save full data\n  _initRoot = function _initRoot(setting) {\n    var r = data.getRoot(setting);\n\n    if (!r) {\n      r = {};\n      data.setRoot(setting, r);\n    }\n\n    r[setting.data.key.children] = [];\n    r.expandTriggerFlag = false;\n    r.curSelectedList = [];\n    r.noSelection = true;\n    r.createdNodes = [];\n    r.zId = 0;\n    r._ver = new Date().getTime();\n  },\n      //default cache of core\n  _initCache = function _initCache(setting) {\n    var c = data.getCache(setting);\n\n    if (!c) {\n      c = {};\n      data.setCache(setting, c);\n    }\n\n    c.nodes = [];\n    c.doms = [];\n  },\n      //default bindEvent of core\n  _bindEvent = function _bindEvent(setting) {\n    var o = setting.treeObj,\n        c = consts.event;\n    o.bind(c.NODECREATED, function (event, treeId, node) {\n      tools.apply(setting.callback.onNodeCreated, [event, treeId, node]);\n    });\n    o.bind(c.CLICK, function (event, srcEvent, treeId, node, clickFlag) {\n      tools.apply(setting.callback.onClick, [srcEvent, treeId, node, clickFlag]);\n    });\n    o.bind(c.EXPAND, function (event, treeId, node) {\n      tools.apply(setting.callback.onExpand, [event, treeId, node]);\n    });\n    o.bind(c.COLLAPSE, function (event, treeId, node) {\n      tools.apply(setting.callback.onCollapse, [event, treeId, node]);\n    });\n    o.bind(c.ASYNC_SUCCESS, function (event, treeId, node, msg) {\n      tools.apply(setting.callback.onAsyncSuccess, [event, treeId, node, msg]);\n    });\n    o.bind(c.ASYNC_ERROR, function (event, treeId, node, XMLHttpRequest, textStatus, errorThrown) {\n      tools.apply(setting.callback.onAsyncError, [event, treeId, node, XMLHttpRequest, textStatus, errorThrown]);\n    });\n    o.bind(c.REMOVE, function (event, treeId, treeNode) {\n      tools.apply(setting.callback.onRemove, [event, treeId, treeNode]);\n    });\n    o.bind(c.SELECTED, function (event, treeId, node) {\n      tools.apply(setting.callback.onSelected, [treeId, node]);\n    });\n    o.bind(c.UNSELECTED, function (event, treeId, node) {\n      tools.apply(setting.callback.onUnSelected, [treeId, node]);\n    });\n  },\n      _unbindEvent = function _unbindEvent(setting) {\n    var o = setting.treeObj,\n        c = consts.event;\n    o.unbind(c.NODECREATED).unbind(c.CLICK).unbind(c.EXPAND).unbind(c.COLLAPSE).unbind(c.ASYNC_SUCCESS).unbind(c.ASYNC_ERROR).unbind(c.REMOVE).unbind(c.SELECTED).unbind(c.UNSELECTED);\n  },\n      //default event proxy of core\n  _eventProxy = function _eventProxy(event) {\n    var target = event.target,\n        setting = data.getSetting(event.data.treeId),\n        tId = \"\",\n        node = null,\n        nodeEventType = \"\",\n        treeEventType = \"\",\n        nodeEventCallback = null,\n        treeEventCallback = null,\n        tmp = null;\n\n    if (tools.eqs(event.type, \"mousedown\")) {\n      treeEventType = \"mousedown\";\n    } else if (tools.eqs(event.type, \"mouseup\")) {\n      treeEventType = \"mouseup\";\n    } else if (tools.eqs(event.type, \"contextmenu\")) {\n      treeEventType = \"contextmenu\";\n    } else if (tools.eqs(event.type, \"click\")) {\n      if (tools.eqs(target.tagName, \"span\") && target.getAttribute(\"treeNode\" + consts.id.SWITCH) !== null) {\n        tId = tools.getNodeMainDom(target).id;\n        nodeEventType = \"switchNode\";\n      } else {\n        tmp = tools.getMDom(setting, target, [{\n          tagName: \"a\",\n          attrName: \"treeNode\" + consts.id.A\n        }]);\n\n        if (tmp) {\n          tId = tools.getNodeMainDom(tmp).id;\n          nodeEventType = \"clickNode\";\n        }\n      }\n    } else if (tools.eqs(event.type, \"dblclick\")) {\n      treeEventType = \"dblclick\";\n      tmp = tools.getMDom(setting, target, [{\n        tagName: \"a\",\n        attrName: \"treeNode\" + consts.id.A\n      }]);\n\n      if (tmp) {\n        tId = tools.getNodeMainDom(tmp).id;\n        nodeEventType = \"switchNode\";\n      }\n    }\n\n    if (treeEventType.length > 0 && tId.length == 0) {\n      tmp = tools.getMDom(setting, target, [{\n        tagName: \"a\",\n        attrName: \"treeNode\" + consts.id.A\n      }]);\n\n      if (tmp) {\n        tId = tools.getNodeMainDom(tmp).id;\n      }\n    } // event to node\n\n\n    if (tId.length > 0) {\n      node = data.getNodeCache(setting, tId);\n\n      switch (nodeEventType) {\n        case \"switchNode\":\n          if (!node.isParent) {\n            nodeEventType = \"\";\n          } else if (tools.eqs(event.type, \"click\") || tools.eqs(event.type, \"dblclick\") && tools.apply(setting.view.dblClickExpand, [setting.treeId, node], setting.view.dblClickExpand)) {\n            nodeEventCallback = handler.onSwitchNode;\n          } else {\n            nodeEventType = \"\";\n          }\n\n          break;\n\n        case \"clickNode\":\n          nodeEventCallback = handler.onClickNode;\n          break;\n      }\n    } // event to zTree\n\n\n    switch (treeEventType) {\n      case \"mousedown\":\n        treeEventCallback = handler.onZTreeMousedown;\n        break;\n\n      case \"mouseup\":\n        treeEventCallback = handler.onZTreeMouseup;\n        break;\n\n      case \"dblclick\":\n        treeEventCallback = handler.onZTreeDblclick;\n        break;\n\n      case \"contextmenu\":\n        treeEventCallback = handler.onZTreeContextmenu;\n        break;\n    }\n\n    var proxyResult = {\n      stop: false,\n      node: node,\n      nodeEventType: nodeEventType,\n      nodeEventCallback: nodeEventCallback,\n      treeEventType: treeEventType,\n      treeEventCallback: treeEventCallback\n    };\n    return proxyResult;\n  },\n      //default init node of core\n  _initNode = function _initNode(setting, level, n, parentNode, isFirstNode, isLastNode, openFlag) {\n    if (!n) return;\n    var r = data.getRoot(setting),\n        childKey = setting.data.key.children;\n    n.level = level;\n    n.tId = setting.treeId + \"_\" + ++r.zId;\n    n.parentTId = parentNode ? parentNode.tId : null;\n    n.open = typeof n.open == \"string\" ? tools.eqs(n.open, \"true\") : !!n.open;\n\n    if (n[childKey] && n[childKey].length > 0) {\n      n.isParent = true;\n      n.zAsync = true;\n    } else {\n      n.isParent = typeof n.isParent == \"string\" ? tools.eqs(n.isParent, \"true\") : !!n.isParent;\n      n.open = n.isParent && !setting.async.enable ? n.open : false;\n      n.zAsync = !n.isParent;\n    }\n\n    n.isFirstNode = isFirstNode;\n    n.isLastNode = isLastNode;\n\n    n.getParentNode = function () {\n      return data.getNodeCache(setting, n.parentTId);\n    };\n\n    n.getPreNode = function () {\n      return data.getPreNode(setting, n);\n    };\n\n    n.getNextNode = function () {\n      return data.getNextNode(setting, n);\n    };\n\n    n.getIndex = function () {\n      return data.getNodeIndex(setting, n);\n    };\n\n    n.getPath = function () {\n      return data.getNodePath(setting, n);\n    };\n\n    n.isAjaxing = false;\n    data.fixPIdKeyValue(setting, n);\n  },\n      _init = {\n    bind: [_bindEvent],\n    unbind: [_unbindEvent],\n    caches: [_initCache],\n    nodes: [_initNode],\n    proxys: [_eventProxy],\n    roots: [_initRoot],\n    beforeA: [],\n    afterA: [],\n    innerBeforeA: [],\n    innerAfterA: [],\n    zTreeTools: []\n  },\n      //method of operate data\n  data = {\n    addNodeCache: function addNodeCache(setting, node) {\n      data.getCache(setting).nodes[data.getNodeCacheId(node.tId)] = node;\n    },\n    getNodeCacheId: function getNodeCacheId(tId) {\n      return tId.substring(tId.lastIndexOf(\"_\") + 1);\n    },\n    addAfterA: function addAfterA(afterA) {\n      _init.afterA.push(afterA);\n    },\n    addBeforeA: function addBeforeA(beforeA) {\n      _init.beforeA.push(beforeA);\n    },\n    addInnerAfterA: function addInnerAfterA(innerAfterA) {\n      _init.innerAfterA.push(innerAfterA);\n    },\n    addInnerBeforeA: function addInnerBeforeA(innerBeforeA) {\n      _init.innerBeforeA.push(innerBeforeA);\n    },\n    addInitBind: function addInitBind(bindEvent) {\n      _init.bind.push(bindEvent);\n    },\n    addInitUnBind: function addInitUnBind(unbindEvent) {\n      _init.unbind.push(unbindEvent);\n    },\n    addInitCache: function addInitCache(initCache) {\n      _init.caches.push(initCache);\n    },\n    addInitNode: function addInitNode(initNode) {\n      _init.nodes.push(initNode);\n    },\n    addInitProxy: function addInitProxy(initProxy, isFirst) {\n      if (!!isFirst) {\n        _init.proxys.splice(0, 0, initProxy);\n      } else {\n        _init.proxys.push(initProxy);\n      }\n    },\n    addInitRoot: function addInitRoot(initRoot) {\n      _init.roots.push(initRoot);\n    },\n    addNodesData: function addNodesData(setting, parentNode, index, nodes) {\n      var childKey = setting.data.key.children,\n          params;\n\n      if (!parentNode[childKey]) {\n        parentNode[childKey] = [];\n        index = -1;\n      } else if (index >= parentNode[childKey].length) {\n        index = -1;\n      }\n\n      if (parentNode[childKey].length > 0 && index === 0) {\n        parentNode[childKey][0].isFirstNode = false;\n        view.setNodeLineIcos(setting, parentNode[childKey][0]);\n      } else if (parentNode[childKey].length > 0 && index < 0) {\n        parentNode[childKey][parentNode[childKey].length - 1].isLastNode = false;\n        view.setNodeLineIcos(setting, parentNode[childKey][parentNode[childKey].length - 1]);\n      }\n\n      parentNode.isParent = true;\n\n      if (index < 0) {\n        parentNode[childKey] = parentNode[childKey].concat(nodes);\n      } else {\n        params = [index, 0].concat(nodes);\n        parentNode[childKey].splice.apply(parentNode[childKey], params);\n      }\n    },\n    addSelectedNode: function addSelectedNode(setting, node) {\n      var root = data.getRoot(setting);\n\n      if (!data.isSelectedNode(setting, node)) {\n        root.curSelectedList.push(node);\n      }\n    },\n    addCreatedNode: function addCreatedNode(setting, node) {\n      if (!!setting.callback.onNodeCreated || !!setting.view.addDiyDom) {\n        var root = data.getRoot(setting);\n        root.createdNodes.push(node);\n      }\n    },\n    addZTreeTools: function addZTreeTools(zTreeTools) {\n      _init.zTreeTools.push(zTreeTools);\n    },\n    exSetting: function exSetting(s) {\n      _$.extend(true, _setting, s);\n    },\n    fixPIdKeyValue: function fixPIdKeyValue(setting, node) {\n      if (setting.data.simpleData.enable) {\n        node[setting.data.simpleData.pIdKey] = node.parentTId ? node.getParentNode()[setting.data.simpleData.idKey] : setting.data.simpleData.rootPId;\n      }\n    },\n    getAfterA: function getAfterA(setting, node, array) {\n      for (var i = 0, j = _init.afterA.length; i < j; i++) {\n        _init.afterA[i].apply(this, arguments);\n      }\n    },\n    getBeforeA: function getBeforeA(setting, node, array) {\n      for (var i = 0, j = _init.beforeA.length; i < j; i++) {\n        _init.beforeA[i].apply(this, arguments);\n      }\n    },\n    getInnerAfterA: function getInnerAfterA(setting, node, array) {\n      for (var i = 0, j = _init.innerAfterA.length; i < j; i++) {\n        _init.innerAfterA[i].apply(this, arguments);\n      }\n    },\n    getInnerBeforeA: function getInnerBeforeA(setting, node, array) {\n      for (var i = 0, j = _init.innerBeforeA.length; i < j; i++) {\n        _init.innerBeforeA[i].apply(this, arguments);\n      }\n    },\n    getCache: function getCache(setting) {\n      return caches[setting.treeId];\n    },\n    getNodeIndex: function getNodeIndex(setting, node) {\n      if (!node) return null;\n      var childKey = setting.data.key.children,\n          p = node.parentTId ? node.getParentNode() : data.getRoot(setting);\n\n      for (var i = 0, l = p[childKey].length - 1; i <= l; i++) {\n        if (p[childKey][i] === node) {\n          return i;\n        }\n      }\n\n      return -1;\n    },\n    getNextNode: function getNextNode(setting, node) {\n      if (!node) return null;\n      var childKey = setting.data.key.children,\n          p = node.parentTId ? node.getParentNode() : data.getRoot(setting);\n\n      for (var i = 0, l = p[childKey].length - 1; i <= l; i++) {\n        if (p[childKey][i] === node) {\n          return i == l ? null : p[childKey][i + 1];\n        }\n      }\n\n      return null;\n    },\n    getNodeByParam: function getNodeByParam(setting, nodes, key, value) {\n      if (!nodes || !key) return null;\n      var childKey = setting.data.key.children;\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        if (nodes[i][key] == value) {\n          return nodes[i];\n        }\n\n        var tmp = data.getNodeByParam(setting, nodes[i][childKey], key, value);\n        if (tmp) return tmp;\n      }\n\n      return null;\n    },\n    getNodeCache: function getNodeCache(setting, tId) {\n      if (!tId) return null;\n      var n = caches[setting.treeId].nodes[data.getNodeCacheId(tId)];\n      return n ? n : null;\n    },\n    getNodeName: function getNodeName(setting, node) {\n      var nameKey = setting.data.key.name;\n      return \"\" + node[nameKey];\n    },\n    getNodePath: function getNodePath(setting, node) {\n      if (!node) return null;\n      var path;\n\n      if (node.parentTId) {\n        path = node.getParentNode().getPath();\n      } else {\n        path = [];\n      }\n\n      if (path) {\n        path.push(node);\n      }\n\n      return path;\n    },\n    getNodeTitle: function getNodeTitle(setting, node) {\n      var t = setting.data.key.title === \"\" ? setting.data.key.name : setting.data.key.title;\n      return \"\" + node[t];\n    },\n    getNodes: function getNodes(setting) {\n      return data.getRoot(setting)[setting.data.key.children];\n    },\n    getNodesByParam: function getNodesByParam(setting, nodes, key, value) {\n      if (!nodes || !key) return [];\n      var childKey = setting.data.key.children,\n          result = [];\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        if (nodes[i][key] == value) {\n          result.push(nodes[i]);\n        }\n\n        result = result.concat(data.getNodesByParam(setting, nodes[i][childKey], key, value));\n      }\n\n      return result;\n    },\n    getNodesByParamFuzzy: function getNodesByParamFuzzy(setting, nodes, key, value) {\n      if (!nodes || !key) return [];\n      var childKey = setting.data.key.children,\n          result = [];\n      value = value.toLowerCase();\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        if (typeof nodes[i][key] == \"string\" && nodes[i][key].toLowerCase().indexOf(value) > -1) {\n          result.push(nodes[i]);\n        }\n\n        result = result.concat(data.getNodesByParamFuzzy(setting, nodes[i][childKey], key, value));\n      }\n\n      return result;\n    },\n    getNodesByFilter: function getNodesByFilter(setting, nodes, filter, isSingle, invokeParam) {\n      if (!nodes) return isSingle ? null : [];\n      var childKey = setting.data.key.children,\n          result = isSingle ? null : [];\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        if (tools.apply(filter, [nodes[i], invokeParam], false)) {\n          if (isSingle) {\n            return nodes[i];\n          }\n\n          result.push(nodes[i]);\n        }\n\n        var tmpResult = data.getNodesByFilter(setting, nodes[i][childKey], filter, isSingle, invokeParam);\n\n        if (isSingle && !!tmpResult) {\n          return tmpResult;\n        }\n\n        result = isSingle ? tmpResult : result.concat(tmpResult);\n      }\n\n      return result;\n    },\n    getPreNode: function getPreNode(setting, node) {\n      if (!node) return null;\n      var childKey = setting.data.key.children,\n          p = node.parentTId ? node.getParentNode() : data.getRoot(setting);\n\n      for (var i = 0, l = p[childKey].length; i < l; i++) {\n        if (p[childKey][i] === node) {\n          return i == 0 ? null : p[childKey][i - 1];\n        }\n      }\n\n      return null;\n    },\n    getRoot: function getRoot(setting) {\n      return setting ? roots[setting.treeId] : null;\n    },\n    getRoots: function getRoots() {\n      return roots;\n    },\n    getSetting: function getSetting(treeId) {\n      return settings[treeId];\n    },\n    getSettings: function getSettings() {\n      return settings;\n    },\n    getZTreeTools: function getZTreeTools(treeId) {\n      var r = this.getRoot(this.getSetting(treeId));\n      return r ? r.treeTools : null;\n    },\n    initCache: function initCache(setting) {\n      for (var i = 0, j = _init.caches.length; i < j; i++) {\n        _init.caches[i].apply(this, arguments);\n      }\n    },\n    initNode: function initNode(setting, level, node, parentNode, preNode, nextNode) {\n      for (var i = 0, j = _init.nodes.length; i < j; i++) {\n        _init.nodes[i].apply(this, arguments);\n      }\n    },\n    initRoot: function initRoot(setting) {\n      for (var i = 0, j = _init.roots.length; i < j; i++) {\n        _init.roots[i].apply(this, arguments);\n      }\n    },\n    isSelectedNode: function isSelectedNode(setting, node) {\n      var root = data.getRoot(setting);\n\n      for (var i = 0, j = root.curSelectedList.length; i < j; i++) {\n        if (node === root.curSelectedList[i]) return true;\n      }\n\n      return false;\n    },\n    removeNodeCache: function removeNodeCache(setting, node) {\n      var childKey = setting.data.key.children;\n\n      if (node[childKey]) {\n        for (var i = 0, l = node[childKey].length; i < l; i++) {\n          data.removeNodeCache(setting, node[childKey][i]);\n        }\n      }\n\n      data.getCache(setting).nodes[data.getNodeCacheId(node.tId)] = null;\n    },\n    removeSelectedNode: function removeSelectedNode(setting, node) {\n      var root = data.getRoot(setting);\n\n      for (var i = 0, j = root.curSelectedList.length; i < j; i++) {\n        if (node === root.curSelectedList[i] || !data.getNodeCache(setting, root.curSelectedList[i].tId)) {\n          root.curSelectedList.splice(i, 1);\n          setting.treeObj.trigger(consts.event.UNSELECTED, [setting.treeId, node]);\n          i--;\n          j--;\n        }\n      }\n    },\n    setCache: function setCache(setting, cache) {\n      caches[setting.treeId] = cache;\n    },\n    setRoot: function setRoot(setting, root) {\n      roots[setting.treeId] = root;\n    },\n    setZTreeTools: function setZTreeTools(setting, zTreeTools) {\n      for (var i = 0, j = _init.zTreeTools.length; i < j; i++) {\n        _init.zTreeTools[i].apply(this, arguments);\n      }\n    },\n    transformToArrayFormat: function transformToArrayFormat(setting, nodes) {\n      if (!nodes) return [];\n      var childKey = setting.data.key.children,\n          r = [];\n\n      if (tools.isArray(nodes)) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          r.push(nodes[i]);\n          if (nodes[i][childKey]) r = r.concat(data.transformToArrayFormat(setting, nodes[i][childKey]));\n        }\n      } else {\n        r.push(nodes);\n        if (nodes[childKey]) r = r.concat(data.transformToArrayFormat(setting, nodes[childKey]));\n      }\n\n      return r;\n    },\n    transformTozTreeFormat: function transformTozTreeFormat(setting, sNodes) {\n      var i,\n          l,\n          key = setting.data.simpleData.idKey,\n          parentKey = setting.data.simpleData.pIdKey,\n          childKey = setting.data.key.children;\n      if (!key || key == \"\" || !sNodes) return [];\n\n      if (tools.isArray(sNodes)) {\n        var r = [];\n        var tmpMap = {};\n\n        for (i = 0, l = sNodes.length; i < l; i++) {\n          tmpMap[sNodes[i][key]] = sNodes[i];\n        }\n\n        for (i = 0, l = sNodes.length; i < l; i++) {\n          if (tmpMap[sNodes[i][parentKey]] && sNodes[i][key] != sNodes[i][parentKey]) {\n            if (!tmpMap[sNodes[i][parentKey]][childKey]) tmpMap[sNodes[i][parentKey]][childKey] = [];\n            tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i]);\n          } else {\n            r.push(sNodes[i]);\n          }\n        }\n\n        return r;\n      } else {\n        return [sNodes];\n      }\n    }\n  },\n      //method of event proxy\n  event = {\n    bindEvent: function bindEvent(setting) {\n      for (var i = 0, j = _init.bind.length; i < j; i++) {\n        _init.bind[i].apply(this, arguments);\n      }\n    },\n    unbindEvent: function unbindEvent(setting) {\n      for (var i = 0, j = _init.unbind.length; i < j; i++) {\n        _init.unbind[i].apply(this, arguments);\n      }\n    },\n    bindTree: function bindTree(setting) {\n      var eventParam = {\n        treeId: setting.treeId\n      },\n          o = setting.treeObj;\n\n      if (!setting.view.txtSelectedEnable) {\n        // for can't select text\n        o.bind('selectstart', handler.onSelectStart).css({\n          \"-moz-user-select\": \"-moz-none\"\n        });\n      }\n\n      o.bind('click', eventParam, event.proxy);\n      o.bind('dblclick', eventParam, event.proxy);\n      o.bind('mouseover', eventParam, event.proxy);\n      o.bind('mouseout', eventParam, event.proxy);\n      o.bind('mousedown', eventParam, event.proxy);\n      o.bind('mouseup', eventParam, event.proxy);\n      o.bind('contextmenu', eventParam, event.proxy);\n    },\n    unbindTree: function unbindTree(setting) {\n      var o = setting.treeObj;\n      o.unbind('selectstart', handler.onSelectStart).unbind('click', event.proxy).unbind('dblclick', event.proxy).unbind('mouseover', event.proxy).unbind('mouseout', event.proxy).unbind('mousedown', event.proxy).unbind('mouseup', event.proxy).unbind('contextmenu', event.proxy);\n    },\n    doProxy: function doProxy(e) {\n      var results = [];\n\n      for (var i = 0, j = _init.proxys.length; i < j; i++) {\n        var proxyResult = _init.proxys[i].apply(this, arguments);\n\n        results.push(proxyResult);\n\n        if (proxyResult.stop) {\n          break;\n        }\n      }\n\n      return results;\n    },\n    proxy: function proxy(e) {\n      var setting = data.getSetting(e.data.treeId);\n      if (!tools.uCanDo(setting, e)) return true;\n      var results = event.doProxy(e),\n          r = true,\n          x = false;\n\n      for (var i = 0, l = results.length; i < l; i++) {\n        var proxyResult = results[i];\n\n        if (proxyResult.nodeEventCallback) {\n          x = true;\n          r = proxyResult.nodeEventCallback.apply(proxyResult, [e, proxyResult.node]) && r;\n        }\n\n        if (proxyResult.treeEventCallback) {\n          x = true;\n          r = proxyResult.treeEventCallback.apply(proxyResult, [e, proxyResult.node]) && r;\n        }\n      }\n\n      return r;\n    }\n  },\n      //method of event handler\n  handler = {\n    onSwitchNode: function onSwitchNode(event, node) {\n      var setting = data.getSetting(event.data.treeId);\n\n      if (node.open) {\n        if (tools.apply(setting.callback.beforeCollapse, [setting.treeId, node], true) == false) return true;\n        data.getRoot(setting).expandTriggerFlag = true;\n        view.switchNode(setting, node);\n      } else {\n        if (tools.apply(setting.callback.beforeExpand, [setting.treeId, node], true) == false) return true;\n        data.getRoot(setting).expandTriggerFlag = true;\n        view.switchNode(setting, node);\n      }\n\n      return true;\n    },\n    onClickNode: function onClickNode(event, node) {\n      var setting = data.getSetting(event.data.treeId),\n          clickFlag = setting.view.autoCancelSelected && (event.ctrlKey || event.metaKey) && data.isSelectedNode(setting, node) ? 0 : setting.view.autoCancelSelected && (event.ctrlKey || event.metaKey) && setting.view.selectedMulti ? 2 : 1;\n      if (tools.apply(setting.callback.beforeClick, [setting.treeId, node, clickFlag], true) == false) return true;\n\n      if (clickFlag === 0) {\n        view.cancelPreSelectedNode(setting, node);\n      } else {\n        view.selectNode(setting, node, clickFlag === 2);\n      }\n\n      setting.treeObj.trigger(consts.event.CLICK, [event, setting.treeId, node, clickFlag]);\n      return true;\n    },\n    onZTreeMousedown: function onZTreeMousedown(event, node) {\n      var setting = data.getSetting(event.data.treeId);\n\n      if (tools.apply(setting.callback.beforeMouseDown, [setting.treeId, node], true)) {\n        tools.apply(setting.callback.onMouseDown, [event, setting.treeId, node]);\n      }\n\n      return true;\n    },\n    onZTreeMouseup: function onZTreeMouseup(event, node) {\n      var setting = data.getSetting(event.data.treeId);\n\n      if (tools.apply(setting.callback.beforeMouseUp, [setting.treeId, node], true)) {\n        tools.apply(setting.callback.onMouseUp, [event, setting.treeId, node]);\n      }\n\n      return true;\n    },\n    onZTreeDblclick: function onZTreeDblclick(event, node) {\n      var setting = data.getSetting(event.data.treeId);\n\n      if (tools.apply(setting.callback.beforeDblClick, [setting.treeId, node], true)) {\n        tools.apply(setting.callback.onDblClick, [event, setting.treeId, node]);\n      }\n\n      return true;\n    },\n    onZTreeContextmenu: function onZTreeContextmenu(event, node) {\n      var setting = data.getSetting(event.data.treeId);\n\n      if (tools.apply(setting.callback.beforeRightClick, [setting.treeId, node], true)) {\n        tools.apply(setting.callback.onRightClick, [event, setting.treeId, node]);\n      }\n\n      return typeof setting.callback.onRightClick != \"function\";\n    },\n    onSelectStart: function onSelectStart(e) {\n      var n = e.originalEvent.srcElement.nodeName.toLowerCase();\n      return n === \"input\" || n === \"textarea\";\n    }\n  },\n      //method of tools for zTree\n  tools = {\n    apply: function apply(fun, param, defaultValue) {\n      if (typeof fun == \"function\") {\n        return fun.apply(zt, param ? param : []);\n      }\n\n      return defaultValue;\n    },\n    canAsync: function canAsync(setting, node) {\n      var childKey = setting.data.key.children;\n      return setting.async.enable && node && node.isParent && !(node.zAsync || node[childKey] && node[childKey].length > 0);\n    },\n    clone: function clone(obj) {\n      if (obj === null) return null;\n      var o = tools.isArray(obj) ? [] : {};\n\n      for (var i in obj) {\n        o[i] = obj[i] instanceof Date ? new Date(obj[i].getTime()) : Object(_Users_apple_WORK_SPACE_20190724user_serve_perge_user_server_page_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(obj[i]) === \"object\" ? tools.clone(obj[i]) : obj[i];\n      }\n\n      return o;\n    },\n    eqs: function eqs(str1, str2) {\n      return str1.toLowerCase() === str2.toLowerCase();\n    },\n    isArray: function isArray(arr) {\n      return Object.prototype.toString.apply(arr) === \"[object Array]\";\n    },\n    isElement: function isElement(o) {\n      return (typeof HTMLElement === \"undefined\" ? \"undefined\" : Object(_Users_apple_WORK_SPACE_20190724user_serve_perge_user_server_page_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(HTMLElement)) === \"object\" ? o instanceof HTMLElement : //DOM2\n      o && Object(_Users_apple_WORK_SPACE_20190724user_serve_perge_user_server_page_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(o) === \"object\" && o !== null && o.nodeType === 1 && typeof o.nodeName === \"string\";\n    },\n    $: function $(node, exp, setting) {\n      if (!!exp && typeof exp != \"string\") {\n        setting = exp;\n        exp = \"\";\n      }\n\n      if (typeof node == \"string\") {\n        return _$(node, setting ? setting.treeObj.get(0).ownerDocument : null);\n      } else {\n        return _$(\"#\" + node.tId + exp, setting ? setting.treeObj : null);\n      }\n    },\n    getMDom: function getMDom(setting, curDom, targetExpr) {\n      if (!curDom) return null;\n\n      while (curDom && curDom.id !== setting.treeId) {\n        for (var i = 0, l = targetExpr.length; curDom.tagName && i < l; i++) {\n          if (tools.eqs(curDom.tagName, targetExpr[i].tagName) && curDom.getAttribute(targetExpr[i].attrName) !== null) {\n            return curDom;\n          }\n        }\n\n        curDom = curDom.parentNode;\n      }\n\n      return null;\n    },\n    getNodeMainDom: function getNodeMainDom(target) {\n      return _$(target).parent(\"li\").get(0) || _$(target).parentsUntil(\"li\").parent().get(0);\n    },\n    isChildOrSelf: function isChildOrSelf(dom, parentId) {\n      return _$(dom).closest(\"#\" + parentId).length > 0;\n    },\n    uCanDo: function uCanDo(setting, e) {\n      return true;\n    }\n  },\n      //method of operate ztree dom\n  view = {\n    addNodes: function addNodes(setting, parentNode, index, newNodes, isSilent) {\n      if (setting.data.keep.leaf && parentNode && !parentNode.isParent) {\n        return;\n      }\n\n      if (!tools.isArray(newNodes)) {\n        newNodes = [newNodes];\n      }\n\n      if (setting.data.simpleData.enable) {\n        newNodes = data.transformTozTreeFormat(setting, newNodes);\n      }\n\n      if (parentNode) {\n        var target_switchObj = $$(parentNode, consts.id.SWITCH, setting),\n            target_icoObj = $$(parentNode, consts.id.ICON, setting),\n            target_ulObj = $$(parentNode, consts.id.UL, setting);\n\n        if (!parentNode.open) {\n          view.replaceSwitchClass(parentNode, target_switchObj, consts.folder.CLOSE);\n          view.replaceIcoClass(parentNode, target_icoObj, consts.folder.CLOSE);\n          parentNode.open = false;\n          target_ulObj.css({\n            \"display\": \"none\"\n          });\n        }\n\n        data.addNodesData(setting, parentNode, index, newNodes);\n        view.createNodes(setting, parentNode.level + 1, newNodes, parentNode, index);\n\n        if (!isSilent) {\n          view.expandCollapseParentNode(setting, parentNode, true);\n        }\n      } else {\n        data.addNodesData(setting, data.getRoot(setting), index, newNodes);\n        view.createNodes(setting, 0, newNodes, null, index);\n      }\n    },\n    appendNodes: function appendNodes(setting, level, nodes, parentNode, index, initFlag, openFlag) {\n      if (!nodes) return [];\n      var html = [],\n          childKey = setting.data.key.children;\n      var tmpPNode = parentNode ? parentNode : data.getRoot(setting),\n          tmpPChild = tmpPNode[childKey],\n          isFirstNode,\n          isLastNode;\n\n      if (!tmpPChild || index >= tmpPChild.length - nodes.length) {\n        index = -1;\n      }\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        var node = nodes[i];\n\n        if (initFlag) {\n          isFirstNode = (index === 0 || tmpPChild.length == nodes.length) && i == 0;\n          isLastNode = index < 0 && i == nodes.length - 1;\n          data.initNode(setting, level, node, parentNode, isFirstNode, isLastNode, openFlag);\n          data.addNodeCache(setting, node);\n        }\n\n        var childHtml = [];\n\n        if (node[childKey] && node[childKey].length > 0) {\n          //make child html first, because checkType\n          childHtml = view.appendNodes(setting, level + 1, node[childKey], node, -1, initFlag, openFlag && node.open);\n        }\n\n        if (openFlag) {\n          view.makeDOMNodeMainBefore(html, setting, node);\n          view.makeDOMNodeLine(html, setting, node);\n          data.getBeforeA(setting, node, html);\n          view.makeDOMNodeNameBefore(html, setting, node);\n          data.getInnerBeforeA(setting, node, html);\n          view.makeDOMNodeIcon(html, setting, node);\n          data.getInnerAfterA(setting, node, html);\n          view.makeDOMNodeNameAfter(html, setting, node);\n          data.getAfterA(setting, node, html);\n\n          if (node.isParent && node.open) {\n            view.makeUlHtml(setting, node, html, childHtml.join(''));\n          }\n\n          view.makeDOMNodeMainAfter(html, setting, node);\n          data.addCreatedNode(setting, node);\n        }\n      }\n\n      return html;\n    },\n    appendParentULDom: function appendParentULDom(setting, node) {\n      var html = [],\n          nObj = $$(node, setting);\n\n      if (!nObj.get(0) && !!node.parentTId) {\n        view.appendParentULDom(setting, node.getParentNode());\n        nObj = $$(node, setting);\n      }\n\n      var ulObj = $$(node, consts.id.UL, setting);\n\n      if (ulObj.get(0)) {\n        ulObj.remove();\n      }\n\n      var childKey = setting.data.key.children,\n          childHtml = view.appendNodes(setting, node.level + 1, node[childKey], node, -1, false, true);\n      view.makeUlHtml(setting, node, html, childHtml.join(''));\n      nObj.append(html.join(''));\n    },\n    asyncNode: function asyncNode(setting, node, isSilent, callback) {\n      var i, l;\n\n      if (node && !node.isParent) {\n        tools.apply(callback);\n        return false;\n      } else if (node && node.isAjaxing) {\n        return false;\n      } else if (tools.apply(setting.callback.beforeAsync, [setting.treeId, node], true) == false) {\n        tools.apply(callback);\n        return false;\n      }\n\n      if (node) {\n        node.isAjaxing = true;\n        var icoObj = $$(node, consts.id.ICON, setting);\n        icoObj.attr({\n          \"style\": \"\",\n          \"class\": consts.className.BUTTON + \" \" + consts.className.ICO_LOADING\n        });\n      }\n\n      var tmpParam = {};\n\n      for (i = 0, l = setting.async.autoParam.length; node && i < l; i++) {\n        var pKey = setting.async.autoParam[i].split(\"=\"),\n            spKey = pKey;\n\n        if (pKey.length > 1) {\n          spKey = pKey[1];\n          pKey = pKey[0];\n        }\n\n        tmpParam[spKey] = node[pKey];\n      }\n\n      if (tools.isArray(setting.async.otherParam)) {\n        for (i = 0, l = setting.async.otherParam.length; i < l; i += 2) {\n          tmpParam[setting.async.otherParam[i]] = setting.async.otherParam[i + 1];\n        }\n      } else {\n        for (var p in setting.async.otherParam) {\n          tmpParam[p] = setting.async.otherParam[p];\n        }\n      }\n\n      var _tmpV = data.getRoot(setting)._ver;\n\n      _$.ajax({\n        contentType: setting.async.contentType,\n        cache: false,\n        type: setting.async.type,\n        xhrFields: {\n          withCredentials: true\n        },\n        url: tools.apply(setting.async.url, [setting.treeId, node], setting.async.url),\n        data: setting.async.contentType.indexOf('application/json') > -1 ? JSON.stringify(tmpParam) : tmpParam,\n        dataType: setting.async.dataType,\n        success: function success(msg) {\n          if (_tmpV != data.getRoot(setting)._ver) {\n            return;\n          }\n\n          var newNodes = [];\n\n          try {\n            if (!msg || msg.length == 0) {\n              newNodes = [];\n            } else if (typeof msg == \"string\") {\n              newNodes = eval(\"(\" + msg + \")\");\n            } else {\n              newNodes = msg;\n            }\n          } catch (err) {\n            newNodes = msg;\n          }\n\n          if (node) {\n            node.isAjaxing = null;\n            node.zAsync = true;\n          }\n\n          view.setNodeLineIcos(setting, node);\n\n          if (newNodes && newNodes !== \"\") {\n            newNodes = tools.apply(setting.async.dataFilter, [setting.treeId, node, newNodes], newNodes);\n            view.addNodes(setting, node, -1, !!newNodes ? tools.clone(newNodes) : [], !!isSilent);\n          } else {\n            view.addNodes(setting, node, -1, [], !!isSilent);\n          }\n\n          setting.treeObj.trigger(consts.event.ASYNC_SUCCESS, [setting.treeId, node, msg]);\n          tools.apply(callback);\n        },\n        error: function error(XMLHttpRequest, textStatus, errorThrown) {\n          if (_tmpV != data.getRoot(setting)._ver) {\n            return;\n          }\n\n          if (node) node.isAjaxing = null;\n          view.setNodeLineIcos(setting, node);\n          setting.treeObj.trigger(consts.event.ASYNC_ERROR, [setting.treeId, node, XMLHttpRequest, textStatus, errorThrown]);\n        }\n      });\n\n      return true;\n    },\n    cancelPreSelectedNode: function cancelPreSelectedNode(setting, node, excludeNode) {\n      var list = data.getRoot(setting).curSelectedList,\n          i,\n          n;\n\n      for (i = list.length - 1; i >= 0; i--) {\n        n = list[i];\n\n        if (node === n || !node && (!excludeNode || excludeNode !== n)) {\n          $$(n, consts.id.A, setting).removeClass(consts.node.CURSELECTED);\n\n          if (node) {\n            data.removeSelectedNode(setting, node);\n            break;\n          } else {\n            list.splice(i, 1);\n            setting.treeObj.trigger(consts.event.UNSELECTED, [setting.treeId, n]);\n          }\n        }\n      }\n    },\n    createNodeCallback: function createNodeCallback(setting) {\n      if (!!setting.callback.onNodeCreated || !!setting.view.addDiyDom) {\n        var root = data.getRoot(setting);\n\n        while (root.createdNodes.length > 0) {\n          var node = root.createdNodes.shift();\n          tools.apply(setting.view.addDiyDom, [setting.treeId, node]);\n\n          if (!!setting.callback.onNodeCreated) {\n            setting.treeObj.trigger(consts.event.NODECREATED, [setting.treeId, node]);\n          }\n        }\n      }\n    },\n    createNodes: function createNodes(setting, level, nodes, parentNode, index) {\n      if (!nodes || nodes.length == 0) return;\n      var root = data.getRoot(setting),\n          childKey = setting.data.key.children,\n          openFlag = !parentNode || parentNode.open || !!$$(parentNode[childKey][0], setting).get(0);\n      root.createdNodes = [];\n      var zTreeHtml = view.appendNodes(setting, level, nodes, parentNode, index, true, openFlag),\n          parentObj,\n          nextObj;\n\n      if (!parentNode) {\n        parentObj = setting.treeObj; //setting.treeObj.append(zTreeHtml.join(''));\n      } else {\n        var ulObj = $$(parentNode, consts.id.UL, setting);\n\n        if (ulObj.get(0)) {\n          parentObj = ulObj; //ulObj.append(zTreeHtml.join(''));\n        }\n      }\n\n      if (parentObj) {\n        if (index >= 0) {\n          nextObj = parentObj.children()[index];\n        }\n\n        if (index >= 0 && nextObj) {\n          _$(nextObj).before(zTreeHtml.join(''));\n        } else {\n          parentObj.append(zTreeHtml.join(''));\n        }\n      }\n\n      view.createNodeCallback(setting);\n    },\n    destroy: function destroy(setting) {\n      if (!setting) return;\n      data.initCache(setting);\n      data.initRoot(setting);\n      event.unbindTree(setting);\n      event.unbindEvent(setting);\n      setting.treeObj.empty();\n      delete settings[setting.treeId];\n    },\n    expandCollapseNode: function expandCollapseNode(setting, node, expandFlag, animateFlag, callback) {\n      var root = data.getRoot(setting),\n          childKey = setting.data.key.children;\n\n      var tmpCb, _callback;\n\n      if (!node) {\n        tools.apply(callback, []);\n        return;\n      }\n\n      if (root.expandTriggerFlag) {\n        _callback = callback;\n\n        tmpCb = function tmpCb() {\n          if (_callback) _callback();\n\n          if (node.open) {\n            setting.treeObj.trigger(consts.event.EXPAND, [setting.treeId, node]);\n          } else {\n            setting.treeObj.trigger(consts.event.COLLAPSE, [setting.treeId, node]);\n          }\n        };\n\n        callback = tmpCb;\n        root.expandTriggerFlag = false;\n      }\n\n      if (!node.open && node.isParent && (!$$(node, consts.id.UL, setting).get(0) || node[childKey] && node[childKey].length > 0 && !$$(node[childKey][0], setting).get(0))) {\n        view.appendParentULDom(setting, node);\n        view.createNodeCallback(setting);\n      }\n\n      if (node.open == expandFlag) {\n        tools.apply(callback, []);\n        return;\n      }\n\n      var ulObj = $$(node, consts.id.UL, setting),\n          switchObj = $$(node, consts.id.SWITCH, setting),\n          icoObj = $$(node, consts.id.ICON, setting);\n\n      if (node.isParent) {\n        node.open = !node.open;\n\n        if (node.iconOpen && node.iconClose) {\n          icoObj.attr(\"style\", view.makeNodeIcoStyle(setting, node));\n        }\n\n        if (node.open) {\n          view.replaceSwitchClass(node, switchObj, consts.folder.OPEN);\n          view.replaceIcoClass(node, icoObj, consts.folder.OPEN);\n\n          if (animateFlag == false || setting.view.expandSpeed == \"\") {\n            ulObj.show();\n            tools.apply(callback, []);\n          } else {\n            if (node[childKey] && node[childKey].length > 0) {\n              ulObj.slideDown(setting.view.expandSpeed, callback);\n            } else {\n              ulObj.show();\n              tools.apply(callback, []);\n            }\n          }\n        } else {\n          view.replaceSwitchClass(node, switchObj, consts.folder.CLOSE);\n          view.replaceIcoClass(node, icoObj, consts.folder.CLOSE);\n\n          if (animateFlag == false || setting.view.expandSpeed == \"\" || !(node[childKey] && node[childKey].length > 0)) {\n            ulObj.hide();\n            tools.apply(callback, []);\n          } else {\n            ulObj.slideUp(setting.view.expandSpeed, callback);\n          }\n        }\n      } else {\n        tools.apply(callback, []);\n      }\n    },\n    expandCollapseParentNode: function expandCollapseParentNode(setting, node, expandFlag, animateFlag, callback) {\n      if (!node) return;\n\n      if (!node.parentTId) {\n        view.expandCollapseNode(setting, node, expandFlag, animateFlag, callback);\n        return;\n      } else {\n        view.expandCollapseNode(setting, node, expandFlag, animateFlag);\n      }\n\n      if (node.parentTId) {\n        view.expandCollapseParentNode(setting, node.getParentNode(), expandFlag, animateFlag, callback);\n      }\n    },\n    expandCollapseSonNode: function expandCollapseSonNode(setting, node, expandFlag, animateFlag, callback) {\n      var root = data.getRoot(setting),\n          childKey = setting.data.key.children,\n          treeNodes = node ? node[childKey] : root[childKey],\n          selfAnimateSign = node ? false : animateFlag,\n          expandTriggerFlag = data.getRoot(setting).expandTriggerFlag;\n      data.getRoot(setting).expandTriggerFlag = false;\n\n      if (treeNodes) {\n        for (var i = 0, l = treeNodes.length; i < l; i++) {\n          if (treeNodes[i]) view.expandCollapseSonNode(setting, treeNodes[i], expandFlag, selfAnimateSign);\n        }\n      }\n\n      data.getRoot(setting).expandTriggerFlag = expandTriggerFlag;\n      view.expandCollapseNode(setting, node, expandFlag, animateFlag, callback);\n    },\n    isSelectedNode: function isSelectedNode(setting, node) {\n      if (!node) {\n        return false;\n      }\n\n      var list = data.getRoot(setting).curSelectedList,\n          i;\n\n      for (i = list.length - 1; i >= 0; i--) {\n        if (node === list[i]) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    makeDOMNodeIcon: function makeDOMNodeIcon(html, setting, node) {\n      var nameStr = data.getNodeName(setting, node),\n          name = setting.view.nameIsHTML ? nameStr : nameStr.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n      html.push(\"<span id='\", node.tId, consts.id.ICON, \"' title='' treeNode\", consts.id.ICON, \" class='\", view.makeNodeIcoClass(setting, node), \"' style='\", view.makeNodeIcoStyle(setting, node), \"'></span><span id='\", node.tId, consts.id.SPAN, \"' class='\", consts.className.NAME, \"'>\", name, \"</span>\");\n    },\n    makeDOMNodeLine: function makeDOMNodeLine(html, setting, node) {\n      html.push(\"<span id='\", node.tId, consts.id.SWITCH, \"' title='' class='\", view.makeNodeLineClass(setting, node), \"' treeNode\", consts.id.SWITCH, \"></span>\");\n    },\n    makeDOMNodeMainAfter: function makeDOMNodeMainAfter(html, setting, node) {\n      html.push(\"</li>\");\n    },\n    makeDOMNodeMainBefore: function makeDOMNodeMainBefore(html, setting, node) {\n      html.push(\"<li id='\", node.tId, \"' class='\", consts.className.LEVEL, node.level, \"' tabindex='0' hidefocus='true' treenode>\");\n    },\n    makeDOMNodeNameAfter: function makeDOMNodeNameAfter(html, setting, node) {\n      html.push(\"</a>\");\n    },\n    makeDOMNodeNameBefore: function makeDOMNodeNameBefore(html, setting, node) {\n      var title = data.getNodeTitle(setting, node),\n          url = view.makeNodeUrl(setting, node),\n          fontcss = view.makeNodeFontCss(setting, node),\n          fontStyle = [];\n\n      for (var f in fontcss) {\n        fontStyle.push(f, \":\", fontcss[f], \";\");\n      }\n\n      html.push(\"<a id='\", node.tId, consts.id.A, \"' class='\", consts.className.LEVEL, node.level, \"' treeNode\", consts.id.A, \" onclick=\\\"\", node.click || '', \"\\\" \", url != null && url.length > 0 ? \"href='\" + url + \"'\" : \"\", \" target='\", view.makeNodeTarget(node), \"' style='\", fontStyle.join(''), \"'\");\n\n      if (tools.apply(setting.view.showTitle, [setting.treeId, node], setting.view.showTitle) && title) {\n        html.push(\"title='\", title.replace(/'/g, \"&#39;\").replace(/</g, '&lt;').replace(/>/g, '&gt;'), \"'\");\n      }\n\n      html.push(\">\");\n    },\n    makeNodeFontCss: function makeNodeFontCss(setting, node) {\n      var fontCss = tools.apply(setting.view.fontCss, [setting.treeId, node], setting.view.fontCss);\n      return fontCss && typeof fontCss != \"function\" ? fontCss : {};\n    },\n    makeNodeIcoClass: function makeNodeIcoClass(setting, node) {\n      var icoCss = [\"ico\"];\n\n      if (!node.isAjaxing) {\n        icoCss[0] = (node.iconSkin ? node.iconSkin + \"_\" : \"\") + icoCss[0];\n\n        if (node.isParent) {\n          icoCss.push(node.open ? consts.folder.OPEN : consts.folder.CLOSE);\n        } else {\n          icoCss.push(consts.folder.DOCU);\n        }\n      }\n\n      return consts.className.BUTTON + \" \" + icoCss.join('_');\n    },\n    makeNodeIcoStyle: function makeNodeIcoStyle(setting, node) {\n      var icoStyle = [];\n\n      if (!node.isAjaxing) {\n        var icon = node.isParent && node.iconOpen && node.iconClose ? node.open ? node.iconOpen : node.iconClose : node[setting.data.key.icon];\n        if (icon) icoStyle.push(\"background:url(\", icon, \") 0 0 no-repeat;\");\n\n        if (setting.view.showIcon == false || !tools.apply(setting.view.showIcon, [setting.treeId, node], true)) {\n          icoStyle.push(\"width:0px;height:0px;\");\n        }\n      }\n\n      return icoStyle.join('');\n    },\n    makeNodeLineClass: function makeNodeLineClass(setting, node) {\n      var lineClass = [];\n\n      if (setting.view.showLine) {\n        if (node.level == 0 && node.isFirstNode && node.isLastNode) {\n          lineClass.push(consts.line.ROOT);\n        } else if (node.level == 0 && node.isFirstNode) {\n          lineClass.push(consts.line.ROOTS);\n        } else if (node.isLastNode) {\n          lineClass.push(consts.line.BOTTOM);\n        } else {\n          lineClass.push(consts.line.CENTER);\n        }\n      } else {\n        lineClass.push(consts.line.NOLINE);\n      }\n\n      if (node.isParent) {\n        lineClass.push(node.open ? consts.folder.OPEN : consts.folder.CLOSE);\n      } else {\n        lineClass.push(consts.folder.DOCU);\n      }\n\n      return view.makeNodeLineClassEx(node) + lineClass.join('_');\n    },\n    makeNodeLineClassEx: function makeNodeLineClassEx(node) {\n      return consts.className.BUTTON + \" \" + consts.className.LEVEL + node.level + \" \" + consts.className.SWITCH + \" \";\n    },\n    makeNodeTarget: function makeNodeTarget(node) {\n      return node.target || \"_blank\";\n    },\n    makeNodeUrl: function makeNodeUrl(setting, node) {\n      var urlKey = setting.data.key.url;\n      return node[urlKey] ? node[urlKey] : null;\n    },\n    makeUlHtml: function makeUlHtml(setting, node, html, content) {\n      html.push(\"<ul id='\", node.tId, consts.id.UL, \"' class='\", consts.className.LEVEL, node.level, \" \", view.makeUlLineClass(setting, node), \"' style='display:\", node.open ? \"block\" : \"none\", \"'>\");\n      html.push(content);\n      html.push(\"</ul>\");\n    },\n    makeUlLineClass: function makeUlLineClass(setting, node) {\n      return setting.view.showLine && !node.isLastNode ? consts.line.LINE : \"\";\n    },\n    removeChildNodes: function removeChildNodes(setting, node) {\n      if (!node) return;\n      var childKey = setting.data.key.children,\n          nodes = node[childKey];\n      if (!nodes) return;\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        data.removeNodeCache(setting, nodes[i]);\n      }\n\n      data.removeSelectedNode(setting);\n      delete node[childKey];\n\n      if (!setting.data.keep.parent) {\n        node.isParent = false;\n        node.open = false;\n        var tmp_switchObj = $$(node, consts.id.SWITCH, setting),\n            tmp_icoObj = $$(node, consts.id.ICON, setting);\n        view.replaceSwitchClass(node, tmp_switchObj, consts.folder.DOCU);\n        view.replaceIcoClass(node, tmp_icoObj, consts.folder.DOCU);\n        $$(node, consts.id.UL, setting).remove();\n      } else {\n        $$(node, consts.id.UL, setting).empty();\n      }\n    },\n    scrollIntoView: function scrollIntoView(dom) {\n      if (!dom) {\n        return;\n      } // code src: http://jsfiddle.net/08u6cxwj/\n\n\n      if (!Element.prototype.scrollIntoViewIfNeeded) {\n        Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {\n          function withinBounds(value, min, max, extent) {\n            if (false === centerIfNeeded || max <= value + extent && value <= min + extent) {\n              return Math.min(max, Math.max(min, value));\n            } else {\n              return (min + max) / 2;\n            }\n          }\n\n          function makeArea(left, top, width, height) {\n            return {\n              \"left\": left,\n              \"top\": top,\n              \"width\": width,\n              \"height\": height,\n              \"right\": left + width,\n              \"bottom\": top + height,\n              \"translate\": function translate(x, y) {\n                return makeArea(x + left, y + top, width, height);\n              },\n              \"relativeFromTo\": function relativeFromTo(lhs, rhs) {\n                var newLeft = left,\n                    newTop = top;\n                lhs = lhs.offsetParent;\n                rhs = rhs.offsetParent;\n\n                if (lhs === rhs) {\n                  return area;\n                }\n\n                for (; lhs; lhs = lhs.offsetParent) {\n                  newLeft += lhs.offsetLeft + lhs.clientLeft;\n                  newTop += lhs.offsetTop + lhs.clientTop;\n                }\n\n                for (; rhs; rhs = rhs.offsetParent) {\n                  newLeft -= rhs.offsetLeft + rhs.clientLeft;\n                  newTop -= rhs.offsetTop + rhs.clientTop;\n                }\n\n                return makeArea(newLeft, newTop, width, height);\n              }\n            };\n          }\n\n          var parent,\n              elem = this,\n              area = makeArea(this.offsetLeft, this.offsetTop, this.offsetWidth, this.offsetHeight);\n\n          while (tools.isElement(parent = elem.parentNode)) {\n            var clientLeft = parent.offsetLeft + parent.clientLeft;\n            var clientTop = parent.offsetTop + parent.clientTop; // Make area relative to parent's client area.\n\n            area = area.relativeFromTo(elem, parent).translate(-clientLeft, -clientTop);\n            parent.scrollLeft = withinBounds(parent.scrollLeft, area.right - parent.clientWidth, area.left, parent.clientWidth);\n            parent.scrollTop = withinBounds(parent.scrollTop, area.bottom - parent.clientHeight, area.top, parent.clientHeight); // Determine actual scroll amount by reading back scroll properties.\n\n            area = area.translate(clientLeft - parent.scrollLeft, clientTop - parent.scrollTop);\n            elem = parent;\n          }\n        };\n      }\n\n      dom.scrollIntoViewIfNeeded();\n    },\n    setFirstNode: function setFirstNode(setting, parentNode) {\n      var childKey = setting.data.key.children,\n          childLength = parentNode[childKey].length;\n\n      if (childLength > 0) {\n        parentNode[childKey][0].isFirstNode = true;\n      }\n    },\n    setLastNode: function setLastNode(setting, parentNode) {\n      var childKey = setting.data.key.children,\n          childLength = parentNode[childKey].length;\n\n      if (childLength > 0) {\n        parentNode[childKey][childLength - 1].isLastNode = true;\n      }\n    },\n    removeNode: function removeNode(setting, node) {\n      var root = data.getRoot(setting),\n          childKey = setting.data.key.children,\n          parentNode = node.parentTId ? node.getParentNode() : root;\n      node.isFirstNode = false;\n      node.isLastNode = false;\n\n      node.getPreNode = function () {\n        return null;\n      };\n\n      node.getNextNode = function () {\n        return null;\n      };\n\n      if (!data.getNodeCache(setting, node.tId)) {\n        return;\n      }\n\n      $$(node, setting).remove();\n      data.removeNodeCache(setting, node);\n      data.removeSelectedNode(setting, node);\n\n      for (var i = 0, l = parentNode[childKey].length; i < l; i++) {\n        if (parentNode[childKey][i].tId == node.tId) {\n          parentNode[childKey].splice(i, 1);\n          break;\n        }\n      }\n\n      view.setFirstNode(setting, parentNode);\n      view.setLastNode(setting, parentNode);\n      var tmp_ulObj,\n          tmp_switchObj,\n          tmp_icoObj,\n          childLength = parentNode[childKey].length; //repair nodes old parent\n\n      if (!setting.data.keep.parent && childLength == 0) {\n        //old parentNode has no child nodes\n        parentNode.isParent = false;\n        parentNode.open = false;\n        tmp_ulObj = $$(parentNode, consts.id.UL, setting);\n        tmp_switchObj = $$(parentNode, consts.id.SWITCH, setting);\n        tmp_icoObj = $$(parentNode, consts.id.ICON, setting);\n        view.replaceSwitchClass(parentNode, tmp_switchObj, consts.folder.DOCU);\n        view.replaceIcoClass(parentNode, tmp_icoObj, consts.folder.DOCU);\n        tmp_ulObj.css(\"display\", \"none\");\n      } else if (setting.view.showLine && childLength > 0) {\n        //old parentNode has child nodes\n        var newLast = parentNode[childKey][childLength - 1];\n        tmp_ulObj = $$(newLast, consts.id.UL, setting);\n        tmp_switchObj = $$(newLast, consts.id.SWITCH, setting);\n        tmp_icoObj = $$(newLast, consts.id.ICON, setting);\n\n        if (parentNode == root) {\n          if (parentNode[childKey].length == 1) {\n            //node was root, and ztree has only one root after move node\n            view.replaceSwitchClass(newLast, tmp_switchObj, consts.line.ROOT);\n          } else {\n            var tmp_first_switchObj = $$(parentNode[childKey][0], consts.id.SWITCH, setting);\n            view.replaceSwitchClass(parentNode[childKey][0], tmp_first_switchObj, consts.line.ROOTS);\n            view.replaceSwitchClass(newLast, tmp_switchObj, consts.line.BOTTOM);\n          }\n        } else {\n          view.replaceSwitchClass(newLast, tmp_switchObj, consts.line.BOTTOM);\n        }\n\n        tmp_ulObj.removeClass(consts.line.LINE);\n      }\n    },\n    replaceIcoClass: function replaceIcoClass(node, obj, newName) {\n      if (!obj || node.isAjaxing) return;\n      var tmpName = obj.attr(\"class\");\n      if (tmpName == undefined) return;\n      var tmpList = tmpName.split(\"_\");\n\n      switch (newName) {\n        case consts.folder.OPEN:\n        case consts.folder.CLOSE:\n        case consts.folder.DOCU:\n          tmpList[tmpList.length - 1] = newName;\n          break;\n      }\n\n      obj.attr(\"class\", tmpList.join(\"_\"));\n    },\n    replaceSwitchClass: function replaceSwitchClass(node, obj, newName) {\n      if (!obj) return;\n      var tmpName = obj.attr(\"class\");\n      if (tmpName == undefined) return;\n      var tmpList = tmpName.split(\"_\");\n\n      switch (newName) {\n        case consts.line.ROOT:\n        case consts.line.ROOTS:\n        case consts.line.CENTER:\n        case consts.line.BOTTOM:\n        case consts.line.NOLINE:\n          tmpList[0] = view.makeNodeLineClassEx(node) + newName;\n          break;\n\n        case consts.folder.OPEN:\n        case consts.folder.CLOSE:\n        case consts.folder.DOCU:\n          tmpList[1] = newName;\n          break;\n      }\n\n      obj.attr(\"class\", tmpList.join(\"_\"));\n\n      if (newName !== consts.folder.DOCU) {\n        obj.removeAttr(\"disabled\");\n      } else {\n        obj.attr(\"disabled\", \"disabled\");\n      }\n    },\n    selectNode: function selectNode(setting, node, addFlag) {\n      if (!addFlag) {\n        view.cancelPreSelectedNode(setting, null, node);\n      }\n\n      $$(node, consts.id.A, setting).addClass(consts.node.CURSELECTED);\n      data.addSelectedNode(setting, node);\n      setting.treeObj.trigger(consts.event.SELECTED, [setting.treeId, node]);\n    },\n    setNodeFontCss: function setNodeFontCss(setting, treeNode) {\n      var aObj = $$(treeNode, consts.id.A, setting),\n          fontCss = view.makeNodeFontCss(setting, treeNode);\n\n      if (fontCss) {\n        aObj.css(fontCss);\n      }\n    },\n    setNodeLineIcos: function setNodeLineIcos(setting, node) {\n      if (!node) return;\n      var switchObj = $$(node, consts.id.SWITCH, setting),\n          ulObj = $$(node, consts.id.UL, setting),\n          icoObj = $$(node, consts.id.ICON, setting),\n          ulLine = view.makeUlLineClass(setting, node);\n\n      if (ulLine.length == 0) {\n        ulObj.removeClass(consts.line.LINE);\n      } else {\n        ulObj.addClass(ulLine);\n      }\n\n      switchObj.attr(\"class\", view.makeNodeLineClass(setting, node));\n\n      if (node.isParent) {\n        switchObj.removeAttr(\"disabled\");\n      } else {\n        switchObj.attr(\"disabled\", \"disabled\");\n      }\n\n      icoObj.removeAttr(\"style\");\n      icoObj.attr(\"style\", view.makeNodeIcoStyle(setting, node));\n      icoObj.attr(\"class\", view.makeNodeIcoClass(setting, node));\n    },\n    setNodeName: function setNodeName(setting, node) {\n      var title = data.getNodeTitle(setting, node),\n          nObj = $$(node, consts.id.SPAN, setting);\n      nObj.empty();\n\n      if (setting.view.nameIsHTML) {\n        nObj.html(data.getNodeName(setting, node));\n      } else {\n        nObj.text(data.getNodeName(setting, node));\n      }\n\n      if (tools.apply(setting.view.showTitle, [setting.treeId, node], setting.view.showTitle)) {\n        var aObj = $$(node, consts.id.A, setting);\n        aObj.attr(\"title\", !title ? \"\" : title);\n      }\n    },\n    setNodeTarget: function setNodeTarget(setting, node) {\n      var aObj = $$(node, consts.id.A, setting);\n      aObj.attr(\"target\", view.makeNodeTarget(node));\n    },\n    setNodeUrl: function setNodeUrl(setting, node) {\n      var aObj = $$(node, consts.id.A, setting),\n          url = view.makeNodeUrl(setting, node);\n\n      if (url == null || url.length == 0) {\n        aObj.removeAttr(\"href\");\n      } else {\n        aObj.attr(\"href\", url);\n      }\n    },\n    switchNode: function switchNode(setting, node) {\n      if (node.open || !tools.canAsync(setting, node)) {\n        view.expandCollapseNode(setting, node, !node.open);\n      } else if (setting.async.enable) {\n        if (!view.asyncNode(setting, node)) {\n          view.expandCollapseNode(setting, node, !node.open);\n          return;\n        }\n      } else if (node) {\n        view.expandCollapseNode(setting, node, !node.open);\n      }\n    }\n  }; // zTree defind\n\n\n  _$.fn.zTree = {\n    consts: _consts,\n    _z: {\n      tools: tools,\n      view: view,\n      event: event,\n      data: data\n    },\n    getZTreeObj: function getZTreeObj(treeId) {\n      var o = data.getZTreeTools(treeId);\n      return o ? o : null;\n    },\n    destroy: function destroy(treeId) {\n      if (!!treeId && treeId.length > 0) {\n        view.destroy(data.getSetting(treeId));\n      } else {\n        for (var s in settings) {\n          view.destroy(settings[s]);\n        }\n      }\n    },\n    init: function init(obj, zSetting, zNodes) {\n      var setting = tools.clone(_setting);\n\n      _$.extend(true, setting, zSetting);\n\n      setting.treeId = obj.attr(\"id\");\n      setting.treeObj = obj;\n      setting.treeObj.empty();\n      settings[setting.treeId] = setting; //For some older browser,(e.g., ie6)\n\n      if (typeof document.body.style.maxHeight === \"undefined\") {\n        setting.view.expandSpeed = \"\";\n      }\n\n      data.initRoot(setting);\n      var root = data.getRoot(setting),\n          childKey = setting.data.key.children;\n      zNodes = zNodes ? tools.clone(tools.isArray(zNodes) ? zNodes : [zNodes]) : [];\n\n      if (setting.data.simpleData.enable) {\n        root[childKey] = data.transformTozTreeFormat(setting, zNodes);\n      } else {\n        root[childKey] = zNodes;\n      }\n\n      data.initCache(setting);\n      event.unbindTree(setting);\n      event.bindTree(setting);\n      event.unbindEvent(setting);\n      event.bindEvent(setting);\n      var zTreeTools = {\n        setting: setting,\n        addNodes: function addNodes(parentNode, index, newNodes, isSilent) {\n          if (!parentNode) parentNode = null;\n          if (parentNode && !parentNode.isParent && setting.data.keep.leaf) return null;\n          var i = parseInt(index, 10);\n\n          if (isNaN(i)) {\n            isSilent = !!newNodes;\n            newNodes = index;\n            index = -1;\n          } else {\n            index = i;\n          }\n\n          if (!newNodes) return null;\n          var xNewNodes = tools.clone(tools.isArray(newNodes) ? newNodes : [newNodes]);\n\n          function addCallback() {\n            view.addNodes(setting, parentNode, index, xNewNodes, isSilent == true);\n          }\n\n          if (tools.canAsync(setting, parentNode)) {\n            view.asyncNode(setting, parentNode, isSilent, addCallback);\n          } else {\n            addCallback();\n          }\n\n          return xNewNodes;\n        },\n        cancelSelectedNode: function cancelSelectedNode(node) {\n          view.cancelPreSelectedNode(setting, node);\n        },\n        destroy: function destroy() {\n          view.destroy(setting);\n        },\n        expandAll: function expandAll(expandFlag) {\n          expandFlag = !!expandFlag;\n          view.expandCollapseSonNode(setting, null, expandFlag, true);\n          return expandFlag;\n        },\n        expandNode: function expandNode(node, expandFlag, sonSign, focus, callbackFlag) {\n          if (!node || !node.isParent) return null;\n\n          if (expandFlag !== true && expandFlag !== false) {\n            expandFlag = !node.open;\n          }\n\n          callbackFlag = !!callbackFlag;\n\n          if (callbackFlag && expandFlag && tools.apply(setting.callback.beforeExpand, [setting.treeId, node], true) == false) {\n            return null;\n          } else if (callbackFlag && !expandFlag && tools.apply(setting.callback.beforeCollapse, [setting.treeId, node], true) == false) {\n            return null;\n          }\n\n          if (expandFlag && node.parentTId) {\n            view.expandCollapseParentNode(setting, node.getParentNode(), expandFlag, false);\n          }\n\n          if (expandFlag === node.open && !sonSign) {\n            return null;\n          }\n\n          data.getRoot(setting).expandTriggerFlag = callbackFlag;\n\n          if (!tools.canAsync(setting, node) && sonSign) {\n            view.expandCollapseSonNode(setting, node, expandFlag, true, showNodeFocus);\n          } else {\n            node.open = !expandFlag;\n            view.switchNode(this.setting, node);\n            showNodeFocus();\n          }\n\n          return expandFlag;\n\n          function showNodeFocus() {\n            var a = $$(node, setting).get(0);\n\n            if (a && focus !== false) {\n              view.scrollIntoView(a);\n            }\n          }\n        },\n        getNodes: function getNodes() {\n          return data.getNodes(setting);\n        },\n        getNodeByParam: function getNodeByParam(key, value, parentNode) {\n          if (!key) return null;\n          return data.getNodeByParam(setting, parentNode ? parentNode[setting.data.key.children] : data.getNodes(setting), key, value);\n        },\n        getNodeByTId: function getNodeByTId(tId) {\n          return data.getNodeCache(setting, tId);\n        },\n        getNodesByParam: function getNodesByParam(key, value, parentNode) {\n          if (!key) return null;\n          return data.getNodesByParam(setting, parentNode ? parentNode[setting.data.key.children] : data.getNodes(setting), key, value);\n        },\n        getNodesByParamFuzzy: function getNodesByParamFuzzy(key, value, parentNode) {\n          if (!key) return null;\n          return data.getNodesByParamFuzzy(setting, parentNode ? parentNode[setting.data.key.children] : data.getNodes(setting), key, value);\n        },\n        getNodesByFilter: function getNodesByFilter(filter, isSingle, parentNode, invokeParam) {\n          isSingle = !!isSingle;\n          if (!filter || typeof filter != \"function\") return isSingle ? null : [];\n          return data.getNodesByFilter(setting, parentNode ? parentNode[setting.data.key.children] : data.getNodes(setting), filter, isSingle, invokeParam);\n        },\n        getNodeIndex: function getNodeIndex(node) {\n          if (!node) return null;\n          var childKey = setting.data.key.children,\n              parentNode = node.parentTId ? node.getParentNode() : data.getRoot(setting);\n\n          for (var i = 0, l = parentNode[childKey].length; i < l; i++) {\n            if (parentNode[childKey][i] == node) return i;\n          }\n\n          return -1;\n        },\n        getSelectedNodes: function getSelectedNodes() {\n          var r = [],\n              list = data.getRoot(setting).curSelectedList;\n\n          for (var i = 0, l = list.length; i < l; i++) {\n            r.push(list[i]);\n          }\n\n          return r;\n        },\n        isSelectedNode: function isSelectedNode(node) {\n          return data.isSelectedNode(setting, node);\n        },\n        reAsyncChildNodesPromise: function reAsyncChildNodesPromise(parentNode, reloadType, isSilent) {\n          var promise = new Promise(function (resolve, reject) {\n            try {\n              zTreeTools.reAsyncChildNodes(parentNode, reloadType, isSilent, function () {\n                resolve(parentNode);\n              });\n            } catch (e) {\n              reject(e);\n            }\n          });\n          return promise;\n        },\n        reAsyncChildNodes: function reAsyncChildNodes(parentNode, reloadType, isSilent, callback) {\n          if (!this.setting.async.enable) return;\n          var isRoot = !parentNode;\n\n          if (isRoot) {\n            parentNode = data.getRoot(setting);\n          }\n\n          if (reloadType == \"refresh\") {\n            var childKey = this.setting.data.key.children;\n\n            for (var i = 0, l = parentNode[childKey] ? parentNode[childKey].length : 0; i < l; i++) {\n              data.removeNodeCache(setting, parentNode[childKey][i]);\n            }\n\n            data.removeSelectedNode(setting);\n            parentNode[childKey] = [];\n\n            if (isRoot) {\n              this.setting.treeObj.empty();\n            } else {\n              var ulObj = $$(parentNode, consts.id.UL, setting);\n              ulObj.empty();\n            }\n          }\n\n          view.asyncNode(this.setting, isRoot ? null : parentNode, !!isSilent, callback);\n        },\n        refresh: function refresh() {\n          this.setting.treeObj.empty();\n          var root = data.getRoot(setting),\n              nodes = root[setting.data.key.children];\n          data.initRoot(setting);\n          root[setting.data.key.children] = nodes;\n          data.initCache(setting);\n          view.createNodes(setting, 0, root[setting.data.key.children], null, -1);\n        },\n        removeChildNodes: function removeChildNodes(node) {\n          if (!node) return null;\n          var childKey = setting.data.key.children,\n              nodes = node[childKey];\n          view.removeChildNodes(setting, node);\n          return nodes ? nodes : null;\n        },\n        removeNode: function removeNode(node, callbackFlag) {\n          if (!node) return;\n          callbackFlag = !!callbackFlag;\n          if (callbackFlag && tools.apply(setting.callback.beforeRemove, [setting.treeId, node], true) == false) return;\n          view.removeNode(setting, node);\n\n          if (callbackFlag) {\n            this.setting.treeObj.trigger(consts.event.REMOVE, [setting.treeId, node]);\n          }\n        },\n        selectNode: function selectNode(node, addFlag, isSilent) {\n          if (!node) return;\n\n          if (tools.uCanDo(setting)) {\n            addFlag = setting.view.selectedMulti && addFlag;\n\n            if (node.parentTId) {\n              view.expandCollapseParentNode(setting, node.getParentNode(), true, false, showNodeFocus);\n            } else if (!isSilent) {\n              try {\n                $$(node, setting).focus().blur();\n              } catch (e) {}\n            }\n\n            view.selectNode(setting, node, addFlag);\n          }\n\n          function showNodeFocus() {\n            if (isSilent) {\n              return;\n            }\n\n            var a = $$(node, setting).get(0);\n            view.scrollIntoView(a);\n          }\n        },\n        transformTozTreeNodes: function transformTozTreeNodes(simpleNodes) {\n          return data.transformTozTreeFormat(setting, simpleNodes);\n        },\n        transformToArray: function transformToArray(nodes) {\n          return data.transformToArrayFormat(setting, nodes);\n        },\n        updateNode: function updateNode(node, checkTypeFlag) {\n          if (!node) return;\n          var nObj = $$(node, setting);\n\n          if (nObj.get(0) && tools.uCanDo(setting)) {\n            view.setNodeName(setting, node);\n            view.setNodeTarget(setting, node);\n            view.setNodeUrl(setting, node);\n            view.setNodeLineIcos(setting, node);\n            view.setNodeFontCss(setting, node);\n          }\n        }\n      };\n      root.treeTools = zTreeTools;\n      data.setZTreeTools(setting, zTreeTools);\n\n      if (root[childKey] && root[childKey].length > 0) {\n        view.createNodes(setting, 0, root[childKey], null, -1);\n      } else if (setting.async.enable && setting.async.url && setting.async.url !== '') {\n        view.asyncNode(setting);\n      }\n\n      return zTreeTools;\n    }\n  };\n  var zt = _$.fn.zTree,\n      $$ = tools.$,\n      consts = zt.consts;\n})(jQuery);\n/*\n * JQuery zTree excheck v3.5.29\n * http://treejs.cn/\n *\n * Copyright (c) 2010 Hunter.z\n *\n * Licensed same as jquery - MIT License\n * http://www.opensource.org/licenses/mit-license.php\n *\n * email: hunter.z@263.net\n * Date: 2017-06-19\n */\n\n\n(function ($) {\n  //default consts of excheck\n  var _consts = {\n    event: {\n      CHECK: \"ztree_check\"\n    },\n    id: {\n      CHECK: \"_check\"\n    },\n    checkbox: {\n      STYLE: \"checkbox\",\n      DEFAULT: \"chk\",\n      DISABLED: \"disable\",\n      FALSE: \"false\",\n      TRUE: \"true\",\n      FULL: \"full\",\n      PART: \"part\",\n      FOCUS: \"focus\"\n    },\n    radio: {\n      STYLE: \"radio\",\n      TYPE_ALL: \"all\",\n      TYPE_LEVEL: \"level\"\n    }\n  },\n      //default setting of excheck\n  _setting = {\n    check: {\n      enable: false,\n      autoCheckTrigger: false,\n      chkStyle: _consts.checkbox.STYLE,\n      nocheckInherit: false,\n      chkDisabledInherit: false,\n      radioType: _consts.radio.TYPE_LEVEL,\n      chkboxType: {\n        \"Y\": \"ps\",\n        \"N\": \"ps\"\n      }\n    },\n    data: {\n      key: {\n        checked: \"checked\"\n      }\n    },\n    callback: {\n      beforeCheck: null,\n      onCheck: null\n    }\n  },\n      //default root of excheck\n  _initRoot = function _initRoot(setting) {\n    var r = data.getRoot(setting);\n    r.radioCheckedList = [];\n  },\n      //default cache of excheck\n  _initCache = function _initCache(treeId) {},\n      //default bind event of excheck\n  _bindEvent = function _bindEvent(setting) {\n    var o = setting.treeObj,\n        c = consts.event;\n    o.bind(c.CHECK, function (event, srcEvent, treeId, node) {\n      event.srcEvent = srcEvent;\n      tools.apply(setting.callback.onCheck, [event, treeId, node]);\n    });\n  },\n      _unbindEvent = function _unbindEvent(setting) {\n    var o = setting.treeObj,\n        c = consts.event;\n    o.unbind(c.CHECK);\n  },\n      //default event proxy of excheck\n  _eventProxy = function _eventProxy(e) {\n    var target = e.target,\n        setting = data.getSetting(e.data.treeId),\n        tId = \"\",\n        node = null,\n        nodeEventType = \"\",\n        treeEventType = \"\",\n        nodeEventCallback = null,\n        treeEventCallback = null;\n\n    if (tools.eqs(e.type, \"mouseover\")) {\n      if (setting.check.enable && tools.eqs(target.tagName, \"span\") && target.getAttribute(\"treeNode\" + consts.id.CHECK) !== null) {\n        tId = tools.getNodeMainDom(target).id;\n        nodeEventType = \"mouseoverCheck\";\n      }\n    } else if (tools.eqs(e.type, \"mouseout\")) {\n      if (setting.check.enable && tools.eqs(target.tagName, \"span\") && target.getAttribute(\"treeNode\" + consts.id.CHECK) !== null) {\n        tId = tools.getNodeMainDom(target).id;\n        nodeEventType = \"mouseoutCheck\";\n      }\n    } else if (tools.eqs(e.type, \"click\")) {\n      if (setting.check.enable && tools.eqs(target.tagName, \"span\") && target.getAttribute(\"treeNode\" + consts.id.CHECK) !== null) {\n        tId = tools.getNodeMainDom(target).id;\n        nodeEventType = \"checkNode\";\n      }\n    }\n\n    if (tId.length > 0) {\n      node = data.getNodeCache(setting, tId);\n\n      switch (nodeEventType) {\n        case \"checkNode\":\n          nodeEventCallback = _handler.onCheckNode;\n          break;\n\n        case \"mouseoverCheck\":\n          nodeEventCallback = _handler.onMouseoverCheck;\n          break;\n\n        case \"mouseoutCheck\":\n          nodeEventCallback = _handler.onMouseoutCheck;\n          break;\n      }\n    }\n\n    var proxyResult = {\n      stop: nodeEventType === \"checkNode\",\n      node: node,\n      nodeEventType: nodeEventType,\n      nodeEventCallback: nodeEventCallback,\n      treeEventType: treeEventType,\n      treeEventCallback: treeEventCallback\n    };\n    return proxyResult;\n  },\n      //default init node of excheck\n  _initNode = function _initNode(setting, level, n, parentNode, isFirstNode, isLastNode, openFlag) {\n    if (!n) return;\n    var checkedKey = setting.data.key.checked;\n    if (typeof n[checkedKey] == \"string\") n[checkedKey] = tools.eqs(n[checkedKey], \"true\");\n    n[checkedKey] = !!n[checkedKey];\n    n.checkedOld = n[checkedKey];\n    if (typeof n.nocheck == \"string\") n.nocheck = tools.eqs(n.nocheck, \"true\");\n    n.nocheck = !!n.nocheck || setting.check.nocheckInherit && parentNode && !!parentNode.nocheck;\n    if (typeof n.chkDisabled == \"string\") n.chkDisabled = tools.eqs(n.chkDisabled, \"true\");\n    n.chkDisabled = !!n.chkDisabled || setting.check.chkDisabledInherit && parentNode && !!parentNode.chkDisabled;\n    if (typeof n.halfCheck == \"string\") n.halfCheck = tools.eqs(n.halfCheck, \"true\");\n    n.halfCheck = !!n.halfCheck;\n    n.check_Child_State = -1;\n    n.check_Focus = false;\n\n    n.getCheckStatus = function () {\n      return data.getCheckStatus(setting, n);\n    };\n\n    if (setting.check.chkStyle == consts.radio.STYLE && setting.check.radioType == consts.radio.TYPE_ALL && n[checkedKey]) {\n      var r = data.getRoot(setting);\n      r.radioCheckedList.push(n);\n    }\n  },\n      //add dom for check\n  _beforeA = function _beforeA(setting, node, html) {\n    var checkedKey = setting.data.key.checked;\n\n    if (setting.check.enable) {\n      data.makeChkFlag(setting, node);\n      html.push(\"<span ID='\", node.tId, consts.id.CHECK, \"' class='\", view.makeChkClass(setting, node), \"' treeNode\", consts.id.CHECK, node.nocheck === true ? \" style='display:none;'\" : \"\", \"></span>\");\n    }\n  },\n      //update zTreeObj, add method of check\n  _zTreeTools = function _zTreeTools(setting, zTreeTools) {\n    zTreeTools.checkNode = function (node, checked, checkTypeFlag, callbackFlag) {\n      var checkedKey = this.setting.data.key.checked;\n      if (node.chkDisabled === true) return;\n\n      if (checked !== true && checked !== false) {\n        checked = !node[checkedKey];\n      }\n\n      callbackFlag = !!callbackFlag;\n\n      if (node[checkedKey] === checked && !checkTypeFlag) {\n        return;\n      } else if (callbackFlag && tools.apply(this.setting.callback.beforeCheck, [this.setting.treeId, node], true) == false) {\n        return;\n      }\n\n      if (tools.uCanDo(this.setting) && this.setting.check.enable && node.nocheck !== true) {\n        node[checkedKey] = checked;\n        var checkObj = $$(node, consts.id.CHECK, this.setting);\n        if (checkTypeFlag || this.setting.check.chkStyle === consts.radio.STYLE) view.checkNodeRelation(this.setting, node);\n        view.setChkClass(this.setting, checkObj, node);\n        view.repairParentChkClassWithSelf(this.setting, node);\n\n        if (callbackFlag) {\n          this.setting.treeObj.trigger(consts.event.CHECK, [null, this.setting.treeId, node]);\n        }\n      }\n    };\n\n    zTreeTools.checkAllNodes = function (checked) {\n      view.repairAllChk(this.setting, !!checked);\n    };\n\n    zTreeTools.getCheckedNodes = function (checked) {\n      var childKey = this.setting.data.key.children;\n      checked = checked !== false;\n      return data.getTreeCheckedNodes(this.setting, data.getRoot(this.setting)[childKey], checked);\n    };\n\n    zTreeTools.getChangeCheckedNodes = function () {\n      var childKey = this.setting.data.key.children;\n      return data.getTreeChangeCheckedNodes(this.setting, data.getRoot(this.setting)[childKey]);\n    };\n\n    zTreeTools.setChkDisabled = function (node, disabled, inheritParent, inheritChildren) {\n      disabled = !!disabled;\n      inheritParent = !!inheritParent;\n      inheritChildren = !!inheritChildren;\n      view.repairSonChkDisabled(this.setting, node, disabled, inheritChildren);\n      view.repairParentChkDisabled(this.setting, node.getParentNode(), disabled, inheritParent);\n    };\n\n    var _updateNode = zTreeTools.updateNode;\n\n    zTreeTools.updateNode = function (node, checkTypeFlag) {\n      if (_updateNode) _updateNode.apply(zTreeTools, arguments);\n      if (!node || !this.setting.check.enable) return;\n      var nObj = $$(node, this.setting);\n\n      if (nObj.get(0) && tools.uCanDo(this.setting)) {\n        var checkObj = $$(node, consts.id.CHECK, this.setting);\n        if (checkTypeFlag == true || this.setting.check.chkStyle === consts.radio.STYLE) view.checkNodeRelation(this.setting, node);\n        view.setChkClass(this.setting, checkObj, node);\n        view.repairParentChkClassWithSelf(this.setting, node);\n      }\n    };\n  },\n      //method of operate data\n  _data = {\n    getRadioCheckedList: function getRadioCheckedList(setting) {\n      var checkedList = data.getRoot(setting).radioCheckedList;\n\n      for (var i = 0, j = checkedList.length; i < j; i++) {\n        if (!data.getNodeCache(setting, checkedList[i].tId)) {\n          checkedList.splice(i, 1);\n          i--;\n          j--;\n        }\n      }\n\n      return checkedList;\n    },\n    getCheckStatus: function getCheckStatus(setting, node) {\n      if (!setting.check.enable || node.nocheck || node.chkDisabled) return null;\n      var checkedKey = setting.data.key.checked,\n          r = {\n        checked: node[checkedKey],\n        half: node.halfCheck ? node.halfCheck : setting.check.chkStyle == consts.radio.STYLE ? node.check_Child_State === 2 : node[checkedKey] ? node.check_Child_State > -1 && node.check_Child_State < 2 : node.check_Child_State > 0\n      };\n      return r;\n    },\n    getTreeCheckedNodes: function getTreeCheckedNodes(setting, nodes, checked, results) {\n      if (!nodes) return [];\n      var childKey = setting.data.key.children,\n          checkedKey = setting.data.key.checked,\n          onlyOne = checked && setting.check.chkStyle == consts.radio.STYLE && setting.check.radioType == consts.radio.TYPE_ALL;\n      results = !results ? [] : results;\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        if (nodes[i].nocheck !== true && nodes[i].chkDisabled !== true && nodes[i][checkedKey] == checked) {\n          results.push(nodes[i]);\n\n          if (onlyOne) {\n            break;\n          }\n        }\n\n        data.getTreeCheckedNodes(setting, nodes[i][childKey], checked, results);\n\n        if (onlyOne && results.length > 0) {\n          break;\n        }\n      }\n\n      return results;\n    },\n    getTreeChangeCheckedNodes: function getTreeChangeCheckedNodes(setting, nodes, results) {\n      if (!nodes) return [];\n      var childKey = setting.data.key.children,\n          checkedKey = setting.data.key.checked;\n      results = !results ? [] : results;\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        if (nodes[i].nocheck !== true && nodes[i].chkDisabled !== true && nodes[i][checkedKey] != nodes[i].checkedOld) {\n          results.push(nodes[i]);\n        }\n\n        data.getTreeChangeCheckedNodes(setting, nodes[i][childKey], results);\n      }\n\n      return results;\n    },\n    makeChkFlag: function makeChkFlag(setting, node) {\n      if (!node) return;\n      var childKey = setting.data.key.children,\n          checkedKey = setting.data.key.checked,\n          chkFlag = -1;\n\n      if (node[childKey]) {\n        for (var i = 0, l = node[childKey].length; i < l; i++) {\n          var cNode = node[childKey][i];\n          var tmp = -1;\n\n          if (setting.check.chkStyle == consts.radio.STYLE) {\n            if (cNode.nocheck === true || cNode.chkDisabled === true) {\n              tmp = cNode.check_Child_State;\n            } else if (cNode.halfCheck === true) {\n              tmp = 2;\n            } else if (cNode[checkedKey]) {\n              tmp = 2;\n            } else {\n              tmp = cNode.check_Child_State > 0 ? 2 : 0;\n            }\n\n            if (tmp == 2) {\n              chkFlag = 2;\n              break;\n            } else if (tmp == 0) {\n              chkFlag = 0;\n            }\n          } else if (setting.check.chkStyle == consts.checkbox.STYLE) {\n            if (cNode.nocheck === true || cNode.chkDisabled === true) {\n              tmp = cNode.check_Child_State;\n            } else if (cNode.halfCheck === true) {\n              tmp = 1;\n            } else if (cNode[checkedKey]) {\n              tmp = cNode.check_Child_State === -1 || cNode.check_Child_State === 2 ? 2 : 1;\n            } else {\n              tmp = cNode.check_Child_State > 0 ? 1 : 0;\n            }\n\n            if (tmp === 1) {\n              chkFlag = 1;\n              break;\n            } else if (tmp === 2 && chkFlag > -1 && i > 0 && tmp !== chkFlag) {\n              chkFlag = 1;\n              break;\n            } else if (chkFlag === 2 && tmp > -1 && tmp < 2) {\n              chkFlag = 1;\n              break;\n            } else if (tmp > -1) {\n              chkFlag = tmp;\n            }\n          }\n        }\n      }\n\n      node.check_Child_State = chkFlag;\n    }\n  },\n      //method of event proxy\n  _event = {},\n      //method of event handler\n  _handler = {\n    onCheckNode: function onCheckNode(event, node) {\n      if (node.chkDisabled === true) return false;\n      var setting = data.getSetting(event.data.treeId),\n          checkedKey = setting.data.key.checked;\n      if (tools.apply(setting.callback.beforeCheck, [setting.treeId, node], true) == false) return true;\n      node[checkedKey] = !node[checkedKey];\n      view.checkNodeRelation(setting, node);\n      var checkObj = $$(node, consts.id.CHECK, setting);\n      view.setChkClass(setting, checkObj, node);\n      view.repairParentChkClassWithSelf(setting, node);\n      setting.treeObj.trigger(consts.event.CHECK, [event, setting.treeId, node]);\n      return true;\n    },\n    onMouseoverCheck: function onMouseoverCheck(event, node) {\n      if (node.chkDisabled === true) return false;\n      var setting = data.getSetting(event.data.treeId),\n          checkObj = $$(node, consts.id.CHECK, setting);\n      node.check_Focus = true;\n      view.setChkClass(setting, checkObj, node);\n      return true;\n    },\n    onMouseoutCheck: function onMouseoutCheck(event, node) {\n      if (node.chkDisabled === true) return false;\n      var setting = data.getSetting(event.data.treeId),\n          checkObj = $$(node, consts.id.CHECK, setting);\n      node.check_Focus = false;\n      view.setChkClass(setting, checkObj, node);\n      return true;\n    }\n  },\n      //method of tools for zTree\n  _tools = {},\n      //method of operate ztree dom\n  _view = {\n    checkNodeRelation: function checkNodeRelation(setting, node) {\n      var pNode,\n          i,\n          l,\n          childKey = setting.data.key.children,\n          checkedKey = setting.data.key.checked,\n          r = consts.radio;\n\n      if (setting.check.chkStyle == r.STYLE) {\n        var checkedList = data.getRadioCheckedList(setting);\n\n        if (node[checkedKey]) {\n          if (setting.check.radioType == r.TYPE_ALL) {\n            for (i = checkedList.length - 1; i >= 0; i--) {\n              pNode = checkedList[i];\n\n              if (pNode[checkedKey] && pNode != node) {\n                pNode[checkedKey] = false;\n                checkedList.splice(i, 1);\n                view.setChkClass(setting, $$(pNode, consts.id.CHECK, setting), pNode);\n\n                if (pNode.parentTId != node.parentTId) {\n                  view.repairParentChkClassWithSelf(setting, pNode);\n                }\n              }\n            }\n\n            checkedList.push(node);\n          } else {\n            var parentNode = node.parentTId ? node.getParentNode() : data.getRoot(setting);\n\n            for (i = 0, l = parentNode[childKey].length; i < l; i++) {\n              pNode = parentNode[childKey][i];\n\n              if (pNode[checkedKey] && pNode != node) {\n                pNode[checkedKey] = false;\n                view.setChkClass(setting, $$(pNode, consts.id.CHECK, setting), pNode);\n              }\n            }\n          }\n        } else if (setting.check.radioType == r.TYPE_ALL) {\n          for (i = 0, l = checkedList.length; i < l; i++) {\n            if (node == checkedList[i]) {\n              checkedList.splice(i, 1);\n              break;\n            }\n          }\n        }\n      } else {\n        if (node[checkedKey] && (!node[childKey] || node[childKey].length == 0 || setting.check.chkboxType.Y.indexOf(\"s\") > -1)) {\n          view.setSonNodeCheckBox(setting, node, true);\n        }\n\n        if (!node[checkedKey] && (!node[childKey] || node[childKey].length == 0 || setting.check.chkboxType.N.indexOf(\"s\") > -1)) {\n          view.setSonNodeCheckBox(setting, node, false);\n        }\n\n        if (node[checkedKey] && setting.check.chkboxType.Y.indexOf(\"p\") > -1) {\n          view.setParentNodeCheckBox(setting, node, true);\n        }\n\n        if (!node[checkedKey] && setting.check.chkboxType.N.indexOf(\"p\") > -1) {\n          view.setParentNodeCheckBox(setting, node, false);\n        }\n      }\n    },\n    makeChkClass: function makeChkClass(setting, node) {\n      var checkedKey = setting.data.key.checked,\n          c = consts.checkbox,\n          r = consts.radio,\n          fullStyle = \"\";\n\n      if (node.chkDisabled === true) {\n        fullStyle = c.DISABLED;\n      } else if (node.halfCheck) {\n        fullStyle = c.PART;\n      } else if (setting.check.chkStyle == r.STYLE) {\n        fullStyle = node.check_Child_State < 1 ? c.FULL : c.PART;\n      } else {\n        fullStyle = node[checkedKey] ? node.check_Child_State === 2 || node.check_Child_State === -1 ? c.FULL : c.PART : node.check_Child_State < 1 ? c.FULL : c.PART;\n      }\n\n      var chkName = setting.check.chkStyle + \"_\" + (node[checkedKey] ? c.TRUE : c.FALSE) + \"_\" + fullStyle;\n      chkName = node.check_Focus && node.chkDisabled !== true ? chkName + \"_\" + c.FOCUS : chkName;\n      return consts.className.BUTTON + \" \" + c.DEFAULT + \" \" + chkName;\n    },\n    repairAllChk: function repairAllChk(setting, checked) {\n      if (setting.check.enable && setting.check.chkStyle === consts.checkbox.STYLE) {\n        var checkedKey = setting.data.key.checked,\n            childKey = setting.data.key.children,\n            root = data.getRoot(setting);\n\n        for (var i = 0, l = root[childKey].length; i < l; i++) {\n          var node = root[childKey][i];\n\n          if (node.nocheck !== true && node.chkDisabled !== true) {\n            node[checkedKey] = checked;\n          }\n\n          view.setSonNodeCheckBox(setting, node, checked);\n        }\n      }\n    },\n    repairChkClass: function repairChkClass(setting, node) {\n      if (!node) return;\n      data.makeChkFlag(setting, node);\n\n      if (node.nocheck !== true) {\n        var checkObj = $$(node, consts.id.CHECK, setting);\n        view.setChkClass(setting, checkObj, node);\n      }\n    },\n    repairParentChkClass: function repairParentChkClass(setting, node) {\n      if (!node || !node.parentTId) return;\n      var pNode = node.getParentNode();\n      view.repairChkClass(setting, pNode);\n      view.repairParentChkClass(setting, pNode);\n    },\n    repairParentChkClassWithSelf: function repairParentChkClassWithSelf(setting, node) {\n      if (!node) return;\n      var childKey = setting.data.key.children;\n\n      if (node[childKey] && node[childKey].length > 0) {\n        view.repairParentChkClass(setting, node[childKey][0]);\n      } else {\n        view.repairParentChkClass(setting, node);\n      }\n    },\n    repairSonChkDisabled: function repairSonChkDisabled(setting, node, chkDisabled, inherit) {\n      if (!node) return;\n      var childKey = setting.data.key.children;\n\n      if (node.chkDisabled != chkDisabled) {\n        node.chkDisabled = chkDisabled;\n      }\n\n      view.repairChkClass(setting, node);\n\n      if (node[childKey] && inherit) {\n        for (var i = 0, l = node[childKey].length; i < l; i++) {\n          var sNode = node[childKey][i];\n          view.repairSonChkDisabled(setting, sNode, chkDisabled, inherit);\n        }\n      }\n    },\n    repairParentChkDisabled: function repairParentChkDisabled(setting, node, chkDisabled, inherit) {\n      if (!node) return;\n\n      if (node.chkDisabled != chkDisabled && inherit) {\n        node.chkDisabled = chkDisabled;\n      }\n\n      view.repairChkClass(setting, node);\n      view.repairParentChkDisabled(setting, node.getParentNode(), chkDisabled, inherit);\n    },\n    setChkClass: function setChkClass(setting, obj, node) {\n      if (!obj) return;\n\n      if (node.nocheck === true) {\n        obj.hide();\n      } else {\n        obj.show();\n      }\n\n      obj.attr('class', view.makeChkClass(setting, node));\n    },\n    setParentNodeCheckBox: function setParentNodeCheckBox(setting, node, value, srcNode) {\n      var childKey = setting.data.key.children,\n          checkedKey = setting.data.key.checked,\n          checkObj = $$(node, consts.id.CHECK, setting);\n      if (!srcNode) srcNode = node;\n      data.makeChkFlag(setting, node);\n\n      if (node.nocheck !== true && node.chkDisabled !== true) {\n        node[checkedKey] = value;\n        view.setChkClass(setting, checkObj, node);\n\n        if (setting.check.autoCheckTrigger && node != srcNode) {\n          setting.treeObj.trigger(consts.event.CHECK, [null, setting.treeId, node]);\n        }\n      }\n\n      if (node.parentTId) {\n        var pSign = true;\n\n        if (!value) {\n          var pNodes = node.getParentNode()[childKey];\n\n          for (var i = 0, l = pNodes.length; i < l; i++) {\n            if (pNodes[i].nocheck !== true && pNodes[i].chkDisabled !== true && pNodes[i][checkedKey] || (pNodes[i].nocheck === true || pNodes[i].chkDisabled === true) && pNodes[i].check_Child_State > 0) {\n              pSign = false;\n              break;\n            }\n          }\n        }\n\n        if (pSign) {\n          view.setParentNodeCheckBox(setting, node.getParentNode(), value, srcNode);\n        }\n      }\n    },\n    setSonNodeCheckBox: function setSonNodeCheckBox(setting, node, value, srcNode) {\n      if (!node) return;\n      var childKey = setting.data.key.children,\n          checkedKey = setting.data.key.checked,\n          checkObj = $$(node, consts.id.CHECK, setting);\n      if (!srcNode) srcNode = node;\n      var hasDisable = false;\n\n      if (node[childKey]) {\n        for (var i = 0, l = node[childKey].length; i < l; i++) {\n          var sNode = node[childKey][i];\n          view.setSonNodeCheckBox(setting, sNode, value, srcNode);\n          if (sNode.chkDisabled === true) hasDisable = true;\n        }\n      }\n\n      if (node != data.getRoot(setting) && node.chkDisabled !== true) {\n        if (hasDisable && node.nocheck !== true) {\n          data.makeChkFlag(setting, node);\n        }\n\n        if (node.nocheck !== true && node.chkDisabled !== true) {\n          node[checkedKey] = value;\n          if (!hasDisable) node.check_Child_State = node[childKey] && node[childKey].length > 0 ? value ? 2 : 0 : -1;\n        } else {\n          node.check_Child_State = -1;\n        }\n\n        view.setChkClass(setting, checkObj, node);\n\n        if (setting.check.autoCheckTrigger && node != srcNode && node.nocheck !== true && node.chkDisabled !== true) {\n          setting.treeObj.trigger(consts.event.CHECK, [null, setting.treeId, node]);\n        }\n      }\n    }\n  },\n      _z = {\n    tools: _tools,\n    view: _view,\n    event: _event,\n    data: _data\n  };\n\n  $.extend(true, $.fn.zTree.consts, _consts);\n  $.extend(true, $.fn.zTree._z, _z);\n  var zt = $.fn.zTree,\n      tools = zt._z.tools,\n      consts = zt.consts,\n      view = zt._z.view,\n      data = zt._z.data,\n      event = zt._z.event,\n      $$ = tools.$;\n  data.exSetting(_setting);\n  data.addInitBind(_bindEvent);\n  data.addInitUnBind(_unbindEvent);\n  data.addInitCache(_initCache);\n  data.addInitNode(_initNode);\n  data.addInitProxy(_eventProxy, true);\n  data.addInitRoot(_initRoot);\n  data.addBeforeA(_beforeA);\n  data.addZTreeTools(_zTreeTools);\n  var _createNodes = view.createNodes;\n\n  view.createNodes = function (setting, level, nodes, parentNode, index) {\n    if (_createNodes) _createNodes.apply(view, arguments);\n    if (!nodes) return;\n    view.repairParentChkClassWithSelf(setting, parentNode);\n  };\n\n  var _removeNode = view.removeNode;\n\n  view.removeNode = function (setting, node) {\n    var parentNode = node.getParentNode();\n    if (_removeNode) _removeNode.apply(view, arguments);\n    if (!node || !parentNode) return;\n    view.repairChkClass(setting, parentNode);\n    view.repairParentChkClass(setting, parentNode);\n  };\n\n  var _appendNodes = view.appendNodes;\n\n  view.appendNodes = function (setting, level, nodes, parentNode, index, initFlag, openFlag) {\n    var html = \"\";\n\n    if (_appendNodes) {\n      html = _appendNodes.apply(view, arguments);\n    }\n\n    if (parentNode) {\n      data.makeChkFlag(setting, parentNode);\n    }\n\n    return html;\n  };\n})(jQuery);\n/*\n * JQuery zTree exedit v3.5.29\n * http://treejs.cn/\n *\n * Copyright (c) 2010 Hunter.z\n *\n * Licensed same as jquery - MIT License\n * http://www.opensource.org/licenses/mit-license.php\n *\n * email: hunter.z@263.net\n * Date: 2017-06-19\n */\n\n\n(function ($) {\n  //default consts of exedit\n  var _consts = {\n    event: {\n      DRAG: \"ztree_drag\",\n      DROP: \"ztree_drop\",\n      RENAME: \"ztree_rename\",\n      DRAGMOVE: \"ztree_dragmove\"\n    },\n    id: {\n      EDIT: \"_edit\",\n      INPUT: \"_input\",\n      REMOVE: \"_remove\"\n    },\n    move: {\n      TYPE_INNER: \"inner\",\n      TYPE_PREV: \"prev\",\n      TYPE_NEXT: \"next\"\n    },\n    node: {\n      CURSELECTED_EDIT: \"curSelectedNode_Edit\",\n      TMPTARGET_TREE: \"tmpTargetzTree\",\n      TMPTARGET_NODE: \"tmpTargetNode\"\n    }\n  },\n      //default setting of exedit\n  _setting = {\n    edit: {\n      enable: false,\n      editNameSelectAll: false,\n      showRemoveBtn: true,\n      showRenameBtn: true,\n      removeTitle: \"remove\",\n      renameTitle: \"rename\",\n      drag: {\n        autoExpandTrigger: false,\n        isCopy: true,\n        isMove: true,\n        prev: true,\n        next: true,\n        inner: true,\n        minMoveSize: 5,\n        borderMax: 10,\n        borderMin: -5,\n        maxShowNodeNum: 5,\n        autoOpenTime: 500\n      }\n    },\n    view: {\n      addHoverDom: null,\n      removeHoverDom: null\n    },\n    callback: {\n      beforeDrag: null,\n      beforeDragOpen: null,\n      beforeDrop: null,\n      beforeEditName: null,\n      beforeRename: null,\n      onDrag: null,\n      onDragMove: null,\n      onDrop: null,\n      onRename: null\n    }\n  },\n      //default root of exedit\n  _initRoot = function _initRoot(setting) {\n    var r = data.getRoot(setting),\n        rs = data.getRoots();\n    r.curEditNode = null;\n    r.curEditInput = null;\n    r.curHoverNode = null;\n    r.dragFlag = 0;\n    r.dragNodeShowBefore = [];\n    r.dragMaskList = new Array();\n    rs.showHoverDom = true;\n  },\n      //default cache of exedit\n  _initCache = function _initCache(treeId) {},\n      //default bind event of exedit\n  _bindEvent = function _bindEvent(setting) {\n    var o = setting.treeObj;\n    var c = consts.event;\n    o.bind(c.RENAME, function (event, treeId, treeNode, isCancel) {\n      tools.apply(setting.callback.onRename, [event, treeId, treeNode, isCancel]);\n    });\n    o.bind(c.DRAG, function (event, srcEvent, treeId, treeNodes) {\n      tools.apply(setting.callback.onDrag, [srcEvent, treeId, treeNodes]);\n    });\n    o.bind(c.DRAGMOVE, function (event, srcEvent, treeId, treeNodes) {\n      tools.apply(setting.callback.onDragMove, [srcEvent, treeId, treeNodes]);\n    });\n    o.bind(c.DROP, function (event, srcEvent, treeId, treeNodes, targetNode, moveType, isCopy) {\n      tools.apply(setting.callback.onDrop, [srcEvent, treeId, treeNodes, targetNode, moveType, isCopy]);\n    });\n  },\n      _unbindEvent = function _unbindEvent(setting) {\n    var o = setting.treeObj;\n    var c = consts.event;\n    o.unbind(c.RENAME);\n    o.unbind(c.DRAG);\n    o.unbind(c.DRAGMOVE);\n    o.unbind(c.DROP);\n  },\n      //default event proxy of exedit\n  _eventProxy = function _eventProxy(e) {\n    var target = e.target,\n        setting = data.getSetting(e.data.treeId),\n        relatedTarget = e.relatedTarget,\n        tId = \"\",\n        node = null,\n        nodeEventType = \"\",\n        treeEventType = \"\",\n        nodeEventCallback = null,\n        treeEventCallback = null,\n        tmp = null;\n\n    if (tools.eqs(e.type, \"mouseover\")) {\n      tmp = tools.getMDom(setting, target, [{\n        tagName: \"a\",\n        attrName: \"treeNode\" + consts.id.A\n      }]);\n\n      if (tmp) {\n        tId = tools.getNodeMainDom(tmp).id;\n        nodeEventType = \"hoverOverNode\";\n      }\n    } else if (tools.eqs(e.type, \"mouseout\")) {\n      tmp = tools.getMDom(setting, relatedTarget, [{\n        tagName: \"a\",\n        attrName: \"treeNode\" + consts.id.A\n      }]);\n\n      if (!tmp) {\n        tId = \"remove\";\n        nodeEventType = \"hoverOutNode\";\n      }\n    } else if (tools.eqs(e.type, \"mousedown\")) {\n      tmp = tools.getMDom(setting, target, [{\n        tagName: \"a\",\n        attrName: \"treeNode\" + consts.id.A\n      }]);\n\n      if (tmp) {\n        tId = tools.getNodeMainDom(tmp).id;\n        nodeEventType = \"mousedownNode\";\n      }\n    }\n\n    if (tId.length > 0) {\n      node = data.getNodeCache(setting, tId);\n\n      switch (nodeEventType) {\n        case \"mousedownNode\":\n          nodeEventCallback = _handler.onMousedownNode;\n          break;\n\n        case \"hoverOverNode\":\n          nodeEventCallback = _handler.onHoverOverNode;\n          break;\n\n        case \"hoverOutNode\":\n          nodeEventCallback = _handler.onHoverOutNode;\n          break;\n      }\n    }\n\n    var proxyResult = {\n      stop: false,\n      node: node,\n      nodeEventType: nodeEventType,\n      nodeEventCallback: nodeEventCallback,\n      treeEventType: treeEventType,\n      treeEventCallback: treeEventCallback\n    };\n    return proxyResult;\n  },\n      //default init node of exedit\n  _initNode = function _initNode(setting, level, n, parentNode, isFirstNode, isLastNode, openFlag) {\n    if (!n) return;\n    n.isHover = false;\n    n.editNameFlag = false;\n  },\n      //update zTreeObj, add method of edit\n  _zTreeTools = function _zTreeTools(setting, zTreeTools) {\n    zTreeTools.cancelEditName = function (newName) {\n      var root = data.getRoot(this.setting);\n      if (!root.curEditNode) return;\n      view.cancelCurEditNode(this.setting, newName ? newName : null, true);\n    };\n\n    zTreeTools.copyNode = function (targetNode, node, moveType, isSilent) {\n      if (!node) return null;\n      if (targetNode && !targetNode.isParent && this.setting.data.keep.leaf && moveType === consts.move.TYPE_INNER) return null;\n\n      var _this = this,\n          newNode = tools.clone(node);\n\n      if (!targetNode) {\n        targetNode = null;\n        moveType = consts.move.TYPE_INNER;\n      }\n\n      if (moveType == consts.move.TYPE_INNER) {\n        var copyCallback = function copyCallback() {\n          view.addNodes(_this.setting, targetNode, -1, [newNode], isSilent);\n        };\n\n        if (tools.canAsync(this.setting, targetNode)) {\n          view.asyncNode(this.setting, targetNode, isSilent, copyCallback);\n        } else {\n          copyCallback();\n        }\n      } else {\n        view.addNodes(this.setting, targetNode.parentNode, -1, [newNode], isSilent);\n        view.moveNode(this.setting, targetNode, newNode, moveType, false, isSilent);\n      }\n\n      return newNode;\n    };\n\n    zTreeTools.editName = function (node) {\n      if (!node || !node.tId || node !== data.getNodeCache(this.setting, node.tId)) return;\n      if (node.parentTId) view.expandCollapseParentNode(this.setting, node.getParentNode(), true);\n      view.editNode(this.setting, node);\n    };\n\n    zTreeTools.moveNode = function (targetNode, node, moveType, isSilent) {\n      if (!node) return node;\n\n      if (targetNode && !targetNode.isParent && this.setting.data.keep.leaf && moveType === consts.move.TYPE_INNER) {\n        return null;\n      } else if (targetNode && (node.parentTId == targetNode.tId && moveType == consts.move.TYPE_INNER || $$(node, this.setting).find(\"#\" + targetNode.tId).length > 0)) {\n        return null;\n      } else if (!targetNode) {\n        targetNode = null;\n      }\n\n      var _this = this;\n\n      function moveCallback() {\n        view.moveNode(_this.setting, targetNode, node, moveType, false, isSilent);\n      }\n\n      if (tools.canAsync(this.setting, targetNode) && moveType === consts.move.TYPE_INNER) {\n        view.asyncNode(this.setting, targetNode, isSilent, moveCallback);\n      } else {\n        moveCallback();\n      }\n\n      return node;\n    };\n\n    zTreeTools.setEditable = function (editable) {\n      this.setting.edit.enable = editable;\n      return this.refresh();\n    };\n  },\n      //method of operate data\n  _data = {\n    setSonNodeLevel: function setSonNodeLevel(setting, parentNode, node) {\n      if (!node) return;\n      var childKey = setting.data.key.children;\n      node.level = parentNode ? parentNode.level + 1 : 0;\n      if (!node[childKey]) return;\n\n      for (var i = 0, l = node[childKey].length; i < l; i++) {\n        if (node[childKey][i]) data.setSonNodeLevel(setting, node, node[childKey][i]);\n      }\n    }\n  },\n      //method of event proxy\n  _event = {},\n      //method of event handler\n  _handler = {\n    onHoverOverNode: function onHoverOverNode(event, node) {\n      var setting = data.getSetting(event.data.treeId),\n          root = data.getRoot(setting);\n\n      if (root.curHoverNode != node) {\n        _handler.onHoverOutNode(event);\n      }\n\n      root.curHoverNode = node;\n      view.addHoverDom(setting, node);\n    },\n    onHoverOutNode: function onHoverOutNode(event, node) {\n      var setting = data.getSetting(event.data.treeId),\n          root = data.getRoot(setting);\n\n      if (root.curHoverNode && !data.isSelectedNode(setting, root.curHoverNode)) {\n        view.removeTreeDom(setting, root.curHoverNode);\n        root.curHoverNode = null;\n      }\n    },\n    onMousedownNode: function onMousedownNode(eventMouseDown, _node) {\n      var i,\n          l,\n          setting = data.getSetting(eventMouseDown.data.treeId),\n          root = data.getRoot(setting),\n          roots = data.getRoots(); //right click can't drag & drop\n\n      if (eventMouseDown.button == 2 || !setting.edit.enable || !setting.edit.drag.isCopy && !setting.edit.drag.isMove) return true; //input of edit node name can't drag & drop\n\n      var target = eventMouseDown.target,\n          _nodes = data.getRoot(setting).curSelectedList,\n          nodes = [];\n\n      if (!data.isSelectedNode(setting, _node)) {\n        nodes = [_node];\n      } else {\n        for (i = 0, l = _nodes.length; i < l; i++) {\n          if (_nodes[i].editNameFlag && tools.eqs(target.tagName, \"input\") && target.getAttribute(\"treeNode\" + consts.id.INPUT) !== null) {\n            return true;\n          }\n\n          nodes.push(_nodes[i]);\n\n          if (nodes[0].parentTId !== _nodes[i].parentTId) {\n            nodes = [_node];\n            break;\n          }\n        }\n      }\n\n      view.editNodeBlur = true;\n      view.cancelCurEditNode(setting);\n      var doc = $(setting.treeObj.get(0).ownerDocument),\n          body = $(setting.treeObj.get(0).ownerDocument.body),\n          curNode,\n          tmpArrow,\n          tmpTarget,\n          isOtherTree = false,\n          targetSetting = setting,\n          sourceSetting = setting,\n          preNode,\n          nextNode,\n          preTmpTargetNodeId = null,\n          preTmpMoveType = null,\n          tmpTargetNodeId = null,\n          moveType = consts.move.TYPE_INNER,\n          mouseDownX = eventMouseDown.clientX,\n          mouseDownY = eventMouseDown.clientY,\n          startTime = new Date().getTime();\n\n      if (tools.uCanDo(setting)) {\n        doc.bind(\"mousemove\", _docMouseMove);\n      }\n\n      function _docMouseMove(event) {\n        //avoid start drag after click node\n        if (root.dragFlag == 0 && Math.abs(mouseDownX - event.clientX) < setting.edit.drag.minMoveSize && Math.abs(mouseDownY - event.clientY) < setting.edit.drag.minMoveSize) {\n          return true;\n        }\n\n        var i,\n            l,\n            tmpNode,\n            tmpDom,\n            tmpNodes,\n            childKey = setting.data.key.children;\n        body.css(\"cursor\", \"pointer\");\n\n        if (root.dragFlag == 0) {\n          if (tools.apply(setting.callback.beforeDrag, [setting.treeId, nodes], true) == false) {\n            _docMouseUp(event);\n\n            return true;\n          }\n\n          for (i = 0, l = nodes.length; i < l; i++) {\n            if (i == 0) {\n              root.dragNodeShowBefore = [];\n            }\n\n            tmpNode = nodes[i];\n\n            if (tmpNode.isParent && tmpNode.open) {\n              view.expandCollapseNode(setting, tmpNode, !tmpNode.open);\n              root.dragNodeShowBefore[tmpNode.tId] = true;\n            } else {\n              root.dragNodeShowBefore[tmpNode.tId] = false;\n            }\n          }\n\n          root.dragFlag = 1;\n          roots.showHoverDom = false;\n          tools.showIfameMask(setting, true); //sort\n\n          var isOrder = true,\n              lastIndex = -1;\n\n          if (nodes.length > 1) {\n            var pNodes = nodes[0].parentTId ? nodes[0].getParentNode()[childKey] : data.getNodes(setting);\n            tmpNodes = [];\n\n            for (i = 0, l = pNodes.length; i < l; i++) {\n              if (root.dragNodeShowBefore[pNodes[i].tId] !== undefined) {\n                if (isOrder && lastIndex > -1 && lastIndex + 1 !== i) {\n                  isOrder = false;\n                }\n\n                tmpNodes.push(pNodes[i]);\n                lastIndex = i;\n              }\n\n              if (nodes.length === tmpNodes.length) {\n                nodes = tmpNodes;\n                break;\n              }\n            }\n          }\n\n          if (isOrder) {\n            preNode = nodes[0].getPreNode();\n            nextNode = nodes[nodes.length - 1].getNextNode();\n          } //set node in selected\n\n\n          curNode = $$(\"<ul class='zTreeDragUL'></ul>\", setting);\n\n          for (i = 0, l = nodes.length; i < l; i++) {\n            tmpNode = nodes[i];\n            tmpNode.editNameFlag = false;\n            view.selectNode(setting, tmpNode, i > 0);\n            view.removeTreeDom(setting, tmpNode);\n\n            if (i > setting.edit.drag.maxShowNodeNum - 1) {\n              continue;\n            }\n\n            tmpDom = $$(\"<li id='\" + tmpNode.tId + \"_tmp'></li>\", setting);\n            tmpDom.append($$(tmpNode, consts.id.A, setting).clone());\n            tmpDom.css(\"padding\", \"0\");\n            tmpDom.children(\"#\" + tmpNode.tId + consts.id.A).removeClass(consts.node.CURSELECTED);\n            curNode.append(tmpDom);\n\n            if (i == setting.edit.drag.maxShowNodeNum - 1) {\n              tmpDom = $$(\"<li id='\" + tmpNode.tId + \"_moretmp'><a>  ...  </a></li>\", setting);\n              curNode.append(tmpDom);\n            }\n          }\n\n          curNode.attr(\"id\", nodes[0].tId + consts.id.UL + \"_tmp\");\n          curNode.addClass(setting.treeObj.attr(\"class\"));\n          curNode.appendTo(body);\n          tmpArrow = $$(\"<span class='tmpzTreeMove_arrow'></span>\", setting);\n          tmpArrow.attr(\"id\", \"zTreeMove_arrow_tmp\");\n          tmpArrow.appendTo(body);\n          setting.treeObj.trigger(consts.event.DRAG, [event, setting.treeId, nodes]);\n        }\n\n        if (root.dragFlag == 1) {\n          if (tmpTarget && tmpArrow.attr(\"id\") == event.target.id && tmpTargetNodeId && event.clientX + doc.scrollLeft() + 2 > $(\"#\" + tmpTargetNodeId + consts.id.A, tmpTarget).offset().left) {\n            var xT = $(\"#\" + tmpTargetNodeId + consts.id.A, tmpTarget);\n            event.target = xT.length > 0 ? xT.get(0) : event.target;\n          } else if (tmpTarget) {\n            tmpTarget.removeClass(consts.node.TMPTARGET_TREE);\n            if (tmpTargetNodeId) $(\"#\" + tmpTargetNodeId + consts.id.A, tmpTarget).removeClass(consts.node.TMPTARGET_NODE + \"_\" + consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE + \"_\" + _consts.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE + \"_\" + _consts.move.TYPE_INNER);\n          }\n\n          tmpTarget = null;\n          tmpTargetNodeId = null; //judge drag & drop in multi ztree\n\n          isOtherTree = false;\n          targetSetting = setting;\n          var settings = data.getSettings();\n\n          for (var s in settings) {\n            if (settings[s].treeId && settings[s].edit.enable && settings[s].treeId != setting.treeId && (event.target.id == settings[s].treeId || $(event.target).parents(\"#\" + settings[s].treeId).length > 0)) {\n              isOtherTree = true;\n              targetSetting = settings[s];\n            }\n          }\n\n          var docScrollTop = doc.scrollTop(),\n              docScrollLeft = doc.scrollLeft(),\n              treeOffset = targetSetting.treeObj.offset(),\n              scrollHeight = targetSetting.treeObj.get(0).scrollHeight,\n              scrollWidth = targetSetting.treeObj.get(0).scrollWidth,\n              dTop = event.clientY + docScrollTop - treeOffset.top,\n              dBottom = targetSetting.treeObj.height() + treeOffset.top - event.clientY - docScrollTop,\n              dLeft = event.clientX + docScrollLeft - treeOffset.left,\n              dRight = targetSetting.treeObj.width() + treeOffset.left - event.clientX - docScrollLeft,\n              isTop = dTop < setting.edit.drag.borderMax && dTop > setting.edit.drag.borderMin,\n              isBottom = dBottom < setting.edit.drag.borderMax && dBottom > setting.edit.drag.borderMin,\n              isLeft = dLeft < setting.edit.drag.borderMax && dLeft > setting.edit.drag.borderMin,\n              isRight = dRight < setting.edit.drag.borderMax && dRight > setting.edit.drag.borderMin,\n              isTreeInner = dTop > setting.edit.drag.borderMin && dBottom > setting.edit.drag.borderMin && dLeft > setting.edit.drag.borderMin && dRight > setting.edit.drag.borderMin,\n              isTreeTop = isTop && targetSetting.treeObj.scrollTop() <= 0,\n              isTreeBottom = isBottom && targetSetting.treeObj.scrollTop() + targetSetting.treeObj.height() + 10 >= scrollHeight,\n              isTreeLeft = isLeft && targetSetting.treeObj.scrollLeft() <= 0,\n              isTreeRight = isRight && targetSetting.treeObj.scrollLeft() + targetSetting.treeObj.width() + 10 >= scrollWidth;\n\n          if (event.target && tools.isChildOrSelf(event.target, targetSetting.treeId)) {\n            //get node <li> dom\n            var targetObj = event.target;\n\n            while (targetObj && targetObj.tagName && !tools.eqs(targetObj.tagName, \"li\") && targetObj.id != targetSetting.treeId) {\n              targetObj = targetObj.parentNode;\n            }\n\n            var canMove = true; //don't move to self or children of self\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n              tmpNode = nodes[i];\n\n              if (targetObj.id === tmpNode.tId) {\n                canMove = false;\n                break;\n              } else if ($$(tmpNode, setting).find(\"#\" + targetObj.id).length > 0) {\n                canMove = false;\n                break;\n              }\n            }\n\n            if (canMove && event.target && tools.isChildOrSelf(event.target, targetObj.id + consts.id.A)) {\n              tmpTarget = $(targetObj);\n              tmpTargetNodeId = targetObj.id;\n            }\n          } //the mouse must be in zTree\n\n\n          tmpNode = nodes[0];\n\n          if (isTreeInner && tools.isChildOrSelf(event.target, targetSetting.treeId)) {\n            //judge mouse move in root of ztree\n            if (!tmpTarget && (event.target.id == targetSetting.treeId || isTreeTop || isTreeBottom || isTreeLeft || isTreeRight) && (isOtherTree || !isOtherTree && tmpNode.parentTId)) {\n              tmpTarget = targetSetting.treeObj;\n            } //auto scroll top\n\n\n            if (isTop) {\n              targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop() - 10);\n            } else if (isBottom) {\n              targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop() + 10);\n            }\n\n            if (isLeft) {\n              targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft() - 10);\n            } else if (isRight) {\n              targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft() + 10);\n            } //auto scroll left\n\n\n            if (tmpTarget && tmpTarget != targetSetting.treeObj && tmpTarget.offset().left < targetSetting.treeObj.offset().left) {\n              targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft() + tmpTarget.offset().left - targetSetting.treeObj.offset().left);\n            }\n          }\n\n          curNode.css({\n            \"top\": event.clientY + docScrollTop + 3 + \"px\",\n            \"left\": event.clientX + docScrollLeft + 3 + \"px\"\n          });\n          var dX = 0;\n          var dY = 0;\n\n          if (tmpTarget && tmpTarget.attr(\"id\") != targetSetting.treeId) {\n            var clearMove = function clearMove() {\n              tmpTarget = null;\n              tmpTargetNodeId = \"\";\n              moveType = consts.move.TYPE_INNER;\n              tmpArrow.css({\n                \"display\": \"none\"\n              });\n\n              if (window.zTreeMoveTimer) {\n                clearTimeout(window.zTreeMoveTimer);\n                window.zTreeMoveTargetNodeTId = null;\n              }\n            };\n\n            var tmpTargetNode = tmpTargetNodeId == null ? null : data.getNodeCache(targetSetting, tmpTargetNodeId),\n                isCopy = (event.ctrlKey || event.metaKey) && setting.edit.drag.isMove && setting.edit.drag.isCopy || !setting.edit.drag.isMove && setting.edit.drag.isCopy,\n                isPrev = !!(preNode && tmpTargetNodeId === preNode.tId),\n                isNext = !!(nextNode && tmpTargetNodeId === nextNode.tId),\n                isInner = tmpNode.parentTId && tmpNode.parentTId == tmpTargetNodeId,\n                canPrev = (isCopy || !isNext) && tools.apply(targetSetting.edit.drag.prev, [targetSetting.treeId, nodes, tmpTargetNode], !!targetSetting.edit.drag.prev),\n                canNext = (isCopy || !isPrev) && tools.apply(targetSetting.edit.drag.next, [targetSetting.treeId, nodes, tmpTargetNode], !!targetSetting.edit.drag.next),\n                canInner = (isCopy || !isInner) && !(targetSetting.data.keep.leaf && !tmpTargetNode.isParent) && tools.apply(targetSetting.edit.drag.inner, [targetSetting.treeId, nodes, tmpTargetNode], !!targetSetting.edit.drag.inner);\n\n            if (!canPrev && !canNext && !canInner) {\n              clearMove();\n            } else {\n              var tmpTargetA = $(\"#\" + tmpTargetNodeId + consts.id.A, tmpTarget),\n                  tmpNextA = tmpTargetNode.isLastNode ? null : $(\"#\" + tmpTargetNode.getNextNode().tId + consts.id.A, tmpTarget.next()),\n                  tmpTop = tmpTargetA.offset().top,\n                  tmpLeft = tmpTargetA.offset().left,\n                  prevPercent = canPrev ? canInner ? 0.25 : canNext ? 0.5 : 1 : -1,\n                  nextPercent = canNext ? canInner ? 0.75 : canPrev ? 0.5 : 0 : -1,\n                  dY_percent = (event.clientY + docScrollTop - tmpTop) / tmpTargetA.height();\n\n              if ((prevPercent == 1 || dY_percent <= prevPercent && dY_percent >= -.2) && canPrev) {\n                dX = 1 - tmpArrow.width();\n                dY = tmpTop - tmpArrow.height() / 2;\n                moveType = consts.move.TYPE_PREV;\n              } else if ((nextPercent == 0 || dY_percent >= nextPercent && dY_percent <= 1.2) && canNext) {\n                dX = 1 - tmpArrow.width();\n                dY = tmpNextA == null || tmpTargetNode.isParent && tmpTargetNode.open ? tmpTop + tmpTargetA.height() - tmpArrow.height() / 2 : tmpNextA.offset().top - tmpArrow.height() / 2;\n                moveType = consts.move.TYPE_NEXT;\n              } else if (canInner) {\n                dX = 5 - tmpArrow.width();\n                dY = tmpTop;\n                moveType = consts.move.TYPE_INNER;\n              } else {\n                clearMove();\n              }\n\n              if (tmpTarget) {\n                tmpArrow.css({\n                  \"display\": \"block\",\n                  \"top\": dY + \"px\",\n                  \"left\": tmpLeft + dX + \"px\"\n                });\n                tmpTargetA.addClass(consts.node.TMPTARGET_NODE + \"_\" + moveType);\n\n                if (preTmpTargetNodeId != tmpTargetNodeId || preTmpMoveType != moveType) {\n                  startTime = new Date().getTime();\n                }\n\n                if (tmpTargetNode && tmpTargetNode.isParent && moveType == consts.move.TYPE_INNER) {\n                  var startTimer = true;\n\n                  if (window.zTreeMoveTimer && window.zTreeMoveTargetNodeTId !== tmpTargetNode.tId) {\n                    clearTimeout(window.zTreeMoveTimer);\n                    window.zTreeMoveTargetNodeTId = null;\n                  } else if (window.zTreeMoveTimer && window.zTreeMoveTargetNodeTId === tmpTargetNode.tId) {\n                    startTimer = false;\n                  }\n\n                  if (startTimer) {\n                    window.zTreeMoveTimer = setTimeout(function () {\n                      if (moveType != consts.move.TYPE_INNER) return;\n\n                      if (tmpTargetNode && tmpTargetNode.isParent && !tmpTargetNode.open && new Date().getTime() - startTime > targetSetting.edit.drag.autoOpenTime && tools.apply(targetSetting.callback.beforeDragOpen, [targetSetting.treeId, tmpTargetNode], true)) {\n                        view.switchNode(targetSetting, tmpTargetNode);\n\n                        if (targetSetting.edit.drag.autoExpandTrigger) {\n                          targetSetting.treeObj.trigger(consts.event.EXPAND, [targetSetting.treeId, tmpTargetNode]);\n                        }\n                      }\n                    }, targetSetting.edit.drag.autoOpenTime + 50);\n                    window.zTreeMoveTargetNodeTId = tmpTargetNode.tId;\n                  }\n                }\n              }\n            }\n          } else {\n            moveType = consts.move.TYPE_INNER;\n\n            if (tmpTarget && tools.apply(targetSetting.edit.drag.inner, [targetSetting.treeId, nodes, null], !!targetSetting.edit.drag.inner)) {\n              tmpTarget.addClass(consts.node.TMPTARGET_TREE);\n            } else {\n              tmpTarget = null;\n            }\n\n            tmpArrow.css({\n              \"display\": \"none\"\n            });\n\n            if (window.zTreeMoveTimer) {\n              clearTimeout(window.zTreeMoveTimer);\n              window.zTreeMoveTargetNodeTId = null;\n            }\n          }\n\n          preTmpTargetNodeId = tmpTargetNodeId;\n          preTmpMoveType = moveType;\n          setting.treeObj.trigger(consts.event.DRAGMOVE, [event, setting.treeId, nodes]);\n        }\n\n        return false;\n      }\n\n      doc.bind(\"mouseup\", _docMouseUp);\n\n      function _docMouseUp(event) {\n        if (window.zTreeMoveTimer) {\n          clearTimeout(window.zTreeMoveTimer);\n          window.zTreeMoveTargetNodeTId = null;\n        }\n\n        preTmpTargetNodeId = null;\n        preTmpMoveType = null;\n        doc.unbind(\"mousemove\", _docMouseMove);\n        doc.unbind(\"mouseup\", _docMouseUp);\n        doc.unbind(\"selectstart\", _docSelect);\n        body.css(\"cursor\", \"auto\");\n\n        if (tmpTarget) {\n          tmpTarget.removeClass(consts.node.TMPTARGET_TREE);\n          if (tmpTargetNodeId) $(\"#\" + tmpTargetNodeId + consts.id.A, tmpTarget).removeClass(consts.node.TMPTARGET_NODE + \"_\" + consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE + \"_\" + _consts.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE + \"_\" + _consts.move.TYPE_INNER);\n        }\n\n        tools.showIfameMask(setting, false);\n        roots.showHoverDom = true;\n        if (root.dragFlag == 0) return;\n        root.dragFlag = 0;\n        var i, l, tmpNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n          tmpNode = nodes[i];\n\n          if (tmpNode.isParent && root.dragNodeShowBefore[tmpNode.tId] && !tmpNode.open) {\n            view.expandCollapseNode(setting, tmpNode, !tmpNode.open);\n            delete root.dragNodeShowBefore[tmpNode.tId];\n          }\n        }\n\n        if (curNode) curNode.remove();\n        if (tmpArrow) tmpArrow.remove();\n        var isCopy = (event.ctrlKey || event.metaKey) && setting.edit.drag.isMove && setting.edit.drag.isCopy || !setting.edit.drag.isMove && setting.edit.drag.isCopy;\n\n        if (!isCopy && tmpTarget && tmpTargetNodeId && nodes[0].parentTId && tmpTargetNodeId == nodes[0].parentTId && moveType == consts.move.TYPE_INNER) {\n          tmpTarget = null;\n        }\n\n        if (tmpTarget) {\n          var dropCallback = function dropCallback() {\n            if (isOtherTree) {\n              if (!isCopy) {\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                  view.removeNode(setting, nodes[i]);\n                }\n              }\n\n              if (moveType == consts.move.TYPE_INNER) {\n                view.addNodes(targetSetting, dragTargetNode, -1, newNodes);\n              } else {\n                view.addNodes(targetSetting, dragTargetNode.getParentNode(), moveType == consts.move.TYPE_PREV ? dragTargetNode.getIndex() : dragTargetNode.getIndex() + 1, newNodes);\n              }\n            } else {\n              if (isCopy && moveType == consts.move.TYPE_INNER) {\n                view.addNodes(targetSetting, dragTargetNode, -1, newNodes);\n              } else if (isCopy) {\n                view.addNodes(targetSetting, dragTargetNode.getParentNode(), moveType == consts.move.TYPE_PREV ? dragTargetNode.getIndex() : dragTargetNode.getIndex() + 1, newNodes);\n              } else {\n                if (moveType != consts.move.TYPE_NEXT) {\n                  for (i = 0, l = newNodes.length; i < l; i++) {\n                    view.moveNode(targetSetting, dragTargetNode, newNodes[i], moveType, false);\n                  }\n                } else {\n                  for (i = -1, l = newNodes.length - 1; i < l; l--) {\n                    view.moveNode(targetSetting, dragTargetNode, newNodes[l], moveType, false);\n                  }\n                }\n              }\n            }\n\n            view.selectNodes(targetSetting, newNodes);\n            var a = $$(newNodes[0], setting).get(0);\n            view.scrollIntoView(a);\n            setting.treeObj.trigger(consts.event.DROP, [event, targetSetting.treeId, newNodes, dragTargetNode, moveType, isCopy]);\n          };\n\n          var dragTargetNode = tmpTargetNodeId == null ? null : data.getNodeCache(targetSetting, tmpTargetNodeId);\n\n          if (tools.apply(setting.callback.beforeDrop, [targetSetting.treeId, nodes, dragTargetNode, moveType, isCopy], true) == false) {\n            view.selectNodes(sourceSetting, nodes);\n            return;\n          }\n\n          var newNodes = isCopy ? tools.clone(nodes) : nodes;\n\n          if (moveType == consts.move.TYPE_INNER && tools.canAsync(targetSetting, dragTargetNode)) {\n            view.asyncNode(targetSetting, dragTargetNode, false, dropCallback);\n          } else {\n            dropCallback();\n          }\n        } else {\n          view.selectNodes(sourceSetting, nodes);\n          setting.treeObj.trigger(consts.event.DROP, [event, setting.treeId, nodes, null, null, null]);\n        }\n      }\n\n      doc.bind(\"selectstart\", _docSelect);\n\n      function _docSelect() {\n        return false;\n      } //Avoid FireFox's Bug\n      //If zTree Div CSS set 'overflow', so drag node outside of zTree, and event.target is error.\n\n\n      if (eventMouseDown.preventDefault) {\n        eventMouseDown.preventDefault();\n      }\n\n      return true;\n    }\n  },\n      //method of tools for zTree\n  _tools = {\n    getAbs: function getAbs(obj) {\n      var oRect = obj.getBoundingClientRect(),\n          scrollTop = document.body.scrollTop + document.documentElement.scrollTop,\n          scrollLeft = document.body.scrollLeft + document.documentElement.scrollLeft;\n      return [oRect.left + scrollLeft, oRect.top + scrollTop];\n    },\n    inputFocus: function inputFocus(inputObj) {\n      if (inputObj.get(0)) {\n        inputObj.focus();\n        tools.setCursorPosition(inputObj.get(0), inputObj.val().length);\n      }\n    },\n    inputSelect: function inputSelect(inputObj) {\n      if (inputObj.get(0)) {\n        inputObj.focus();\n        inputObj.select();\n      }\n    },\n    setCursorPosition: function setCursorPosition(obj, pos) {\n      if (obj.setSelectionRange) {\n        obj.focus();\n        obj.setSelectionRange(pos, pos);\n      } else if (obj.createTextRange) {\n        var range = obj.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', pos);\n        range.moveStart('character', pos);\n        range.select();\n      }\n    },\n    showIfameMask: function showIfameMask(setting, showSign) {\n      var root = data.getRoot(setting); //clear full mask\n\n      while (root.dragMaskList.length > 0) {\n        root.dragMaskList[0].remove();\n        root.dragMaskList.shift();\n      }\n\n      if (showSign) {\n        //show mask\n        var iframeList = $$(\"iframe\", setting);\n\n        for (var i = 0, l = iframeList.length; i < l; i++) {\n          var obj = iframeList.get(i),\n              r = tools.getAbs(obj),\n              dragMask = $$(\"<div id='zTreeMask_\" + i + \"' class='zTreeMask' style='top:\" + r[1] + \"px; left:\" + r[0] + \"px; width:\" + obj.offsetWidth + \"px; height:\" + obj.offsetHeight + \"px;'></div>\", setting);\n          dragMask.appendTo($$(\"body\", setting));\n          root.dragMaskList.push(dragMask);\n        }\n      }\n    }\n  },\n      //method of operate ztree dom\n  _view = {\n    addEditBtn: function addEditBtn(setting, node) {\n      if (node.editNameFlag || $$(node, consts.id.EDIT, setting).length > 0) {\n        return;\n      }\n\n      if (!tools.apply(setting.edit.showRenameBtn, [setting.treeId, node], setting.edit.showRenameBtn)) {\n        return;\n      }\n\n      var aObj = $$(node, consts.id.A, setting),\n          editStr = \"<span class='\" + consts.className.BUTTON + \" edit' id='\" + node.tId + consts.id.EDIT + \"' title='\" + tools.apply(setting.edit.renameTitle, [setting.treeId, node], setting.edit.renameTitle) + \"' treeNode\" + consts.id.EDIT + \" style='display:none;'></span>\";\n      aObj.append(editStr);\n      $$(node, consts.id.EDIT, setting).bind('click', function () {\n        if (!tools.uCanDo(setting) || tools.apply(setting.callback.beforeEditName, [setting.treeId, node], true) == false) return false;\n        view.editNode(setting, node);\n        return false;\n      }).show();\n    },\n    addRemoveBtn: function addRemoveBtn(setting, node) {\n      if (node.editNameFlag || $$(node, consts.id.REMOVE, setting).length > 0) {\n        return;\n      }\n\n      if (!tools.apply(setting.edit.showRemoveBtn, [setting.treeId, node], setting.edit.showRemoveBtn)) {\n        return;\n      }\n\n      var aObj = $$(node, consts.id.A, setting),\n          removeStr = \"<span class='\" + consts.className.BUTTON + \" remove' id='\" + node.tId + consts.id.REMOVE + \"' title='\" + tools.apply(setting.edit.removeTitle, [setting.treeId, node], setting.edit.removeTitle) + \"' treeNode\" + consts.id.REMOVE + \" style='display:none;'></span>\";\n      aObj.append(removeStr);\n      $$(node, consts.id.REMOVE, setting).bind('click', function () {\n        if (!tools.uCanDo(setting) || tools.apply(setting.callback.beforeRemove, [setting.treeId, node], true) == false) return false;\n        view.removeNode(setting, node);\n        setting.treeObj.trigger(consts.event.REMOVE, [setting.treeId, node]);\n        return false;\n      }).bind('mousedown', function (eventMouseDown) {\n        return true;\n      }).show();\n    },\n    addHoverDom: function addHoverDom(setting, node) {\n      if (data.getRoots().showHoverDom) {\n        node.isHover = true;\n\n        if (setting.edit.enable) {\n          view.addEditBtn(setting, node);\n          view.addRemoveBtn(setting, node);\n        }\n\n        tools.apply(setting.view.addHoverDom, [setting.treeId, node]);\n      }\n    },\n    cancelCurEditNode: function cancelCurEditNode(setting, forceName, isCancel) {\n      var root = data.getRoot(setting),\n          nameKey = setting.data.key.name,\n          node = root.curEditNode;\n\n      if (node) {\n        var inputObj = root.curEditInput,\n            newName = forceName ? forceName : isCancel ? node[nameKey] : inputObj.val();\n\n        if (tools.apply(setting.callback.beforeRename, [setting.treeId, node, newName, isCancel], true) === false) {\n          return false;\n        }\n\n        node[nameKey] = newName;\n        var aObj = $$(node, consts.id.A, setting);\n        aObj.removeClass(consts.node.CURSELECTED_EDIT);\n        inputObj.unbind();\n        view.setNodeName(setting, node);\n        node.editNameFlag = false;\n        root.curEditNode = null;\n        root.curEditInput = null;\n        view.selectNode(setting, node, false);\n        setting.treeObj.trigger(consts.event.RENAME, [setting.treeId, node, isCancel]);\n      }\n\n      root.noSelection = true;\n      return true;\n    },\n    editNode: function editNode(setting, node) {\n      var root = data.getRoot(setting);\n      view.editNodeBlur = false;\n\n      if (data.isSelectedNode(setting, node) && root.curEditNode == node && node.editNameFlag) {\n        setTimeout(function () {\n          tools.inputFocus(root.curEditInput);\n        }, 0);\n        return;\n      }\n\n      var nameKey = setting.data.key.name;\n      node.editNameFlag = true;\n      view.removeTreeDom(setting, node);\n      view.cancelCurEditNode(setting);\n      view.selectNode(setting, node, false);\n      $$(node, consts.id.SPAN, setting).html(\"<input type=text class='rename' id='\" + node.tId + consts.id.INPUT + \"' treeNode\" + consts.id.INPUT + \" >\");\n      var inputObj = $$(node, consts.id.INPUT, setting);\n      inputObj.attr(\"value\", node[nameKey]);\n\n      if (setting.edit.editNameSelectAll) {\n        tools.inputSelect(inputObj);\n      } else {\n        tools.inputFocus(inputObj);\n      }\n\n      inputObj.bind('blur', function (event) {\n        if (!view.editNodeBlur) {\n          view.cancelCurEditNode(setting);\n        }\n      }).bind('keydown', function (event) {\n        if (event.keyCode == \"13\") {\n          view.editNodeBlur = true;\n          view.cancelCurEditNode(setting);\n        } else if (event.keyCode == \"27\") {\n          view.cancelCurEditNode(setting, null, true);\n        }\n      }).bind('click', function (event) {\n        return false;\n      }).bind('dblclick', function (event) {\n        return false;\n      });\n      $$(node, consts.id.A, setting).addClass(consts.node.CURSELECTED_EDIT);\n      root.curEditInput = inputObj;\n      root.noSelection = false;\n      root.curEditNode = node;\n    },\n    moveNode: function moveNode(setting, targetNode, node, moveType, animateFlag, isSilent) {\n      var root = data.getRoot(setting),\n          childKey = setting.data.key.children;\n      if (targetNode == node) return;\n      if (setting.data.keep.leaf && targetNode && !targetNode.isParent && moveType == consts.move.TYPE_INNER) return;\n      var oldParentNode = node.parentTId ? node.getParentNode() : root,\n          targetNodeIsRoot = targetNode === null || targetNode == root;\n      if (targetNodeIsRoot && targetNode === null) targetNode = root;\n      if (targetNodeIsRoot) moveType = consts.move.TYPE_INNER;\n      var targetParentNode = targetNode.parentTId ? targetNode.getParentNode() : root;\n\n      if (moveType != consts.move.TYPE_PREV && moveType != consts.move.TYPE_NEXT) {\n        moveType = consts.move.TYPE_INNER;\n      }\n\n      if (moveType == consts.move.TYPE_INNER) {\n        if (targetNodeIsRoot) {\n          //parentTId of root node is null\n          node.parentTId = null;\n        } else {\n          if (!targetNode.isParent) {\n            targetNode.isParent = true;\n            targetNode.open = !!targetNode.open;\n            view.setNodeLineIcos(setting, targetNode);\n          }\n\n          node.parentTId = targetNode.tId;\n        }\n      } //move node Dom\n\n\n      var targetObj, target_ulObj;\n\n      if (targetNodeIsRoot) {\n        targetObj = setting.treeObj;\n        target_ulObj = targetObj;\n      } else {\n        if (!isSilent && moveType == consts.move.TYPE_INNER) {\n          view.expandCollapseNode(setting, targetNode, true, false);\n        } else if (!isSilent) {\n          view.expandCollapseNode(setting, targetNode.getParentNode(), true, false);\n        }\n\n        targetObj = $$(targetNode, setting);\n        target_ulObj = $$(targetNode, consts.id.UL, setting);\n\n        if (!!targetObj.get(0) && !target_ulObj.get(0)) {\n          var ulstr = [];\n          view.makeUlHtml(setting, targetNode, ulstr, '');\n          targetObj.append(ulstr.join(''));\n        }\n\n        target_ulObj = $$(targetNode, consts.id.UL, setting);\n      }\n\n      var nodeDom = $$(node, setting);\n\n      if (!nodeDom.get(0)) {\n        nodeDom = view.appendNodes(setting, node.level, [node], null, -1, false, true).join('');\n      } else if (!targetObj.get(0)) {\n        nodeDom.remove();\n      }\n\n      if (target_ulObj.get(0) && moveType == consts.move.TYPE_INNER) {\n        target_ulObj.append(nodeDom);\n      } else if (targetObj.get(0) && moveType == consts.move.TYPE_PREV) {\n        targetObj.before(nodeDom);\n      } else if (targetObj.get(0) && moveType == consts.move.TYPE_NEXT) {\n        targetObj.after(nodeDom);\n      } //repair the data after move\n\n\n      var i,\n          l,\n          tmpSrcIndex = -1,\n          tmpTargetIndex = 0,\n          oldNeighbor = null,\n          newNeighbor = null,\n          oldLevel = node.level;\n\n      if (node.isFirstNode) {\n        tmpSrcIndex = 0;\n\n        if (oldParentNode[childKey].length > 1) {\n          oldNeighbor = oldParentNode[childKey][1];\n          oldNeighbor.isFirstNode = true;\n        }\n      } else if (node.isLastNode) {\n        tmpSrcIndex = oldParentNode[childKey].length - 1;\n        oldNeighbor = oldParentNode[childKey][tmpSrcIndex - 1];\n        oldNeighbor.isLastNode = true;\n      } else {\n        for (i = 0, l = oldParentNode[childKey].length; i < l; i++) {\n          if (oldParentNode[childKey][i].tId == node.tId) {\n            tmpSrcIndex = i;\n            break;\n          }\n        }\n      }\n\n      if (tmpSrcIndex >= 0) {\n        oldParentNode[childKey].splice(tmpSrcIndex, 1);\n      }\n\n      if (moveType != consts.move.TYPE_INNER) {\n        for (i = 0, l = targetParentNode[childKey].length; i < l; i++) {\n          if (targetParentNode[childKey][i].tId == targetNode.tId) tmpTargetIndex = i;\n        }\n      }\n\n      if (moveType == consts.move.TYPE_INNER) {\n        if (!targetNode[childKey]) targetNode[childKey] = new Array();\n\n        if (targetNode[childKey].length > 0) {\n          newNeighbor = targetNode[childKey][targetNode[childKey].length - 1];\n          newNeighbor.isLastNode = false;\n        }\n\n        targetNode[childKey].splice(targetNode[childKey].length, 0, node);\n        node.isLastNode = true;\n        node.isFirstNode = targetNode[childKey].length == 1;\n      } else if (targetNode.isFirstNode && moveType == consts.move.TYPE_PREV) {\n        targetParentNode[childKey].splice(tmpTargetIndex, 0, node);\n        newNeighbor = targetNode;\n        newNeighbor.isFirstNode = false;\n        node.parentTId = targetNode.parentTId;\n        node.isFirstNode = true;\n        node.isLastNode = false;\n      } else if (targetNode.isLastNode && moveType == consts.move.TYPE_NEXT) {\n        targetParentNode[childKey].splice(tmpTargetIndex + 1, 0, node);\n        newNeighbor = targetNode;\n        newNeighbor.isLastNode = false;\n        node.parentTId = targetNode.parentTId;\n        node.isFirstNode = false;\n        node.isLastNode = true;\n      } else {\n        if (moveType == consts.move.TYPE_PREV) {\n          targetParentNode[childKey].splice(tmpTargetIndex, 0, node);\n        } else {\n          targetParentNode[childKey].splice(tmpTargetIndex + 1, 0, node);\n        }\n\n        node.parentTId = targetNode.parentTId;\n        node.isFirstNode = false;\n        node.isLastNode = false;\n      }\n\n      data.fixPIdKeyValue(setting, node);\n      data.setSonNodeLevel(setting, node.getParentNode(), node); //repair node what been moved\n\n      view.setNodeLineIcos(setting, node);\n      view.repairNodeLevelClass(setting, node, oldLevel); //repair node's old parentNode dom\n\n      if (!setting.data.keep.parent && oldParentNode[childKey].length < 1) {\n        //old parentNode has no child nodes\n        oldParentNode.isParent = false;\n        oldParentNode.open = false;\n        var tmp_ulObj = $$(oldParentNode, consts.id.UL, setting),\n            tmp_switchObj = $$(oldParentNode, consts.id.SWITCH, setting),\n            tmp_icoObj = $$(oldParentNode, consts.id.ICON, setting);\n        view.replaceSwitchClass(oldParentNode, tmp_switchObj, consts.folder.DOCU);\n        view.replaceIcoClass(oldParentNode, tmp_icoObj, consts.folder.DOCU);\n        tmp_ulObj.css(\"display\", \"none\");\n      } else if (oldNeighbor) {\n        //old neigbor node\n        view.setNodeLineIcos(setting, oldNeighbor);\n      } //new neigbor node\n\n\n      if (newNeighbor) {\n        view.setNodeLineIcos(setting, newNeighbor);\n      } //repair checkbox / radio\n\n\n      if (!!setting.check && setting.check.enable && view.repairChkClass) {\n        view.repairChkClass(setting, oldParentNode);\n        view.repairParentChkClassWithSelf(setting, oldParentNode);\n        if (oldParentNode != node.parent) view.repairParentChkClassWithSelf(setting, node);\n      } //expand parents after move\n\n\n      if (!isSilent) {\n        view.expandCollapseParentNode(setting, node.getParentNode(), true, animateFlag);\n      }\n    },\n    removeEditBtn: function removeEditBtn(setting, node) {\n      $$(node, consts.id.EDIT, setting).unbind().remove();\n    },\n    removeRemoveBtn: function removeRemoveBtn(setting, node) {\n      $$(node, consts.id.REMOVE, setting).unbind().remove();\n    },\n    removeTreeDom: function removeTreeDom(setting, node) {\n      node.isHover = false;\n      view.removeEditBtn(setting, node);\n      view.removeRemoveBtn(setting, node);\n      tools.apply(setting.view.removeHoverDom, [setting.treeId, node]);\n    },\n    repairNodeLevelClass: function repairNodeLevelClass(setting, node, oldLevel) {\n      if (oldLevel === node.level) return;\n      var liObj = $$(node, setting),\n          aObj = $$(node, consts.id.A, setting),\n          ulObj = $$(node, consts.id.UL, setting),\n          oldClass = consts.className.LEVEL + oldLevel,\n          newClass = consts.className.LEVEL + node.level;\n      liObj.removeClass(oldClass);\n      liObj.addClass(newClass);\n      aObj.removeClass(oldClass);\n      aObj.addClass(newClass);\n      ulObj.removeClass(oldClass);\n      ulObj.addClass(newClass);\n    },\n    selectNodes: function selectNodes(setting, nodes) {\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        view.selectNode(setting, nodes[i], i > 0);\n      }\n    }\n  },\n      _z = {\n    tools: _tools,\n    view: _view,\n    event: _event,\n    data: _data\n  };\n\n  $.extend(true, $.fn.zTree.consts, _consts);\n  $.extend(true, $.fn.zTree._z, _z);\n  var zt = $.fn.zTree,\n      tools = zt._z.tools,\n      consts = zt.consts,\n      view = zt._z.view,\n      data = zt._z.data,\n      event = zt._z.event,\n      $$ = tools.$;\n  data.exSetting(_setting);\n  data.addInitBind(_bindEvent);\n  data.addInitUnBind(_unbindEvent);\n  data.addInitCache(_initCache);\n  data.addInitNode(_initNode);\n  data.addInitProxy(_eventProxy);\n  data.addInitRoot(_initRoot);\n  data.addZTreeTools(_zTreeTools);\n  var _cancelPreSelectedNode = view.cancelPreSelectedNode;\n\n  view.cancelPreSelectedNode = function (setting, node) {\n    var list = data.getRoot(setting).curSelectedList;\n\n    for (var i = 0, j = list.length; i < j; i++) {\n      if (!node || node === list[i]) {\n        view.removeTreeDom(setting, list[i]);\n        if (node) break;\n      }\n    }\n\n    if (_cancelPreSelectedNode) _cancelPreSelectedNode.apply(view, arguments);\n  };\n\n  var _createNodes = view.createNodes;\n\n  view.createNodes = function (setting, level, nodes, parentNode, index) {\n    if (_createNodes) {\n      _createNodes.apply(view, arguments);\n    }\n\n    if (!nodes) return;\n\n    if (view.repairParentChkClassWithSelf) {\n      view.repairParentChkClassWithSelf(setting, parentNode);\n    }\n  };\n\n  var _makeNodeUrl = view.makeNodeUrl;\n\n  view.makeNodeUrl = function (setting, node) {\n    return setting.edit.enable ? null : _makeNodeUrl.apply(view, arguments);\n  };\n\n  var _removeNode = view.removeNode;\n\n  view.removeNode = function (setting, node) {\n    var root = data.getRoot(setting);\n    if (root.curEditNode === node) root.curEditNode = null;\n\n    if (_removeNode) {\n      _removeNode.apply(view, arguments);\n    }\n  };\n\n  var _selectNode = view.selectNode;\n\n  view.selectNode = function (setting, node, addFlag) {\n    var root = data.getRoot(setting);\n\n    if (data.isSelectedNode(setting, node) && root.curEditNode == node && node.editNameFlag) {\n      return false;\n    }\n\n    if (_selectNode) _selectNode.apply(view, arguments);\n    view.addHoverDom(setting, node);\n    return true;\n  };\n\n  var _uCanDo = tools.uCanDo;\n\n  tools.uCanDo = function (setting, e) {\n    var root = data.getRoot(setting);\n\n    if (e && (tools.eqs(e.type, \"mouseover\") || tools.eqs(e.type, \"mouseout\") || tools.eqs(e.type, \"mousedown\") || tools.eqs(e.type, \"mouseup\"))) {\n      return true;\n    }\n\n    if (root.curEditNode) {\n      view.editNodeBlur = false;\n      root.curEditInput.focus();\n    }\n\n    return !root.curEditNode && (_uCanDo ? _uCanDo.apply(view, arguments) : true);\n  };\n})(jQuery);\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3pUcmVlL2pzL2pxdWVyeS56dHJlZS5hbGwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3pUcmVlL2pzL2pxdWVyeS56dHJlZS5hbGwuanM/N2ZjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qXG4gKiBKUXVlcnkgelRyZWUgY29yZSB2My41LjI5XG4gKiBodHRwOi8vdHJlZWpzLmNuL1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMCBIdW50ZXIuelxuICpcbiAqIExpY2Vuc2VkIHNhbWUgYXMganF1ZXJ5IC0gTUlUIExpY2Vuc2VcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gKlxuICogZW1haWw6IGh1bnRlci56QDI2My5uZXRcbiAqIERhdGU6IDIwMTctMDYtMTlcbiAqL1xuKGZ1bmN0aW9uICgkKSB7XG4gICAgdmFyIHNldHRpbmdzID0ge30sIHJvb3RzID0ge30sIGNhY2hlcyA9IHt9LFxuICAgICAgICAvL2RlZmF1bHQgY29uc3RzIG9mIGNvcmVcbiAgICAgICAgX2NvbnN0cyA9IHtcbiAgICAgICAgICAgIGNsYXNzTmFtZToge1xuICAgICAgICAgICAgICAgIEJVVFRPTjogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICBMRVZFTDogXCJsZXZlbFwiLFxuICAgICAgICAgICAgICAgIElDT19MT0FESU5HOiBcImljb19sb2FkaW5nXCIsXG4gICAgICAgICAgICAgICAgU1dJVENIOiBcInN3aXRjaFwiLFxuICAgICAgICAgICAgICAgIE5BTUU6ICdub2RlX25hbWUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICBOT0RFQ1JFQVRFRDogXCJ6dHJlZV9ub2RlQ3JlYXRlZFwiLFxuICAgICAgICAgICAgICAgIENMSUNLOiBcInp0cmVlX2NsaWNrXCIsXG4gICAgICAgICAgICAgICAgRVhQQU5EOiBcInp0cmVlX2V4cGFuZFwiLFxuICAgICAgICAgICAgICAgIENPTExBUFNFOiBcInp0cmVlX2NvbGxhcHNlXCIsXG4gICAgICAgICAgICAgICAgQVNZTkNfU1VDQ0VTUzogXCJ6dHJlZV9hc3luY19zdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgQVNZTkNfRVJST1I6IFwienRyZWVfYXN5bmNfZXJyb3JcIixcbiAgICAgICAgICAgICAgICBSRU1PVkU6IFwienRyZWVfcmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgU0VMRUNURUQ6IFwienRyZWVfc2VsZWN0ZWRcIixcbiAgICAgICAgICAgICAgICBVTlNFTEVDVEVEOiBcInp0cmVlX3Vuc2VsZWN0ZWRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgICAgQTogXCJfYVwiLFxuICAgICAgICAgICAgICAgIElDT046IFwiX2ljb1wiLFxuICAgICAgICAgICAgICAgIFNQQU46IFwiX3NwYW5cIixcbiAgICAgICAgICAgICAgICBTV0lUQ0g6IFwiX3N3aXRjaFwiLFxuICAgICAgICAgICAgICAgIFVMOiBcIl91bFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGluZToge1xuICAgICAgICAgICAgICAgIFJPT1Q6IFwicm9vdFwiLFxuICAgICAgICAgICAgICAgIFJPT1RTOiBcInJvb3RzXCIsXG4gICAgICAgICAgICAgICAgQ0VOVEVSOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgIEJPVFRPTTogXCJib3R0b21cIixcbiAgICAgICAgICAgICAgICBOT0xJTkU6IFwibm9saW5lXCIsXG4gICAgICAgICAgICAgICAgTElORTogXCJsaW5lXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb2xkZXI6IHtcbiAgICAgICAgICAgICAgICBPUEVOOiBcIm9wZW5cIixcbiAgICAgICAgICAgICAgICBDTE9TRTogXCJjbG9zZVwiLFxuICAgICAgICAgICAgICAgIERPQ1U6IFwiZG9jdVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbm9kZToge1xuICAgICAgICAgICAgICAgIENVUlNFTEVDVEVEOiBcImN1clNlbGVjdGVkTm9kZVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCBzZXR0aW5nIG9mIGNvcmVcbiAgICAgICAgX3NldHRpbmcgPSB7XG4gICAgICAgICAgICB0cmVlSWQ6IFwiXCIsXG4gICAgICAgICAgICB0cmVlT2JqOiBudWxsLFxuICAgICAgICAgICAgdmlldzoge1xuICAgICAgICAgICAgICAgIGFkZERpeURvbTogbnVsbCxcbiAgICAgICAgICAgICAgICBhdXRvQ2FuY2VsU2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZGJsQ2xpY2tFeHBhbmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhwYW5kU3BlZWQ6IFwiZmFzdFwiLFxuICAgICAgICAgICAgICAgIGZvbnRDc3M6IHt9LFxuICAgICAgICAgICAgICAgIG5hbWVJc0hUTUw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hvd0ljb246IHRydWUsXG4gICAgICAgICAgICAgICAgc2hvd0xpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hvd1RpdGxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHR4dFNlbGVjdGVkRW5hYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBrZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFwiY2hpbGRyZW5cIixcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiaWNvblwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaW1wbGVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlkS2V5OiBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBJZEtleTogXCJwSWRcIixcbiAgICAgICAgICAgICAgICAgICAgcm9vdFBJZDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAga2VlcDoge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBsZWFmOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYzoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJwb3N0XCIsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIHVybDogXCJcIixcbiAgICAgICAgICAgICAgICBhdXRvUGFyYW06IFtdLFxuICAgICAgICAgICAgICAgIG90aGVyUGFyYW06IFtdLFxuICAgICAgICAgICAgICAgIGRhdGFGaWx0ZXI6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFjazoge1xuICAgICAgICAgICAgICAgIGJlZm9yZUFzeW5jOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZUNsaWNrOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZURibENsaWNrOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZVJpZ2h0Q2xpY2s6IG51bGwsXG4gICAgICAgICAgICAgICAgYmVmb3JlTW91c2VEb3duOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZU1vdXNlVXA6IG51bGwsXG4gICAgICAgICAgICAgICAgYmVmb3JlRXhwYW5kOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZUNvbGxhcHNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZVJlbW92ZTogbnVsbCxcblxuICAgICAgICAgICAgICAgIG9uQXN5bmNFcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICBvbkFzeW5jU3VjY2VzczogbnVsbCxcbiAgICAgICAgICAgICAgICBvbk5vZGVDcmVhdGVkOiBudWxsLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IG51bGwsXG4gICAgICAgICAgICAgICAgb25EYmxDbGljazogbnVsbCxcbiAgICAgICAgICAgICAgICBvblJpZ2h0Q2xpY2s6IG51bGwsXG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd246IG51bGwsXG4gICAgICAgICAgICAgICAgb25Nb3VzZVVwOiBudWxsLFxuICAgICAgICAgICAgICAgIG9uRXhwYW5kOiBudWxsLFxuICAgICAgICAgICAgICAgIG9uQ29sbGFwc2U6IG51bGwsXG4gICAgICAgICAgICAgICAgb25SZW1vdmU6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy9kZWZhdWx0IHJvb3Qgb2YgY29yZVxuICAgICAgICAvL3pUcmVlIHVzZSByb290IHRvIHNhdmUgZnVsbCBkYXRhXG4gICAgICAgIF9pbml0Um9vdCA9IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgciA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIHIgPSB7fTtcbiAgICAgICAgICAgICAgICBkYXRhLnNldFJvb3Qoc2V0dGluZywgcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByW3NldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW5dID0gW107XG4gICAgICAgICAgICByLmV4cGFuZFRyaWdnZXJGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICByLmN1clNlbGVjdGVkTGlzdCA9IFtdO1xuICAgICAgICAgICAgci5ub1NlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICByLmNyZWF0ZWROb2RlcyA9IFtdO1xuICAgICAgICAgICAgci56SWQgPSAwO1xuICAgICAgICAgICAgci5fdmVyID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy9kZWZhdWx0IGNhY2hlIG9mIGNvcmVcbiAgICAgICAgX2luaXRDYWNoZSA9IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGRhdGEuZ2V0Q2FjaGUoc2V0dGluZyk7XG4gICAgICAgICAgICBpZiAoIWMpIHtcbiAgICAgICAgICAgICAgICBjID0ge307XG4gICAgICAgICAgICAgICAgZGF0YS5zZXRDYWNoZShzZXR0aW5nLCBjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMubm9kZXMgPSBbXTtcbiAgICAgICAgICAgIGMuZG9tcyA9IFtdO1xuICAgICAgICB9LFxuICAgICAgICAvL2RlZmF1bHQgYmluZEV2ZW50IG9mIGNvcmVcbiAgICAgICAgX2JpbmRFdmVudCA9IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHNldHRpbmcudHJlZU9iaixcbiAgICAgICAgICAgICAgICBjID0gY29uc3RzLmV2ZW50O1xuICAgICAgICAgICAgby5iaW5kKGMuTk9ERUNSRUFURUQsIGZ1bmN0aW9uIChldmVudCwgdHJlZUlkLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5vbk5vZGVDcmVhdGVkLCBbZXZlbnQsIHRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG8uYmluZChjLkNMSUNLLCBmdW5jdGlvbiAoZXZlbnQsIHNyY0V2ZW50LCB0cmVlSWQsIG5vZGUsIGNsaWNrRmxhZykge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25DbGljaywgW3NyY0V2ZW50LCB0cmVlSWQsIG5vZGUsIGNsaWNrRmxhZ10pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG8uYmluZChjLkVYUEFORCwgZnVuY3Rpb24gKGV2ZW50LCB0cmVlSWQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB0b29scy5hcHBseShzZXR0aW5nLmNhbGxiYWNrLm9uRXhwYW5kLCBbZXZlbnQsIHRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG8uYmluZChjLkNPTExBUFNFLCBmdW5jdGlvbiAoZXZlbnQsIHRyZWVJZCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25Db2xsYXBzZSwgW2V2ZW50LCB0cmVlSWQsIG5vZGVdKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBvLmJpbmQoYy5BU1lOQ19TVUNDRVNTLCBmdW5jdGlvbiAoZXZlbnQsIHRyZWVJZCwgbm9kZSwgbXNnKSB7XG4gICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5vbkFzeW5jU3VjY2VzcywgW2V2ZW50LCB0cmVlSWQsIG5vZGUsIG1zZ10pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG8uYmluZChjLkFTWU5DX0VSUk9SLCBmdW5jdGlvbiAoZXZlbnQsIHRyZWVJZCwgbm9kZSwgWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5vbkFzeW5jRXJyb3IsIFtldmVudCwgdHJlZUlkLCBub2RlLCBYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd25dKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBvLmJpbmQoYy5SRU1PVkUsIGZ1bmN0aW9uIChldmVudCwgdHJlZUlkLCB0cmVlTm9kZSkge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25SZW1vdmUsIFtldmVudCwgdHJlZUlkLCB0cmVlTm9kZV0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG8uYmluZChjLlNFTEVDVEVELCBmdW5jdGlvbiAoZXZlbnQsIHRyZWVJZCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25TZWxlY3RlZCwgW3RyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLmJpbmQoYy5VTlNFTEVDVEVELCBmdW5jdGlvbiAoZXZlbnQsIHRyZWVJZCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25VblNlbGVjdGVkLCBbdHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgX3VuYmluZEV2ZW50ID0gZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgIHZhciBvID0gc2V0dGluZy50cmVlT2JqLFxuICAgICAgICAgICAgICAgIGMgPSBjb25zdHMuZXZlbnQ7XG4gICAgICAgICAgICBvLnVuYmluZChjLk5PREVDUkVBVEVEKVxuICAgICAgICAgICAgICAgIC51bmJpbmQoYy5DTElDSylcbiAgICAgICAgICAgICAgICAudW5iaW5kKGMuRVhQQU5EKVxuICAgICAgICAgICAgICAgIC51bmJpbmQoYy5DT0xMQVBTRSlcbiAgICAgICAgICAgICAgICAudW5iaW5kKGMuQVNZTkNfU1VDQ0VTUylcbiAgICAgICAgICAgICAgICAudW5iaW5kKGMuQVNZTkNfRVJST1IpXG4gICAgICAgICAgICAgICAgLnVuYmluZChjLlJFTU9WRSlcbiAgICAgICAgICAgICAgICAudW5iaW5kKGMuU0VMRUNURUQpXG4gICAgICAgICAgICAgICAgLnVuYmluZChjLlVOU0VMRUNURUQpO1xuICAgICAgICB9LFxuICAgICAgICAvL2RlZmF1bHQgZXZlbnQgcHJveHkgb2YgY29yZVxuICAgICAgICBfZXZlbnRQcm94eSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBzZXR0aW5nID0gZGF0YS5nZXRTZXR0aW5nKGV2ZW50LmRhdGEudHJlZUlkKSxcbiAgICAgICAgICAgICAgICB0SWQgPSBcIlwiLCBub2RlID0gbnVsbCxcbiAgICAgICAgICAgICAgICBub2RlRXZlbnRUeXBlID0gXCJcIiwgdHJlZUV2ZW50VHlwZSA9IFwiXCIsXG4gICAgICAgICAgICAgICAgbm9kZUV2ZW50Q2FsbGJhY2sgPSBudWxsLCB0cmVlRXZlbnRDYWxsYmFjayA9IG51bGwsXG4gICAgICAgICAgICAgICAgdG1wID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRvb2xzLmVxcyhldmVudC50eXBlLCBcIm1vdXNlZG93blwiKSkge1xuICAgICAgICAgICAgICAgIHRyZWVFdmVudFR5cGUgPSBcIm1vdXNlZG93blwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0b29scy5lcXMoZXZlbnQudHlwZSwgXCJtb3VzZXVwXCIpKSB7XG4gICAgICAgICAgICAgICAgdHJlZUV2ZW50VHlwZSA9IFwibW91c2V1cFwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0b29scy5lcXMoZXZlbnQudHlwZSwgXCJjb250ZXh0bWVudVwiKSkge1xuICAgICAgICAgICAgICAgIHRyZWVFdmVudFR5cGUgPSBcImNvbnRleHRtZW51XCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRvb2xzLmVxcyhldmVudC50eXBlLCBcImNsaWNrXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLmVxcyh0YXJnZXQudGFnTmFtZSwgXCJzcGFuXCIpICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0cmVlTm9kZVwiICsgY29uc3RzLmlkLlNXSVRDSCkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odGFyZ2V0KS5pZDtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50VHlwZSA9IFwic3dpdGNoTm9kZVwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IHRvb2xzLmdldE1Eb20oc2V0dGluZywgdGFyZ2V0LCBbeyB0YWdOYW1lOiBcImFcIiwgYXR0ck5hbWU6IFwidHJlZU5vZGVcIiArIGNvbnN0cy5pZC5BIH1dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRtcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odG1wKS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVFdmVudFR5cGUgPSBcImNsaWNrTm9kZVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0b29scy5lcXMoZXZlbnQudHlwZSwgXCJkYmxjbGlja1wiKSkge1xuICAgICAgICAgICAgICAgIHRyZWVFdmVudFR5cGUgPSBcImRibGNsaWNrXCI7XG4gICAgICAgICAgICAgICAgdG1wID0gdG9vbHMuZ2V0TURvbShzZXR0aW5nLCB0YXJnZXQsIFt7IHRhZ05hbWU6IFwiYVwiLCBhdHRyTmFtZTogXCJ0cmVlTm9kZVwiICsgY29uc3RzLmlkLkEgfV0pO1xuICAgICAgICAgICAgICAgIGlmICh0bXApIHtcbiAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odG1wKS5pZDtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50VHlwZSA9IFwic3dpdGNoTm9kZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmVlRXZlbnRUeXBlLmxlbmd0aCA+IDAgJiYgdElkLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdG1wID0gdG9vbHMuZ2V0TURvbShzZXR0aW5nLCB0YXJnZXQsIFt7IHRhZ05hbWU6IFwiYVwiLCBhdHRyTmFtZTogXCJ0cmVlTm9kZVwiICsgY29uc3RzLmlkLkEgfV0pO1xuICAgICAgICAgICAgICAgIGlmICh0bXApIHtcbiAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odG1wKS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBldmVudCB0byBub2RlXG4gICAgICAgICAgICBpZiAodElkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBub2RlID0gZGF0YS5nZXROb2RlQ2FjaGUoc2V0dGluZywgdElkKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vZGVFdmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN3aXRjaE5vZGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm9kZS5pc1BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVFdmVudFR5cGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b29scy5lcXMoZXZlbnQudHlwZSwgXCJjbGlja1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0b29scy5lcXMoZXZlbnQudHlwZSwgXCJkYmxjbGlja1wiKSAmJiB0b29scy5hcHBseShzZXR0aW5nLnZpZXcuZGJsQ2xpY2tFeHBhbmQsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0sIHNldHRpbmcudmlldy5kYmxDbGlja0V4cGFuZCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50Q2FsbGJhY2sgPSBoYW5kbGVyLm9uU3dpdGNoTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50VHlwZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNsaWNrTm9kZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50Q2FsbGJhY2sgPSBoYW5kbGVyLm9uQ2xpY2tOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXZlbnQgdG8gelRyZWVcbiAgICAgICAgICAgIHN3aXRjaCAodHJlZUV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtb3VzZWRvd25cIjpcbiAgICAgICAgICAgICAgICAgICAgdHJlZUV2ZW50Q2FsbGJhY2sgPSBoYW5kbGVyLm9uWlRyZWVNb3VzZWRvd247XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJtb3VzZXVwXCI6XG4gICAgICAgICAgICAgICAgICAgIHRyZWVFdmVudENhbGxiYWNrID0gaGFuZGxlci5vblpUcmVlTW91c2V1cDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRibGNsaWNrXCI6XG4gICAgICAgICAgICAgICAgICAgIHRyZWVFdmVudENhbGxiYWNrID0gaGFuZGxlci5vblpUcmVlRGJsY2xpY2s7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjb250ZXh0bWVudVwiOlxuICAgICAgICAgICAgICAgICAgICB0cmVlRXZlbnRDYWxsYmFjayA9IGhhbmRsZXIub25aVHJlZUNvbnRleHRtZW51O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcm94eVJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICBzdG9wOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgICAgICAgIG5vZGVFdmVudFR5cGU6IG5vZGVFdmVudFR5cGUsXG4gICAgICAgICAgICAgICAgbm9kZUV2ZW50Q2FsbGJhY2s6IG5vZGVFdmVudENhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHRyZWVFdmVudFR5cGU6IHRyZWVFdmVudFR5cGUsXG4gICAgICAgICAgICAgICAgdHJlZUV2ZW50Q2FsbGJhY2s6IHRyZWVFdmVudENhbGxiYWNrXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHByb3h5UmVzdWx0XG4gICAgICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCBpbml0IG5vZGUgb2YgY29yZVxuICAgICAgICBfaW5pdE5vZGUgPSBmdW5jdGlvbiAoc2V0dGluZywgbGV2ZWwsIG4sIHBhcmVudE5vZGUsIGlzRmlyc3ROb2RlLCBpc0xhc3ROb2RlLCBvcGVuRmxhZykge1xuICAgICAgICAgICAgaWYgKCFuKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgciA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW47XG4gICAgICAgICAgICBuLmxldmVsID0gbGV2ZWw7XG4gICAgICAgICAgICBuLnRJZCA9IHNldHRpbmcudHJlZUlkICsgXCJfXCIgKyAoKytyLnpJZCk7XG4gICAgICAgICAgICBuLnBhcmVudFRJZCA9IHBhcmVudE5vZGUgPyBwYXJlbnROb2RlLnRJZCA6IG51bGw7XG4gICAgICAgICAgICBuLm9wZW4gPSAodHlwZW9mIG4ub3BlbiA9PSBcInN0cmluZ1wiKSA/IHRvb2xzLmVxcyhuLm9wZW4sIFwidHJ1ZVwiKSA6ICEhbi5vcGVuO1xuICAgICAgICAgICAgaWYgKG5bY2hpbGRLZXldICYmIG5bY2hpbGRLZXldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuLmlzUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuLnpBc3luYyA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG4uaXNQYXJlbnQgPSAodHlwZW9mIG4uaXNQYXJlbnQgPT0gXCJzdHJpbmdcIikgPyB0b29scy5lcXMobi5pc1BhcmVudCwgXCJ0cnVlXCIpIDogISFuLmlzUGFyZW50O1xuICAgICAgICAgICAgICAgIG4ub3BlbiA9IChuLmlzUGFyZW50ICYmICFzZXR0aW5nLmFzeW5jLmVuYWJsZSkgPyBuLm9wZW4gOiBmYWxzZTtcbiAgICAgICAgICAgICAgICBuLnpBc3luYyA9ICFuLmlzUGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbi5pc0ZpcnN0Tm9kZSA9IGlzRmlyc3ROb2RlO1xuICAgICAgICAgICAgbi5pc0xhc3ROb2RlID0gaXNMYXN0Tm9kZTtcbiAgICAgICAgICAgIG4uZ2V0UGFyZW50Tm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXROb2RlQ2FjaGUoc2V0dGluZywgbi5wYXJlbnRUSWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG4uZ2V0UHJlTm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXRQcmVOb2RlKHNldHRpbmcsIG4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG4uZ2V0TmV4dE5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0TmV4dE5vZGUoc2V0dGluZywgbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbi5nZXRJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXROb2RlSW5kZXgoc2V0dGluZywgbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbi5nZXRQYXRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmdldE5vZGVQYXRoKHNldHRpbmcsIG4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG4uaXNBamF4aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBkYXRhLmZpeFBJZEtleVZhbHVlKHNldHRpbmcsIG4pO1xuICAgICAgICB9LFxuICAgICAgICBfaW5pdCA9IHtcbiAgICAgICAgICAgIGJpbmQ6IFtfYmluZEV2ZW50XSxcbiAgICAgICAgICAgIHVuYmluZDogW191bmJpbmRFdmVudF0sXG4gICAgICAgICAgICBjYWNoZXM6IFtfaW5pdENhY2hlXSxcbiAgICAgICAgICAgIG5vZGVzOiBbX2luaXROb2RlXSxcbiAgICAgICAgICAgIHByb3h5czogW19ldmVudFByb3h5XSxcbiAgICAgICAgICAgIHJvb3RzOiBbX2luaXRSb290XSxcbiAgICAgICAgICAgIGJlZm9yZUE6IFtdLFxuICAgICAgICAgICAgYWZ0ZXJBOiBbXSxcbiAgICAgICAgICAgIGlubmVyQmVmb3JlQTogW10sXG4gICAgICAgICAgICBpbm5lckFmdGVyQTogW10sXG4gICAgICAgICAgICB6VHJlZVRvb2xzOiBbXVxuICAgICAgICB9LFxuICAgICAgICAvL21ldGhvZCBvZiBvcGVyYXRlIGRhdGFcbiAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgIGFkZE5vZGVDYWNoZTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBkYXRhLmdldENhY2hlKHNldHRpbmcpLm5vZGVzW2RhdGEuZ2V0Tm9kZUNhY2hlSWQobm9kZS50SWQpXSA9IG5vZGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Tm9kZUNhY2hlSWQ6IGZ1bmN0aW9uICh0SWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdElkLnN1YnN0cmluZyh0SWQubGFzdEluZGV4T2YoXCJfXCIpICsgMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkQWZ0ZXJBOiBmdW5jdGlvbiAoYWZ0ZXJBKSB7XG4gICAgICAgICAgICAgICAgX2luaXQuYWZ0ZXJBLnB1c2goYWZ0ZXJBKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRCZWZvcmVBOiBmdW5jdGlvbiAoYmVmb3JlQSkge1xuICAgICAgICAgICAgICAgIF9pbml0LmJlZm9yZUEucHVzaChiZWZvcmVBKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRJbm5lckFmdGVyQTogZnVuY3Rpb24gKGlubmVyQWZ0ZXJBKSB7XG4gICAgICAgICAgICAgICAgX2luaXQuaW5uZXJBZnRlckEucHVzaChpbm5lckFmdGVyQSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkSW5uZXJCZWZvcmVBOiBmdW5jdGlvbiAoaW5uZXJCZWZvcmVBKSB7XG4gICAgICAgICAgICAgICAgX2luaXQuaW5uZXJCZWZvcmVBLnB1c2goaW5uZXJCZWZvcmVBKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRJbml0QmluZDogZnVuY3Rpb24gKGJpbmRFdmVudCkge1xuICAgICAgICAgICAgICAgIF9pbml0LmJpbmQucHVzaChiaW5kRXZlbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEluaXRVbkJpbmQ6IGZ1bmN0aW9uICh1bmJpbmRFdmVudCkge1xuICAgICAgICAgICAgICAgIF9pbml0LnVuYmluZC5wdXNoKHVuYmluZEV2ZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRJbml0Q2FjaGU6IGZ1bmN0aW9uIChpbml0Q2FjaGUpIHtcbiAgICAgICAgICAgICAgICBfaW5pdC5jYWNoZXMucHVzaChpbml0Q2FjaGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEluaXROb2RlOiBmdW5jdGlvbiAoaW5pdE5vZGUpIHtcbiAgICAgICAgICAgICAgICBfaW5pdC5ub2Rlcy5wdXNoKGluaXROb2RlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRJbml0UHJveHk6IGZ1bmN0aW9uIChpbml0UHJveHksIGlzRmlyc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoISFpc0ZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIF9pbml0LnByb3h5cy5zcGxpY2UoMCwgMCwgaW5pdFByb3h5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfaW5pdC5wcm94eXMucHVzaChpbml0UHJveHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRJbml0Um9vdDogZnVuY3Rpb24gKGluaXRSb290KSB7XG4gICAgICAgICAgICAgICAgX2luaXQucm9vdHMucHVzaChpbml0Um9vdCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkTm9kZXNEYXRhOiBmdW5jdGlvbiAoc2V0dGluZywgcGFyZW50Tm9kZSwgaW5kZXgsIG5vZGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbiwgcGFyYW1zO1xuICAgICAgICAgICAgICAgIGlmICghcGFyZW50Tm9kZVtjaGlsZEtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZVtjaGlsZEtleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID49IHBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnROb2RlW2NoaWxkS2V5XS5sZW5ndGggPiAwICYmIGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGVbY2hpbGRLZXldWzBdLmlzRmlyc3ROb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZUxpbmVJY29zKHNldHRpbmcsIHBhcmVudE5vZGVbY2hpbGRLZXldWzBdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDAgJiYgaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGVbY2hpbGRLZXldW3BhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aCAtIDFdLmlzTGFzdE5vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zZXROb2RlTGluZUljb3Moc2V0dGluZywgcGFyZW50Tm9kZVtjaGlsZEtleV1bcGFyZW50Tm9kZVtjaGlsZEtleV0ubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmlzUGFyZW50ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZVtjaGlsZEtleV0gPSBwYXJlbnROb2RlW2NoaWxkS2V5XS5jb25jYXQobm9kZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IFtpbmRleCwgMF0uY29uY2F0KG5vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZVtjaGlsZEtleV0uc3BsaWNlLmFwcGx5KHBhcmVudE5vZGVbY2hpbGRLZXldLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRTZWxlY3RlZE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU2VsZWN0ZWROb2RlKHNldHRpbmcsIG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvb3QuY3VyU2VsZWN0ZWRMaXN0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZENyZWF0ZWROb2RlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghIXNldHRpbmcuY2FsbGJhY2sub25Ob2RlQ3JlYXRlZCB8fCAhIXNldHRpbmcudmlldy5hZGREaXlEb20pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHJvb3QuY3JlYXRlZE5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZFpUcmVlVG9vbHM6IGZ1bmN0aW9uICh6VHJlZVRvb2xzKSB7XG4gICAgICAgICAgICAgICAgX2luaXQuelRyZWVUb29scy5wdXNoKHpUcmVlVG9vbHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV4U2V0dGluZzogZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCBfc2V0dGluZywgcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZml4UElkS2V5VmFsdWU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcuZGF0YS5zaW1wbGVEYXRhLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlW3NldHRpbmcuZGF0YS5zaW1wbGVEYXRhLnBJZEtleV0gPSBub2RlLnBhcmVudFRJZCA/IG5vZGUuZ2V0UGFyZW50Tm9kZSgpW3NldHRpbmcuZGF0YS5zaW1wbGVEYXRhLmlkS2V5XSA6IHNldHRpbmcuZGF0YS5zaW1wbGVEYXRhLnJvb3RQSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEFmdGVyQTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBfaW5pdC5hZnRlckEubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pbml0LmFmdGVyQVtpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRCZWZvcmVBOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IF9pbml0LmJlZm9yZUEubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pbml0LmJlZm9yZUFbaV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SW5uZXJBZnRlckE6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBhcnJheSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gX2luaXQuaW5uZXJBZnRlckEubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pbml0LmlubmVyQWZ0ZXJBW2ldLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldElubmVyQmVmb3JlQTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBfaW5pdC5pbm5lckJlZm9yZUEubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pbml0LmlubmVyQmVmb3JlQVtpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRDYWNoZTogZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVzW3NldHRpbmcudHJlZUlkXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXROb2RlSW5kZXg6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBwID0gbm9kZS5wYXJlbnRUSWQgPyBub2RlLmdldFBhcmVudE5vZGUoKSA6IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBbY2hpbGRLZXldLmxlbmd0aCAtIDE7IGkgPD0gbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwW2NoaWxkS2V5XVtpXSA9PT0gbm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE5leHROb2RlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgcCA9IG5vZGUucGFyZW50VElkID8gbm9kZS5nZXRQYXJlbnROb2RlKCkgOiBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwW2NoaWxkS2V5XS5sZW5ndGggLSAxOyBpIDw9IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocFtjaGlsZEtleV1baV0gPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSA9PSBsID8gbnVsbCA6IHBbY2hpbGRLZXldW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Tm9kZUJ5UGFyYW06IGZ1bmN0aW9uIChzZXR0aW5nLCBub2Rlcywga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZXMgfHwgIWtleSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXNbaV1ba2V5XSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBkYXRhLmdldE5vZGVCeVBhcmFtKHNldHRpbmcsIG5vZGVzW2ldW2NoaWxkS2V5XSwga2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0bXApIHJldHVybiB0bXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE5vZGVDYWNoZTogZnVuY3Rpb24gKHNldHRpbmcsIHRJZCkge1xuICAgICAgICAgICAgICAgIGlmICghdElkKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgbiA9IGNhY2hlc1tzZXR0aW5nLnRyZWVJZF0ubm9kZXNbZGF0YS5nZXROb2RlQ2FjaGVJZCh0SWQpXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA/IG4gOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE5vZGVOYW1lOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lS2V5ID0gc2V0dGluZy5kYXRhLmtleS5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgbm9kZVtuYW1lS2V5XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXROb2RlUGF0aDogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUucGFyZW50VElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBub2RlLmdldFBhcmVudE5vZGUoKS5nZXRQYXRoKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGgucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXROb2RlVGl0bGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBzZXR0aW5nLmRhdGEua2V5LnRpdGxlID09PSBcIlwiID8gc2V0dGluZy5kYXRhLmtleS5uYW1lIDogc2V0dGluZy5kYXRhLmtleS50aXRsZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIG5vZGVbdF07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Tm9kZXM6IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0Um9vdChzZXR0aW5nKVtzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXROb2Rlc0J5UGFyYW06IGZ1bmN0aW9uIChzZXR0aW5nLCBub2Rlcywga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZXMgfHwgIWtleSkgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc1tpXVtrZXldID09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChkYXRhLmdldE5vZGVzQnlQYXJhbShzZXR0aW5nLCBub2Rlc1tpXVtjaGlsZEtleV0sIGtleSwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXROb2Rlc0J5UGFyYW1GdXp6eTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGVzLCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlcyB8fCAha2V5KSByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZXNbaV1ba2V5XSA9PSBcInN0cmluZ1wiICYmIG5vZGVzW2ldW2tleV0udG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbHVlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChkYXRhLmdldE5vZGVzQnlQYXJhbUZ1enp5KHNldHRpbmcsIG5vZGVzW2ldW2NoaWxkS2V5XSwga2V5LCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE5vZGVzQnlGaWx0ZXI6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlcywgZmlsdGVyLCBpc1NpbmdsZSwgaW52b2tlUGFyYW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGVzKSByZXR1cm4gKGlzU2luZ2xlID8gbnVsbCA6IFtdKTtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBpc1NpbmdsZSA/IG51bGwgOiBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoZmlsdGVyLCBbbm9kZXNbaV0sIGludm9rZVBhcmFtXSwgZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTaW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcFJlc3VsdCA9IGRhdGEuZ2V0Tm9kZXNCeUZpbHRlcihzZXR0aW5nLCBub2Rlc1tpXVtjaGlsZEtleV0sIGZpbHRlciwgaXNTaW5nbGUsIGludm9rZVBhcmFtKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2luZ2xlICYmICEhdG1wUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGlzU2luZ2xlID8gdG1wUmVzdWx0IDogcmVzdWx0LmNvbmNhdCh0bXBSZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFByZU5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBwID0gbm9kZS5wYXJlbnRUSWQgPyBub2RlLmdldFBhcmVudE5vZGUoKSA6IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBbY2hpbGRLZXldLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocFtjaGlsZEtleV1baV0gPT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSA9PSAwID8gbnVsbCA6IHBbY2hpbGRLZXldW2kgLSAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Um9vdDogZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZyA/IHJvb3RzW3NldHRpbmcudHJlZUlkXSA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Um9vdHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdHM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0U2V0dGluZzogZnVuY3Rpb24gKHRyZWVJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5nc1t0cmVlSWRdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFNldHRpbmdzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFpUcmVlVG9vbHM6IGZ1bmN0aW9uICh0cmVlSWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMuZ2V0Um9vdCh0aGlzLmdldFNldHRpbmcodHJlZUlkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIgPyByLnRyZWVUb29scyA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5pdENhY2hlOiBmdW5jdGlvbiAoc2V0dGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gX2luaXQuY2FjaGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBfaW5pdC5jYWNoZXNbaV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5pdE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBsZXZlbCwgbm9kZSwgcGFyZW50Tm9kZSwgcHJlTm9kZSwgbmV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IF9pbml0Lm5vZGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBfaW5pdC5ub2Rlc1tpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbml0Um9vdDogZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IF9pbml0LnJvb3RzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBfaW5pdC5yb290c1tpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc1NlbGVjdGVkTm9kZTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IHJvb3QuY3VyU2VsZWN0ZWRMaXN0Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gcm9vdC5jdXJTZWxlY3RlZExpc3RbaV0pIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlTm9kZUNhY2hlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVbY2hpbGRLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZVtjaGlsZEtleV0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlbW92ZU5vZGVDYWNoZShzZXR0aW5nLCBub2RlW2NoaWxkS2V5XVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YS5nZXRDYWNoZShzZXR0aW5nKS5ub2Rlc1tkYXRhLmdldE5vZGVDYWNoZUlkKG5vZGUudElkKV0gPSBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbW92ZVNlbGVjdGVkTm9kZTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IHJvb3QuY3VyU2VsZWN0ZWRMaXN0Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gcm9vdC5jdXJTZWxlY3RlZExpc3RbaV0gfHwgIWRhdGEuZ2V0Tm9kZUNhY2hlKHNldHRpbmcsIHJvb3QuY3VyU2VsZWN0ZWRMaXN0W2ldLnRJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuY3VyU2VsZWN0ZWRMaXN0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5VTlNFTEVDVEVELCBbc2V0dGluZy50cmVlSWQsIG5vZGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRDYWNoZTogZnVuY3Rpb24gKHNldHRpbmcsIGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVzW3NldHRpbmcudHJlZUlkXSA9IGNhY2hlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFJvb3Q6IGZ1bmN0aW9uIChzZXR0aW5nLCByb290KSB7XG4gICAgICAgICAgICAgICAgcm9vdHNbc2V0dGluZy50cmVlSWRdID0gcm9vdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRaVHJlZVRvb2xzOiBmdW5jdGlvbiAoc2V0dGluZywgelRyZWVUb29scykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gX2luaXQuelRyZWVUb29scy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2luaXQuelRyZWVUb29sc1tpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmFuc2Zvcm1Ub0FycmF5Rm9ybWF0OiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGVzKSByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgciA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICh0b29scy5pc0FycmF5KG5vZGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc1tpXVtjaGlsZEtleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHIuY29uY2F0KGRhdGEudHJhbnNmb3JtVG9BcnJheUZvcm1hdChzZXR0aW5nLCBub2Rlc1tpXVtjaGlsZEtleV0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHIucHVzaChub2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc1tjaGlsZEtleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICByID0gci5jb25jYXQoZGF0YS50cmFuc2Zvcm1Ub0FycmF5Rm9ybWF0KHNldHRpbmcsIG5vZGVzW2NoaWxkS2V5XSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0cmFuc2Zvcm1Ub3pUcmVlRm9ybWF0OiBmdW5jdGlvbiAoc2V0dGluZywgc05vZGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIGwsXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHNldHRpbmcuZGF0YS5zaW1wbGVEYXRhLmlkS2V5LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXkgPSBzZXR0aW5nLmRhdGEuc2ltcGxlRGF0YS5wSWRLZXksXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBpZiAoIWtleSB8fCBrZXkgPT0gXCJcIiB8fCAhc05vZGVzKSByZXR1cm4gW107XG5cbiAgICAgICAgICAgICAgICBpZiAodG9vbHMuaXNBcnJheShzTm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXBNYXAgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHNOb2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcE1hcFtzTm9kZXNbaV1ba2V5XV0gPSBzTm9kZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHNOb2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBNYXBbc05vZGVzW2ldW3BhcmVudEtleV1dICYmIHNOb2Rlc1tpXVtrZXldICE9IHNOb2Rlc1tpXVtwYXJlbnRLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0bXBNYXBbc05vZGVzW2ldW3BhcmVudEtleV1dW2NoaWxkS2V5XSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wTWFwW3NOb2Rlc1tpXVtwYXJlbnRLZXldXVtjaGlsZEtleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBNYXBbc05vZGVzW2ldW3BhcmVudEtleV1dW2NoaWxkS2V5XS5wdXNoKHNOb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIucHVzaChzTm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbc05vZGVzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vbWV0aG9kIG9mIGV2ZW50IHByb3h5XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgICAgYmluZEV2ZW50OiBmdW5jdGlvbiAoc2V0dGluZykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gX2luaXQuYmluZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2luaXQuYmluZFtpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bmJpbmRFdmVudDogZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IF9pbml0LnVuYmluZC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2luaXQudW5iaW5kW2ldLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmRUcmVlOiBmdW5jdGlvbiAoc2V0dGluZykge1xuICAgICAgICAgICAgICAgIHZhciBldmVudFBhcmFtID0ge1xuICAgICAgICAgICAgICAgICAgICB0cmVlSWQ6IHNldHRpbmcudHJlZUlkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbyA9IHNldHRpbmcudHJlZU9iajtcbiAgICAgICAgICAgICAgICBpZiAoIXNldHRpbmcudmlldy50eHRTZWxlY3RlZEVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgY2FuJ3Qgc2VsZWN0IHRleHRcbiAgICAgICAgICAgICAgICAgICAgby5iaW5kKCdzZWxlY3RzdGFydCcsIGhhbmRsZXIub25TZWxlY3RTdGFydCkuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiLW1vei11c2VyLXNlbGVjdFwiOiBcIi1tb3otbm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvLmJpbmQoJ2NsaWNrJywgZXZlbnRQYXJhbSwgZXZlbnQucHJveHkpO1xuICAgICAgICAgICAgICAgIG8uYmluZCgnZGJsY2xpY2snLCBldmVudFBhcmFtLCBldmVudC5wcm94eSk7XG4gICAgICAgICAgICAgICAgby5iaW5kKCdtb3VzZW92ZXInLCBldmVudFBhcmFtLCBldmVudC5wcm94eSk7XG4gICAgICAgICAgICAgICAgby5iaW5kKCdtb3VzZW91dCcsIGV2ZW50UGFyYW0sIGV2ZW50LnByb3h5KTtcbiAgICAgICAgICAgICAgICBvLmJpbmQoJ21vdXNlZG93bicsIGV2ZW50UGFyYW0sIGV2ZW50LnByb3h5KTtcbiAgICAgICAgICAgICAgICBvLmJpbmQoJ21vdXNldXAnLCBldmVudFBhcmFtLCBldmVudC5wcm94eSk7XG4gICAgICAgICAgICAgICAgby5iaW5kKCdjb250ZXh0bWVudScsIGV2ZW50UGFyYW0sIGV2ZW50LnByb3h5KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bmJpbmRUcmVlOiBmdW5jdGlvbiAoc2V0dGluZykge1xuICAgICAgICAgICAgICAgIHZhciBvID0gc2V0dGluZy50cmVlT2JqO1xuICAgICAgICAgICAgICAgIG8udW5iaW5kKCdzZWxlY3RzdGFydCcsIGhhbmRsZXIub25TZWxlY3RTdGFydClcbiAgICAgICAgICAgICAgICAgICAgLnVuYmluZCgnY2xpY2snLCBldmVudC5wcm94eSlcbiAgICAgICAgICAgICAgICAgICAgLnVuYmluZCgnZGJsY2xpY2snLCBldmVudC5wcm94eSlcbiAgICAgICAgICAgICAgICAgICAgLnVuYmluZCgnbW91c2VvdmVyJywgZXZlbnQucHJveHkpXG4gICAgICAgICAgICAgICAgICAgIC51bmJpbmQoJ21vdXNlb3V0JywgZXZlbnQucHJveHkpXG4gICAgICAgICAgICAgICAgICAgIC51bmJpbmQoJ21vdXNlZG93bicsIGV2ZW50LnByb3h5KVxuICAgICAgICAgICAgICAgICAgICAudW5iaW5kKCdtb3VzZXVwJywgZXZlbnQucHJveHkpXG4gICAgICAgICAgICAgICAgICAgIC51bmJpbmQoJ2NvbnRleHRtZW51JywgZXZlbnQucHJveHkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRvUHJveHk6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IF9pbml0LnByb3h5cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3h5UmVzdWx0ID0gX2luaXQucHJveHlzW2ldLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChwcm94eVJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm94eVJlc3VsdC5zdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm94eTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhlLmRhdGEudHJlZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRvb2xzLnVDYW5EbyhzZXR0aW5nLCBlKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBldmVudC5kb1Byb3h5KGUpLFxuICAgICAgICAgICAgICAgICAgICByID0gdHJ1ZSwgeCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcmVzdWx0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3h5UmVzdWx0ID0gcmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3h5UmVzdWx0Lm5vZGVFdmVudENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBwcm94eVJlc3VsdC5ub2RlRXZlbnRDYWxsYmFjay5hcHBseShwcm94eVJlc3VsdCwgW2UsIHByb3h5UmVzdWx0Lm5vZGVdKSAmJiByO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm94eVJlc3VsdC50cmVlRXZlbnRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByID0gcHJveHlSZXN1bHQudHJlZUV2ZW50Q2FsbGJhY2suYXBwbHkocHJveHlSZXN1bHQsIFtlLCBwcm94eVJlc3VsdC5ub2RlXSkgJiYgcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy9tZXRob2Qgb2YgZXZlbnQgaGFuZGxlclxuICAgICAgICBoYW5kbGVyID0ge1xuICAgICAgICAgICAgb25Td2l0Y2hOb2RlOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhldmVudC5kYXRhLnRyZWVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUub3Blbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVDb2xsYXBzZSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgdHJ1ZSkgPT0gZmFsc2UpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmdldFJvb3Qoc2V0dGluZykuZXhwYW5kVHJpZ2dlckZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnN3aXRjaE5vZGUoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlRXhwYW5kLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCB0cnVlKSA9PSBmYWxzZSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0Um9vdChzZXR0aW5nKS5leHBhbmRUcmlnZ2VyRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc3dpdGNoTm9kZShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DbGlja05vZGU6IGZ1bmN0aW9uIChldmVudCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nID0gZGF0YS5nZXRTZXR0aW5nKGV2ZW50LmRhdGEudHJlZUlkKSxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tGbGFnID0gKChzZXR0aW5nLnZpZXcuYXV0b0NhbmNlbFNlbGVjdGVkICYmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpKSAmJiBkYXRhLmlzU2VsZWN0ZWROb2RlKHNldHRpbmcsIG5vZGUpKSA/IDAgOiAoc2V0dGluZy52aWV3LmF1dG9DYW5jZWxTZWxlY3RlZCAmJiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSAmJiBzZXR0aW5nLnZpZXcuc2VsZWN0ZWRNdWx0aSkgPyAyIDogMTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVDbGljaywgW3NldHRpbmcudHJlZUlkLCBub2RlLCBjbGlja0ZsYWddLCB0cnVlKSA9PSBmYWxzZSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGNsaWNrRmxhZyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbFByZVNlbGVjdGVkTm9kZShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnNlbGVjdE5vZGUoc2V0dGluZywgbm9kZSwgY2xpY2tGbGFnID09PSAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0dGluZy50cmVlT2JqLnRyaWdnZXIoY29uc3RzLmV2ZW50LkNMSUNLLCBbZXZlbnQsIHNldHRpbmcudHJlZUlkLCBub2RlLCBjbGlja0ZsYWddKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblpUcmVlTW91c2Vkb3duOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhldmVudC5kYXRhLnRyZWVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlTW91c2VEb3duLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0b29scy5hcHBseShzZXR0aW5nLmNhbGxiYWNrLm9uTW91c2VEb3duLCBbZXZlbnQsIHNldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uWlRyZWVNb3VzZXVwOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhldmVudC5kYXRhLnRyZWVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlTW91c2VVcCwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5vbk1vdXNlVXAsIFtldmVudCwgc2V0dGluZy50cmVlSWQsIG5vZGVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25aVHJlZURibGNsaWNrOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhldmVudC5kYXRhLnRyZWVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlRGJsQ2xpY2ssIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0sIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25EYmxDbGljaywgW2V2ZW50LCBzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblpUcmVlQ29udGV4dG1lbnU6IGZ1bmN0aW9uIChldmVudCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nID0gZGF0YS5nZXRTZXR0aW5nKGV2ZW50LmRhdGEudHJlZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVSaWdodENsaWNrLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0b29scy5hcHBseShzZXR0aW5nLmNhbGxiYWNrLm9uUmlnaHRDbGljaywgW2V2ZW50LCBzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKHR5cGVvZiBzZXR0aW5nLmNhbGxiYWNrLm9uUmlnaHRDbGljaykgIT0gXCJmdW5jdGlvblwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uU2VsZWN0U3RhcnQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBlLm9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiAobiA9PT0gXCJpbnB1dFwiIHx8IG4gPT09IFwidGV4dGFyZWFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vbWV0aG9kIG9mIHRvb2xzIGZvciB6VHJlZVxuICAgICAgICB0b29scyA9IHtcbiAgICAgICAgICAgIGFwcGx5OiBmdW5jdGlvbiAoZnVuLCBwYXJhbSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlb2YgZnVuKSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bi5hcHBseSh6dCwgcGFyYW0gPyBwYXJhbSA6IFtdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5Bc3luYzogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIHJldHVybiAoc2V0dGluZy5hc3luYy5lbmFibGUgJiYgbm9kZSAmJiBub2RlLmlzUGFyZW50ICYmICEobm9kZS56QXN5bmMgfHwgKG5vZGVbY2hpbGRLZXldICYmIG5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDApKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IHRvb2xzLmlzQXJyYXkob2JqKSA/IFtdIDoge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgb1tpXSA9IChvYmpbaV0gaW5zdGFuY2VvZiBEYXRlKSA/IG5ldyBEYXRlKG9ialtpXS5nZXRUaW1lKCkpIDogKHR5cGVvZiBvYmpbaV0gPT09IFwib2JqZWN0XCIgPyB0b29scy5jbG9uZShvYmpbaV0pIDogb2JqW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXFzOiBmdW5jdGlvbiAoc3RyMSwgc3RyMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIxLnRvTG93ZXJDYXNlKCkgPT09IHN0cjIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FycmF5OiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoYXJyKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRWxlbWVudDogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIgPyBvIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiAvL0RPTTJcbiAgICAgICAgICAgICAgICAgICAgICAgIG8gJiYgdHlwZW9mIG8gPT09IFwib2JqZWN0XCIgJiYgbyAhPT0gbnVsbCAmJiBvLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvLm5vZGVOYW1lID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAkOiBmdW5jdGlvbiAobm9kZSwgZXhwLCBzZXR0aW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXhwICYmIHR5cGVvZiBleHAgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nID0gZXhwO1xuICAgICAgICAgICAgICAgICAgICBleHAgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5vZGUgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJChub2RlLCBzZXR0aW5nID8gc2V0dGluZy50cmVlT2JqLmdldCgwKS5vd25lckRvY3VtZW50IDogbnVsbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoXCIjXCIgKyBub2RlLnRJZCArIGV4cCwgc2V0dGluZyA/IHNldHRpbmcudHJlZU9iaiA6IG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRNRG9tOiBmdW5jdGlvbiAoc2V0dGluZywgY3VyRG9tLCB0YXJnZXRFeHByKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJEb20pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJEb20gJiYgY3VyRG9tLmlkICE9PSBzZXR0aW5nLnRyZWVJZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRhcmdldEV4cHIubGVuZ3RoOyBjdXJEb20udGFnTmFtZSAmJiBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuZXFzKGN1ckRvbS50YWdOYW1lLCB0YXJnZXRFeHByW2ldLnRhZ05hbWUpICYmIGN1ckRvbS5nZXRBdHRyaWJ1dGUodGFyZ2V0RXhwcltpXS5hdHRyTmFtZSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VyRG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1ckRvbSA9IGN1ckRvbS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXROb2RlTWFpbkRvbTogZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoJCh0YXJnZXQpLnBhcmVudChcImxpXCIpLmdldCgwKSB8fCAkKHRhcmdldCkucGFyZW50c1VudGlsKFwibGlcIikucGFyZW50KCkuZ2V0KDApKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0NoaWxkT3JTZWxmOiBmdW5jdGlvbiAoZG9tLCBwYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoJChkb20pLmNsb3Nlc3QoXCIjXCIgKyBwYXJlbnRJZCkubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdUNhbkRvOiBmdW5jdGlvbiAoc2V0dGluZywgZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvL21ldGhvZCBvZiBvcGVyYXRlIHp0cmVlIGRvbVxuICAgICAgICB2aWV3ID0ge1xuICAgICAgICAgICAgYWRkTm9kZXM6IGZ1bmN0aW9uIChzZXR0aW5nLCBwYXJlbnROb2RlLCBpbmRleCwgbmV3Tm9kZXMsIGlzU2lsZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcuZGF0YS5rZWVwLmxlYWYgJiYgcGFyZW50Tm9kZSAmJiAhcGFyZW50Tm9kZS5pc1BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdG9vbHMuaXNBcnJheShuZXdOb2RlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZXMgPSBbbmV3Tm9kZXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZy5kYXRhLnNpbXBsZURhdGEuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld05vZGVzID0gZGF0YS50cmFuc2Zvcm1Ub3pUcmVlRm9ybWF0KHNldHRpbmcsIG5ld05vZGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldF9zd2l0Y2hPYmogPSAkJChwYXJlbnROb2RlLCBjb25zdHMuaWQuU1dJVENILCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pY29PYmogPSAkJChwYXJlbnROb2RlLCBjb25zdHMuaWQuSUNPTiwgc2V0dGluZyksXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfdWxPYmogPSAkJChwYXJlbnROb2RlLCBjb25zdHMuaWQuVUwsIHNldHRpbmcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyZW50Tm9kZS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VTd2l0Y2hDbGFzcyhwYXJlbnROb2RlLCB0YXJnZXRfc3dpdGNoT2JqLCBjb25zdHMuZm9sZGVyLkNMT1NFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZUljb0NsYXNzKHBhcmVudE5vZGUsIHRhcmdldF9pY29PYmosIGNvbnN0cy5mb2xkZXIuQ0xPU0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfdWxPYmouY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogXCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5hZGROb2Rlc0RhdGEoc2V0dGluZywgcGFyZW50Tm9kZSwgaW5kZXgsIG5ld05vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jcmVhdGVOb2RlcyhzZXR0aW5nLCBwYXJlbnROb2RlLmxldmVsICsgMSwgbmV3Tm9kZXMsIHBhcmVudE5vZGUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1NpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5leHBhbmRDb2xsYXBzZVBhcmVudE5vZGUoc2V0dGluZywgcGFyZW50Tm9kZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmFkZE5vZGVzRGF0YShzZXR0aW5nLCBkYXRhLmdldFJvb3Qoc2V0dGluZyksIGluZGV4LCBuZXdOb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY3JlYXRlTm9kZXMoc2V0dGluZywgMCwgbmV3Tm9kZXMsIG51bGwsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXBwZW5kTm9kZXM6IGZ1bmN0aW9uIChzZXR0aW5nLCBsZXZlbCwgbm9kZXMsIHBhcmVudE5vZGUsIGluZGV4LCBpbml0RmxhZywgb3BlbkZsYWcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGVzKSByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuXG4gICAgICAgICAgICAgICAgdmFyIHRtcFBOb2RlID0gKHBhcmVudE5vZGUpID8gcGFyZW50Tm9kZSA6IGRhdGEuZ2V0Um9vdChzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgdG1wUENoaWxkID0gdG1wUE5vZGVbY2hpbGRLZXldLFxuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0Tm9kZSwgaXNMYXN0Tm9kZTtcblxuICAgICAgICAgICAgICAgIGlmICghdG1wUENoaWxkIHx8IGluZGV4ID49IHRtcFBDaGlsZC5sZW5ndGggLSBub2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmlyc3ROb2RlID0gKChpbmRleCA9PT0gMCB8fCB0bXBQQ2hpbGQubGVuZ3RoID09IG5vZGVzLmxlbmd0aCkgJiYgKGkgPT0gMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNMYXN0Tm9kZSA9IChpbmRleCA8IDAgJiYgaSA9PSAobm9kZXMubGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbml0Tm9kZShzZXR0aW5nLCBsZXZlbCwgbm9kZSwgcGFyZW50Tm9kZSwgaXNGaXJzdE5vZGUsIGlzTGFzdE5vZGUsIG9wZW5GbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYWRkTm9kZUNhY2hlKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkSHRtbCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZVtjaGlsZEtleV0gJiYgbm9kZVtjaGlsZEtleV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9tYWtlIGNoaWxkIGh0bWwgZmlyc3QsIGJlY2F1c2UgY2hlY2tUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEh0bWwgPSB2aWV3LmFwcGVuZE5vZGVzKHNldHRpbmcsIGxldmVsICsgMSwgbm9kZVtjaGlsZEtleV0sIG5vZGUsIC0xLCBpbml0RmxhZywgb3BlbkZsYWcgJiYgbm9kZS5vcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlbkZsYWcpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5tYWtlRE9NTm9kZU1haW5CZWZvcmUoaHRtbCwgc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VET01Ob2RlTGluZShodG1sLCBzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0QmVmb3JlQShzZXR0aW5nLCBub2RlLCBodG1sKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZURPTU5vZGVOYW1lQmVmb3JlKGh0bWwsIHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRJbm5lckJlZm9yZUEoc2V0dGluZywgbm9kZSwgaHRtbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VET01Ob2RlSWNvbihodG1sLCBzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0SW5uZXJBZnRlckEoc2V0dGluZywgbm9kZSwgaHRtbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VET01Ob2RlTmFtZUFmdGVyKGh0bWwsIHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRBZnRlckEoc2V0dGluZywgbm9kZSwgaHRtbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5pc1BhcmVudCAmJiBub2RlLm9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VVbEh0bWwoc2V0dGluZywgbm9kZSwgaHRtbCwgY2hpbGRIdG1sLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcubWFrZURPTU5vZGVNYWluQWZ0ZXIoaHRtbCwgc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmFkZENyZWF0ZWROb2RlKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBodG1sO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFwcGVuZFBhcmVudFVMRG9tOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sID0gW10sXG4gICAgICAgICAgICAgICAgICAgIG5PYmogPSAkJChub2RlLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5PYmouZ2V0KDApICYmICEhbm9kZS5wYXJlbnRUSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5hcHBlbmRQYXJlbnRVTERvbShzZXR0aW5nLCBub2RlLmdldFBhcmVudE5vZGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIG5PYmogPSAkJChub2RlLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHVsT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBpZiAodWxPYmouZ2V0KDApKSB7XG4gICAgICAgICAgICAgICAgICAgIHVsT2JqLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZEh0bWwgPSB2aWV3LmFwcGVuZE5vZGVzKHNldHRpbmcsIG5vZGUubGV2ZWwgKyAxLCBub2RlW2NoaWxkS2V5XSwgbm9kZSwgLTEsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB2aWV3Lm1ha2VVbEh0bWwoc2V0dGluZywgbm9kZSwgaHRtbCwgY2hpbGRIdG1sLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICBuT2JqLmFwcGVuZChodG1sLmpvaW4oJycpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luY05vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBpc1NpbGVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgbDtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSAmJiAhbm9kZS5pc1BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICB0b29scy5hcHBseShjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUgJiYgbm9kZS5pc0FqYXhpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVBc3luYywgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgdHJ1ZSkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNBamF4aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb09iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5JQ09OLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWNvT2JqLmF0dHIoeyBcInN0eWxlXCI6IFwiXCIsIFwiY2xhc3NcIjogY29uc3RzLmNsYXNzTmFtZS5CVVRUT04gKyBcIiBcIiArIGNvbnN0cy5jbGFzc05hbWUuSUNPX0xPQURJTkcgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHRtcFBhcmFtID0ge307XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHNldHRpbmcuYXN5bmMuYXV0b1BhcmFtLmxlbmd0aDsgbm9kZSAmJiBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwS2V5ID0gc2V0dGluZy5hc3luYy5hdXRvUGFyYW1baV0uc3BsaXQoXCI9XCIpLCBzcEtleSA9IHBLZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwS2V5Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwS2V5ID0gcEtleVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBLZXkgPSBwS2V5WzBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRtcFBhcmFtW3NwS2V5XSA9IG5vZGVbcEtleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b29scy5pc0FycmF5KHNldHRpbmcuYXN5bmMub3RoZXJQYXJhbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHNldHRpbmcuYXN5bmMub3RoZXJQYXJhbS5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFBhcmFtW3NldHRpbmcuYXN5bmMub3RoZXJQYXJhbVtpXV0gPSBzZXR0aW5nLmFzeW5jLm90aGVyUGFyYW1baSArIDFdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzZXR0aW5nLmFzeW5jLm90aGVyUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFBhcmFtW3BdID0gc2V0dGluZy5hc3luYy5vdGhlclBhcmFtW3BdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIF90bXBWID0gZGF0YS5nZXRSb290KHNldHRpbmcpLl92ZXI7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IHNldHRpbmcuYXN5bmMuY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogc2V0dGluZy5hc3luYy50eXBlLFxuICAgICAgICAgICAgICAgICAgICB4aHJGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB1cmw6IHRvb2xzLmFwcGx5KHNldHRpbmcuYXN5bmMudXJsLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCBzZXR0aW5nLmFzeW5jLnVybCksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNldHRpbmcuYXN5bmMuY29udGVudFR5cGUuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpID4gLTEgPyBKU09OLnN0cmluZ2lmeSh0bXBQYXJhbSkgOiB0bXBQYXJhbSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IHNldHRpbmcuYXN5bmMuZGF0YVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdG1wViAhPSBkYXRhLmdldFJvb3Qoc2V0dGluZykuX3Zlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdOb2RlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZyB8fCBtc2cubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtc2cgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlcyA9IGV2YWwoXCIoXCIgKyBtc2cgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZXMgPSBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZXMgPSBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5pc0FqYXhpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuekFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZUxpbmVJY29zKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld05vZGVzICYmIG5ld05vZGVzICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZXMgPSB0b29scy5hcHBseShzZXR0aW5nLmFzeW5jLmRhdGFGaWx0ZXIsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZSwgbmV3Tm9kZXNdLCBuZXdOb2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5hZGROb2RlcyhzZXR0aW5nLCBub2RlLCAtMSwgISFuZXdOb2RlcyA/IHRvb2xzLmNsb25lKG5ld05vZGVzKSA6IFtdLCAhIWlzU2lsZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5hZGROb2RlcyhzZXR0aW5nLCBub2RlLCAtMSwgW10sICEhaXNTaWxlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy50cmVlT2JqLnRyaWdnZXIoY29uc3RzLmV2ZW50LkFTWU5DX1NVQ0NFU1MsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZSwgbXNnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29scy5hcHBseShjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RtcFYgIT0gZGF0YS5nZXRSb290KHNldHRpbmcpLl92ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkgbm9kZS5pc0FqYXhpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXROb2RlTGluZUljb3Moc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmoudHJpZ2dlcihjb25zdHMuZXZlbnQuQVNZTkNfRVJST1IsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZSwgWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWxQcmVTZWxlY3RlZE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBleGNsdWRlTm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gZGF0YS5nZXRSb290KHNldHRpbmcpLmN1clNlbGVjdGVkTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgaSwgbjtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIG4gPSBsaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gbiB8fCAoIW5vZGUgJiYgKCFleGNsdWRlTm9kZSB8fCBleGNsdWRlTm9kZSAhPT0gbikpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkJChuLCBjb25zdHMuaWQuQSwgc2V0dGluZykucmVtb3ZlQ2xhc3MoY29uc3RzLm5vZGUuQ1VSU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlbW92ZVNlbGVjdGVkTm9kZShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy50cmVlT2JqLnRyaWdnZXIoY29uc3RzLmV2ZW50LlVOU0VMRUNURUQsIFtzZXR0aW5nLnRyZWVJZCwgbl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZU5vZGVDYWxsYmFjazogZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoISFzZXR0aW5nLmNhbGxiYWNrLm9uTm9kZUNyZWF0ZWQgfHwgISFzZXR0aW5nLnZpZXcuYWRkRGl5RG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb290ID0gZGF0YS5nZXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocm9vdC5jcmVhdGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSByb290LmNyZWF0ZWROb2Rlcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy52aWV3LmFkZERpeURvbSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFzZXR0aW5nLmNhbGxiYWNrLm9uTm9kZUNyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmoudHJpZ2dlcihjb25zdHMuZXZlbnQuTk9ERUNSRUFURUQsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNyZWF0ZU5vZGVzOiBmdW5jdGlvbiAoc2V0dGluZywgbGV2ZWwsIG5vZGVzLCBwYXJlbnROb2RlLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZXMgfHwgbm9kZXMubGVuZ3RoID09IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBvcGVuRmxhZyA9ICFwYXJlbnROb2RlIHx8IHBhcmVudE5vZGUub3BlbiB8fCAhISQkKHBhcmVudE5vZGVbY2hpbGRLZXldWzBdLCBzZXR0aW5nKS5nZXQoMCk7XG4gICAgICAgICAgICAgICAgcm9vdC5jcmVhdGVkTm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgelRyZWVIdG1sID0gdmlldy5hcHBlbmROb2RlcyhzZXR0aW5nLCBsZXZlbCwgbm9kZXMsIHBhcmVudE5vZGUsIGluZGV4LCB0cnVlLCBvcGVuRmxhZyksXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE9iaiwgbmV4dE9iajtcblxuICAgICAgICAgICAgICAgIGlmICghcGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRPYmogPSBzZXR0aW5nLnRyZWVPYmo7XG4gICAgICAgICAgICAgICAgICAgIC8vc2V0dGluZy50cmVlT2JqLmFwcGVuZCh6VHJlZUh0bWwuam9pbignJykpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bE9iaiA9ICQkKHBhcmVudE5vZGUsIGNvbnN0cy5pZC5VTCwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bE9iai5nZXQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE9iaiA9IHVsT2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy91bE9iai5hcHBlbmQoelRyZWVIdG1sLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFyZW50T2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0T2JqID0gcGFyZW50T2JqLmNoaWxkcmVuKClbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIG5leHRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQobmV4dE9iaikuYmVmb3JlKHpUcmVlSHRtbC5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRPYmouYXBwZW5kKHpUcmVlSHRtbC5qb2luKCcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2aWV3LmNyZWF0ZU5vZGVDYWxsYmFjayhzZXR0aW5nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoc2V0dGluZykge1xuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGRhdGEuaW5pdENhY2hlKHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIGRhdGEuaW5pdFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgZXZlbnQudW5iaW5kVHJlZShzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBldmVudC51bmJpbmRFdmVudChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmouZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2V0dGluZ3Nbc2V0dGluZy50cmVlSWRdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGV4cGFuZENvbGxhcHNlTm9kZTogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUsIGV4cGFuZEZsYWcsIGFuaW1hdGVGbGFnLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHZhciByb290ID0gZGF0YS5nZXRSb290KHNldHRpbmcpLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgdmFyIHRtcENiLCBfY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KGNhbGxiYWNrLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3QuZXhwYW5kVHJpZ2dlckZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgX2NhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgIHRtcENiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jYWxsYmFjaykgX2NhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy50cmVlT2JqLnRyaWdnZXIoY29uc3RzLmV2ZW50LkVYUEFORCwgW3NldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5DT0xMQVBTRSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdG1wQ2I7XG4gICAgICAgICAgICAgICAgICAgIHJvb3QuZXhwYW5kVHJpZ2dlckZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLm9wZW4gJiYgbm9kZS5pc1BhcmVudCAmJiAoKCEkJChub2RlLCBjb25zdHMuaWQuVUwsIHNldHRpbmcpLmdldCgwKSkgfHwgKG5vZGVbY2hpbGRLZXldICYmIG5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDAgJiYgISQkKG5vZGVbY2hpbGRLZXldWzBdLCBzZXR0aW5nKS5nZXQoMCkpKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmFwcGVuZFBhcmVudFVMRG9tKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNyZWF0ZU5vZGVDYWxsYmFjayhzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUub3BlbiA9PSBleHBhbmRGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KGNhbGxiYWNrLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHVsT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLlNXSVRDSCwgc2V0dGluZyksXG4gICAgICAgICAgICAgICAgICAgIGljb09iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5JQ09OLCBzZXR0aW5nKTtcblxuICAgICAgICAgICAgICAgIGlmIChub2RlLmlzUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUub3BlbiA9ICFub2RlLm9wZW47XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmljb25PcGVuICYmIG5vZGUuaWNvbkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29PYmouYXR0cihcInN0eWxlXCIsIHZpZXcubWFrZU5vZGVJY29TdHlsZShzZXR0aW5nLCBub2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VTd2l0Y2hDbGFzcyhub2RlLCBzd2l0Y2hPYmosIGNvbnN0cy5mb2xkZXIuT1BFTik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VJY29DbGFzcyhub2RlLCBpY29PYmosIGNvbnN0cy5mb2xkZXIuT1BFTik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0ZUZsYWcgPT0gZmFsc2UgfHwgc2V0dGluZy52aWV3LmV4cGFuZFNwZWVkID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bE9iai5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoY2FsbGJhY2ssIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVbY2hpbGRLZXldICYmIG5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWxPYmouc2xpZGVEb3duKHNldHRpbmcudmlldy5leHBhbmRTcGVlZCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsT2JqLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoY2FsbGJhY2ssIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VTd2l0Y2hDbGFzcyhub2RlLCBzd2l0Y2hPYmosIGNvbnN0cy5mb2xkZXIuQ0xPU0UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5yZXBsYWNlSWNvQ2xhc3Mobm9kZSwgaWNvT2JqLCBjb25zdHMuZm9sZGVyLkNMT1NFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRlRmxhZyA9PSBmYWxzZSB8fCBzZXR0aW5nLnZpZXcuZXhwYW5kU3BlZWQgPT0gXCJcIiB8fCAhKG5vZGVbY2hpbGRLZXldICYmIG5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWxPYmouaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KGNhbGxiYWNrLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsT2JqLnNsaWRlVXAoc2V0dGluZy52aWV3LmV4cGFuZFNwZWVkLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b29scy5hcHBseShjYWxsYmFjaywgW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleHBhbmRDb2xsYXBzZVBhcmVudE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBleHBhbmRGbGFnLCBhbmltYXRlRmxhZywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUucGFyZW50VElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZXhwYW5kQ29sbGFwc2VOb2RlKHNldHRpbmcsIG5vZGUsIGV4cGFuZEZsYWcsIGFuaW1hdGVGbGFnLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlTm9kZShzZXR0aW5nLCBub2RlLCBleHBhbmRGbGFnLCBhbmltYXRlRmxhZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudFRJZCkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlUGFyZW50Tm9kZShzZXR0aW5nLCBub2RlLmdldFBhcmVudE5vZGUoKSwgZXhwYW5kRmxhZywgYW5pbWF0ZUZsYWcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXhwYW5kQ29sbGFwc2VTb25Ob2RlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSwgZXhwYW5kRmxhZywgYW5pbWF0ZUZsYWcsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyksXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgdHJlZU5vZGVzID0gKG5vZGUpID8gbm9kZVtjaGlsZEtleV0gOiByb290W2NoaWxkS2V5XSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZkFuaW1hdGVTaWduID0gKG5vZGUpID8gZmFsc2UgOiBhbmltYXRlRmxhZyxcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kVHJpZ2dlckZsYWcgPSBkYXRhLmdldFJvb3Qoc2V0dGluZykuZXhwYW5kVHJpZ2dlckZsYWc7XG4gICAgICAgICAgICAgICAgZGF0YS5nZXRSb290KHNldHRpbmcpLmV4cGFuZFRyaWdnZXJGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRyZWVOb2Rlcykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRyZWVOb2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmVlTm9kZXNbaV0pIHZpZXcuZXhwYW5kQ29sbGFwc2VTb25Ob2RlKHNldHRpbmcsIHRyZWVOb2Rlc1tpXSwgZXhwYW5kRmxhZywgc2VsZkFuaW1hdGVTaWduKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhLmdldFJvb3Qoc2V0dGluZykuZXhwYW5kVHJpZ2dlckZsYWcgPSBleHBhbmRUcmlnZ2VyRmxhZztcbiAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlTm9kZShzZXR0aW5nLCBub2RlLCBleHBhbmRGbGFnLCBhbmltYXRlRmxhZywgY2FsbGJhY2spO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzU2VsZWN0ZWROb2RlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gZGF0YS5nZXRSb290KHNldHRpbmcpLmN1clNlbGVjdGVkTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgaTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlID09PSBsaXN0W2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFrZURPTU5vZGVJY29uOiBmdW5jdGlvbiAoaHRtbCwgc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lU3RyID0gZGF0YS5nZXROb2RlTmFtZShzZXR0aW5nLCBub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHNldHRpbmcudmlldy5uYW1lSXNIVE1MID8gbmFtZVN0ciA6IG5hbWVTdHIucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuICAgICAgICAgICAgICAgIGh0bWwucHVzaChcIjxzcGFuIGlkPSdcIiwgbm9kZS50SWQsIGNvbnN0cy5pZC5JQ09OLFxuICAgICAgICAgICAgICAgICAgICBcIicgdGl0bGU9JycgdHJlZU5vZGVcIiwgY29uc3RzLmlkLklDT04sIFwiIGNsYXNzPSdcIiwgdmlldy5tYWtlTm9kZUljb0NsYXNzKHNldHRpbmcsIG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBcIicgc3R5bGU9J1wiLCB2aWV3Lm1ha2VOb2RlSWNvU3R5bGUoc2V0dGluZywgbm9kZSksIFwiJz48L3NwYW4+PHNwYW4gaWQ9J1wiLCBub2RlLnRJZCwgY29uc3RzLmlkLlNQQU4sXG4gICAgICAgICAgICAgICAgICAgIFwiJyBjbGFzcz0nXCIsIGNvbnN0cy5jbGFzc05hbWUuTkFNRSxcbiAgICAgICAgICAgICAgICAgICAgXCInPlwiLCBuYW1lLCBcIjwvc3Bhbj5cIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFrZURPTU5vZGVMaW5lOiBmdW5jdGlvbiAoaHRtbCwgc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGh0bWwucHVzaChcIjxzcGFuIGlkPSdcIiwgbm9kZS50SWQsIGNvbnN0cy5pZC5TV0lUQ0gsIFwiJyB0aXRsZT0nJyBjbGFzcz0nXCIsIHZpZXcubWFrZU5vZGVMaW5lQ2xhc3Moc2V0dGluZywgbm9kZSksIFwiJyB0cmVlTm9kZVwiLCBjb25zdHMuaWQuU1dJVENILCBcIj48L3NwYW4+XCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VET01Ob2RlTWFpbkFmdGVyOiBmdW5jdGlvbiAoaHRtbCwgc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGh0bWwucHVzaChcIjwvbGk+XCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VET01Ob2RlTWFpbkJlZm9yZTogZnVuY3Rpb24gKGh0bWwsIHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBodG1sLnB1c2goXCI8bGkgaWQ9J1wiLCBub2RlLnRJZCwgXCInIGNsYXNzPSdcIiwgY29uc3RzLmNsYXNzTmFtZS5MRVZFTCwgbm9kZS5sZXZlbCwgXCInIHRhYmluZGV4PScwJyBoaWRlZm9jdXM9J3RydWUnIHRyZWVub2RlPlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYWtlRE9NTm9kZU5hbWVBZnRlcjogZnVuY3Rpb24gKGh0bWwsIHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBodG1sLnB1c2goXCI8L2E+XCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VET01Ob2RlTmFtZUJlZm9yZTogZnVuY3Rpb24gKGh0bWwsIHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSBkYXRhLmdldE5vZGVUaXRsZShzZXR0aW5nLCBub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gdmlldy5tYWtlTm9kZVVybChzZXR0aW5nLCBub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgZm9udGNzcyA9IHZpZXcubWFrZU5vZGVGb250Q3NzKHNldHRpbmcsIG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBmb250U3R5bGUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmIGluIGZvbnRjc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9udFN0eWxlLnB1c2goZiwgXCI6XCIsIGZvbnRjc3NbZl0sIFwiO1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKFwiPGEgaWQ9J1wiLCBub2RlLnRJZCwgY29uc3RzLmlkLkEsIFwiJyBjbGFzcz0nXCIsIGNvbnN0cy5jbGFzc05hbWUuTEVWRUwsIG5vZGUubGV2ZWwsIFwiJyB0cmVlTm9kZVwiLCBjb25zdHMuaWQuQSwgXCIgb25jbGljaz1cXFwiXCIsIChub2RlLmNsaWNrIHx8ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgXCJcXFwiIFwiLCAoKHVybCAhPSBudWxsICYmIHVybC5sZW5ndGggPiAwKSA/IFwiaHJlZj0nXCIgKyB1cmwgKyBcIidcIiA6IFwiXCIpLCBcIiB0YXJnZXQ9J1wiLCB2aWV3Lm1ha2VOb2RlVGFyZ2V0KG5vZGUpLCBcIicgc3R5bGU9J1wiLCBmb250U3R5bGUuam9pbignJyksXG4gICAgICAgICAgICAgICAgICAgIFwiJ1wiKTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy52aWV3LnNob3dUaXRsZSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgc2V0dGluZy52aWV3LnNob3dUaXRsZSkgJiYgdGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKFwidGl0bGU9J1wiLCB0aXRsZS5yZXBsYWNlKC8nL2csIFwiJiMzOTtcIikucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKSwgXCInXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBodG1sLnB1c2goXCI+XCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VOb2RlRm9udENzczogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9udENzcyA9IHRvb2xzLmFwcGx5KHNldHRpbmcudmlldy5mb250Q3NzLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCBzZXR0aW5nLnZpZXcuZm9udENzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChmb250Q3NzICYmICgodHlwZW9mIGZvbnRDc3MpICE9IFwiZnVuY3Rpb25cIikpID8gZm9udENzcyA6IHt9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VOb2RlSWNvQ2xhc3M6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb0NzcyA9IFtcImljb1wiXTtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUuaXNBamF4aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGljb0Nzc1swXSA9IChub2RlLmljb25Ta2luID8gbm9kZS5pY29uU2tpbiArIFwiX1wiIDogXCJcIikgKyBpY29Dc3NbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmlzUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29Dc3MucHVzaChub2RlLm9wZW4gPyBjb25zdHMuZm9sZGVyLk9QRU4gOiBjb25zdHMuZm9sZGVyLkNMT1NFKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb0Nzcy5wdXNoKGNvbnN0cy5mb2xkZXIuRE9DVSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0cy5jbGFzc05hbWUuQlVUVE9OICsgXCIgXCIgKyBpY29Dc3Muam9pbignXycpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VOb2RlSWNvU3R5bGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb1N0eWxlID0gW107XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlLmlzQWpheGluZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IChub2RlLmlzUGFyZW50ICYmIG5vZGUuaWNvbk9wZW4gJiYgbm9kZS5pY29uQ2xvc2UpID8gKG5vZGUub3BlbiA/IG5vZGUuaWNvbk9wZW4gOiBub2RlLmljb25DbG9zZSkgOiBub2RlW3NldHRpbmcuZGF0YS5rZXkuaWNvbl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpY29uKSBpY29TdHlsZS5wdXNoKFwiYmFja2dyb3VuZDp1cmwoXCIsIGljb24sIFwiKSAwIDAgbm8tcmVwZWF0O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmcudmlldy5zaG93SWNvbiA9PSBmYWxzZSB8fCAhdG9vbHMuYXBwbHkoc2V0dGluZy52aWV3LnNob3dJY29uLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWNvU3R5bGUucHVzaChcIndpZHRoOjBweDtoZWlnaHQ6MHB4O1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaWNvU3R5bGUuam9pbignJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFrZU5vZGVMaW5lQ2xhc3M6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVDbGFzcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLnZpZXcuc2hvd0xpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubGV2ZWwgPT0gMCAmJiBub2RlLmlzRmlyc3ROb2RlICYmIG5vZGUuaXNMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUNsYXNzLnB1c2goY29uc3RzLmxpbmUuUk9PVCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5sZXZlbCA9PSAwICYmIG5vZGUuaXNGaXJzdE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVDbGFzcy5wdXNoKGNvbnN0cy5saW5lLlJPT1RTKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlLmlzTGFzdE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVDbGFzcy5wdXNoKGNvbnN0cy5saW5lLkJPVFRPTSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lQ2xhc3MucHVzaChjb25zdHMubGluZS5DRU5URVIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZUNsYXNzLnB1c2goY29uc3RzLmxpbmUuTk9MSU5FKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuaXNQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZUNsYXNzLnB1c2gobm9kZS5vcGVuID8gY29uc3RzLmZvbGRlci5PUEVOIDogY29uc3RzLmZvbGRlci5DTE9TRSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZUNsYXNzLnB1c2goY29uc3RzLmZvbGRlci5ET0NVKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpZXcubWFrZU5vZGVMaW5lQ2xhc3NFeChub2RlKSArIGxpbmVDbGFzcy5qb2luKCdfJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFrZU5vZGVMaW5lQ2xhc3NFeDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3RzLmNsYXNzTmFtZS5CVVRUT04gKyBcIiBcIiArIGNvbnN0cy5jbGFzc05hbWUuTEVWRUwgKyBub2RlLmxldmVsICsgXCIgXCIgKyBjb25zdHMuY2xhc3NOYW1lLlNXSVRDSCArIFwiIFwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VOb2RlVGFyZ2V0OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAobm9kZS50YXJnZXQgfHwgXCJfYmxhbmtcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFrZU5vZGVVcmw6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybEtleSA9IHNldHRpbmcuZGF0YS5rZXkudXJsO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlW3VybEtleV0gPyBub2RlW3VybEtleV0gOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VVbEh0bWw6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBodG1sLCBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKFwiPHVsIGlkPSdcIiwgbm9kZS50SWQsIGNvbnN0cy5pZC5VTCwgXCInIGNsYXNzPSdcIiwgY29uc3RzLmNsYXNzTmFtZS5MRVZFTCwgbm9kZS5sZXZlbCwgXCIgXCIsIHZpZXcubWFrZVVsTGluZUNsYXNzKHNldHRpbmcsIG5vZGUpLCBcIicgc3R5bGU9J2Rpc3BsYXk6XCIsIChub2RlLm9wZW4gPyBcImJsb2NrXCIgOiBcIm5vbmVcIiksIFwiJz5cIik7XG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGh0bWwucHVzaChcIjwvdWw+XCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ha2VVbExpbmVDbGFzczogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKChzZXR0aW5nLnZpZXcuc2hvd0xpbmUgJiYgIW5vZGUuaXNMYXN0Tm9kZSkgPyBjb25zdHMubGluZS5MSU5FIDogXCJcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlQ2hpbGROb2RlczogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVbY2hpbGRLZXldO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZXMpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucmVtb3ZlTm9kZUNhY2hlKHNldHRpbmcsIG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YS5yZW1vdmVTZWxlY3RlZE5vZGUoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG5vZGVbY2hpbGRLZXldO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5nLmRhdGEua2VlcC5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pc1BhcmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBub2RlLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcF9zd2l0Y2hPYmogPSAkJChub2RlLCBjb25zdHMuaWQuU1dJVENILCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcF9pY29PYmogPSAkJChub2RlLCBjb25zdHMuaWQuSUNPTiwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZVN3aXRjaENsYXNzKG5vZGUsIHRtcF9zd2l0Y2hPYmosIGNvbnN0cy5mb2xkZXIuRE9DVSk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZUljb0NsYXNzKG5vZGUsIHRtcF9pY29PYmosIGNvbnN0cy5mb2xkZXIuRE9DVSk7XG4gICAgICAgICAgICAgICAgICAgICQkKG5vZGUsIGNvbnN0cy5pZC5VTCwgc2V0dGluZykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCQobm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogZnVuY3Rpb24gKGRvbSkge1xuICAgICAgICAgICAgICAgIGlmICghZG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY29kZSBzcmM6IGh0dHA6Ly9qc2ZpZGRsZS5uZXQvMDh1NmN4d2ovXG4gICAgICAgICAgICAgICAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5zY3JvbGxJbnRvVmlld0lmTmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEludG9WaWV3SWZOZWVkZWQgPSBmdW5jdGlvbiAoY2VudGVySWZOZWVkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpdGhpbkJvdW5kcyh2YWx1ZSwgbWluLCBtYXgsIGV4dGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gY2VudGVySWZOZWVkZWQgfHwgbWF4IDw9IHZhbHVlICsgZXh0ZW50ICYmIHZhbHVlIDw9IG1pbiArIGV4dGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtaW4gKyBtYXgpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VBcmVhKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdFwiOiBsZWZ0LCBcInRvcFwiOiB0b3AsIFwid2lkdGhcIjogd2lkdGgsIFwiaGVpZ2h0XCI6IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIFwicmlnaHRcIjogbGVmdCArIHdpZHRoLCBcImJvdHRvbVwiOiB0b3AgKyBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBcInRyYW5zbGF0ZVwiOiBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VBcmVhKHggKyBsZWZ0LCB5ICsgdG9wLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIFwicmVsYXRpdmVGcm9tVG9cIjogZnVuY3Rpb24gKGxocywgcmhzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3TGVmdCA9IGxlZnQsIG5ld1RvcCA9IHRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxocyA9IGxocy5vZmZzZXRQYXJlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaHMgPSByaHMub2Zmc2V0UGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxocyA9PT0gcmhzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZWE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgbGhzOyBsaHMgPSBsaHMub2Zmc2V0UGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TGVmdCArPSBsaHMub2Zmc2V0TGVmdCArIGxocy5jbGllbnRMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RvcCArPSBsaHMub2Zmc2V0VG9wICsgbGhzLmNsaWVudFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByaHM7IHJocyA9IHJocy5vZmZzZXRQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMZWZ0IC09IHJocy5vZmZzZXRMZWZ0ICsgcmhzLmNsaWVudExlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VG9wIC09IHJocy5vZmZzZXRUb3AgKyByaHMuY2xpZW50VG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VBcmVhKG5ld0xlZnQsIG5ld1RvcCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50LCBlbGVtID0gdGhpcywgYXJlYSA9IG1ha2VBcmVhKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0TGVmdCwgdGhpcy5vZmZzZXRUb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRXaWR0aCwgdGhpcy5vZmZzZXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRvb2xzLmlzRWxlbWVudChwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaWVudExlZnQgPSBwYXJlbnQub2Zmc2V0TGVmdCArIHBhcmVudC5jbGllbnRMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbGllbnRUb3AgPSBwYXJlbnQub2Zmc2V0VG9wICsgcGFyZW50LmNsaWVudFRvcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgYXJlYSByZWxhdGl2ZSB0byBwYXJlbnQncyBjbGllbnQgYXJlYS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmVhID0gYXJlYS5yZWxhdGl2ZUZyb21UbyhlbGVtLCBwYXJlbnQpLnRyYW5zbGF0ZSgtY2xpZW50TGVmdCwgLWNsaWVudFRvcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc2Nyb2xsTGVmdCA9IHdpdGhpbkJvdW5kcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWEucmlnaHQgLSBwYXJlbnQuY2xpZW50V2lkdGgsIGFyZWEubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNsaWVudFdpZHRoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zY3JvbGxUb3AgPSB3aXRoaW5Cb3VuZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWEuYm90dG9tIC0gcGFyZW50LmNsaWVudEhlaWdodCwgYXJlYS50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGllbnRIZWlnaHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGFjdHVhbCBzY3JvbGwgYW1vdW50IGJ5IHJlYWRpbmcgYmFjayBzY3JvbGwgcHJvcGVydGllcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmVhID0gYXJlYS50cmFuc2xhdGUoY2xpZW50TGVmdCAtIHBhcmVudC5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRUb3AgLSBwYXJlbnQuc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gcGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb20uc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldEZpcnN0Tm9kZTogZnVuY3Rpb24gKHNldHRpbmcsIHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLCBjaGlsZExlbmd0aCA9IHBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGVbY2hpbGRLZXldWzBdLmlzRmlyc3ROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TGFzdE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbiwgY2hpbGRMZW5ndGggPSBwYXJlbnROb2RlW2NoaWxkS2V5XS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkTGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlW2NoaWxkS2V5XVtjaGlsZExlbmd0aCAtIDFdLmlzTGFzdE5vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVOb2RlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciByb290ID0gZGF0YS5nZXRSb290KHNldHRpbmcpLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUgPSAobm9kZS5wYXJlbnRUSWQpID8gbm9kZS5nZXRQYXJlbnROb2RlKCkgOiByb290O1xuXG4gICAgICAgICAgICAgICAgbm9kZS5pc0ZpcnN0Tm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5vZGUuaXNMYXN0Tm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5vZGUuZ2V0UHJlTm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBub2RlLmdldE5leHROb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmdldE5vZGVDYWNoZShzZXR0aW5nLCBub2RlLnRJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQkKG5vZGUsIHNldHRpbmcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGRhdGEucmVtb3ZlTm9kZUNhY2hlKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIGRhdGEucmVtb3ZlU2VsZWN0ZWROb2RlKHNldHRpbmcsIG5vZGUpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJlbnROb2RlW2NoaWxkS2V5XS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudE5vZGVbY2hpbGRLZXldW2ldLnRJZCA9PSBub2RlLnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZVtjaGlsZEtleV0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5zZXRGaXJzdE5vZGUoc2V0dGluZywgcGFyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRMYXN0Tm9kZShzZXR0aW5nLCBwYXJlbnROb2RlKTtcblxuICAgICAgICAgICAgICAgIHZhciB0bXBfdWxPYmosIHRtcF9zd2l0Y2hPYmosIHRtcF9pY29PYmosXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTGVuZ3RoID0gcGFyZW50Tm9kZVtjaGlsZEtleV0ubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgLy9yZXBhaXIgbm9kZXMgb2xkIHBhcmVudFxuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZy5kYXRhLmtlZXAucGFyZW50ICYmIGNoaWxkTGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9vbGQgcGFyZW50Tm9kZSBoYXMgbm8gY2hpbGQgbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5pc1BhcmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdG1wX3VsT2JqID0gJCQocGFyZW50Tm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdG1wX3N3aXRjaE9iaiA9ICQkKHBhcmVudE5vZGUsIGNvbnN0cy5pZC5TV0lUQ0gsIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0bXBfaWNvT2JqID0gJCQocGFyZW50Tm9kZSwgY29uc3RzLmlkLklDT04sIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VTd2l0Y2hDbGFzcyhwYXJlbnROb2RlLCB0bXBfc3dpdGNoT2JqLCBjb25zdHMuZm9sZGVyLkRPQ1UpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VJY29DbGFzcyhwYXJlbnROb2RlLCB0bXBfaWNvT2JqLCBjb25zdHMuZm9sZGVyLkRPQ1UpO1xuICAgICAgICAgICAgICAgICAgICB0bXBfdWxPYmouY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmcudmlldy5zaG93TGluZSAmJiBjaGlsZExlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9vbGQgcGFyZW50Tm9kZSBoYXMgY2hpbGQgbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0xhc3QgPSBwYXJlbnROb2RlW2NoaWxkS2V5XVtjaGlsZExlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICB0bXBfdWxPYmogPSAkJChuZXdMYXN0LCBjb25zdHMuaWQuVUwsIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0bXBfc3dpdGNoT2JqID0gJCQobmV3TGFzdCwgY29uc3RzLmlkLlNXSVRDSCwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHRtcF9pY29PYmogPSAkJChuZXdMYXN0LCBjb25zdHMuaWQuSUNPTiwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnROb2RlID09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnROb2RlW2NoaWxkS2V5XS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbm9kZSB3YXMgcm9vdCwgYW5kIHp0cmVlIGhhcyBvbmx5IG9uZSByb290IGFmdGVyIG1vdmUgbm9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZVN3aXRjaENsYXNzKG5ld0xhc3QsIHRtcF9zd2l0Y2hPYmosIGNvbnN0cy5saW5lLlJPT1QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wX2ZpcnN0X3N3aXRjaE9iaiA9ICQkKHBhcmVudE5vZGVbY2hpbGRLZXldWzBdLCBjb25zdHMuaWQuU1dJVENILCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VTd2l0Y2hDbGFzcyhwYXJlbnROb2RlW2NoaWxkS2V5XVswXSwgdG1wX2ZpcnN0X3N3aXRjaE9iaiwgY29uc3RzLmxpbmUuUk9PVFMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZVN3aXRjaENsYXNzKG5ld0xhc3QsIHRtcF9zd2l0Y2hPYmosIGNvbnN0cy5saW5lLkJPVFRPTSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGxhY2VTd2l0Y2hDbGFzcyhuZXdMYXN0LCB0bXBfc3dpdGNoT2JqLCBjb25zdHMubGluZS5CT1RUT00pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRtcF91bE9iai5yZW1vdmVDbGFzcyhjb25zdHMubGluZS5MSU5FKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwbGFjZUljb0NsYXNzOiBmdW5jdGlvbiAobm9kZSwgb2JqLCBuZXdOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmogfHwgbm9kZS5pc0FqYXhpbmcpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdG1wTmFtZSA9IG9iai5hdHRyKFwiY2xhc3NcIik7XG4gICAgICAgICAgICAgICAgaWYgKHRtcE5hbWUgPT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHRtcExpc3QgPSB0bXBOYW1lLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5ld05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBjb25zdHMuZm9sZGVyLk9QRU46XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgY29uc3RzLmZvbGRlci5DTE9TRTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBjb25zdHMuZm9sZGVyLkRPQ1U6XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBMaXN0W3RtcExpc3QubGVuZ3RoIC0gMV0gPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iai5hdHRyKFwiY2xhc3NcIiwgdG1wTGlzdC5qb2luKFwiX1wiKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwbGFjZVN3aXRjaENsYXNzOiBmdW5jdGlvbiAobm9kZSwgb2JqLCBuZXdOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdG1wTmFtZSA9IG9iai5hdHRyKFwiY2xhc3NcIik7XG4gICAgICAgICAgICAgICAgaWYgKHRtcE5hbWUgPT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHRtcExpc3QgPSB0bXBOYW1lLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5ld05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBjb25zdHMubGluZS5ST09UOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGNvbnN0cy5saW5lLlJPT1RTOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIGNvbnN0cy5saW5lLkNFTlRFUjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBjb25zdHMubGluZS5CT1RUT006XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgY29uc3RzLmxpbmUuTk9MSU5FOlxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wTGlzdFswXSA9IHZpZXcubWFrZU5vZGVMaW5lQ2xhc3NFeChub2RlKSArIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBjb25zdHMuZm9sZGVyLk9QRU46XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgY29uc3RzLmZvbGRlci5DTE9TRTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBjb25zdHMuZm9sZGVyLkRPQ1U6XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBMaXN0WzFdID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmouYXR0cihcImNsYXNzXCIsIHRtcExpc3Quam9pbihcIl9cIikpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdOYW1lICE9PSBjb25zdHMuZm9sZGVyLkRPQ1UpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmouYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbGVjdE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBhZGRGbGFnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhZGRGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsUHJlU2VsZWN0ZWROb2RlKHNldHRpbmcsIG51bGwsIG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkJChub2RlLCBjb25zdHMuaWQuQSwgc2V0dGluZykuYWRkQ2xhc3MoY29uc3RzLm5vZGUuQ1VSU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgIGRhdGEuYWRkU2VsZWN0ZWROb2RlKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5TRUxFQ1RFRCwgW3NldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0Tm9kZUZvbnRDc3M6IGZ1bmN0aW9uIChzZXR0aW5nLCB0cmVlTm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBhT2JqID0gJCQodHJlZU5vZGUsIGNvbnN0cy5pZC5BLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgZm9udENzcyA9IHZpZXcubWFrZU5vZGVGb250Q3NzKHNldHRpbmcsIHRyZWVOb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9udENzcykge1xuICAgICAgICAgICAgICAgICAgICBhT2JqLmNzcyhmb250Q3NzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0Tm9kZUxpbmVJY29zOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBzd2l0Y2hPYmogPSAkJChub2RlLCBjb25zdHMuaWQuU1dJVENILCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgdWxPYmogPSAkJChub2RlLCBjb25zdHMuaWQuVUwsIHNldHRpbmcpLFxuICAgICAgICAgICAgICAgICAgICBpY29PYmogPSAkJChub2RlLCBjb25zdHMuaWQuSUNPTiwgc2V0dGluZyksXG4gICAgICAgICAgICAgICAgICAgIHVsTGluZSA9IHZpZXcubWFrZVVsTGluZUNsYXNzKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmICh1bExpbmUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdWxPYmoucmVtb3ZlQ2xhc3MoY29uc3RzLmxpbmUuTElORSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdWxPYmouYWRkQ2xhc3ModWxMaW5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3dpdGNoT2JqLmF0dHIoXCJjbGFzc1wiLCB2aWV3Lm1ha2VOb2RlTGluZUNsYXNzKHNldHRpbmcsIG5vZGUpKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5pc1BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hPYmoucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaE9iai5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWNvT2JqLnJlbW92ZUF0dHIoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgICAgICBpY29PYmouYXR0cihcInN0eWxlXCIsIHZpZXcubWFrZU5vZGVJY29TdHlsZShzZXR0aW5nLCBub2RlKSk7XG4gICAgICAgICAgICAgICAgaWNvT2JqLmF0dHIoXCJjbGFzc1wiLCB2aWV3Lm1ha2VOb2RlSWNvQ2xhc3Moc2V0dGluZywgbm9kZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldE5vZGVOYW1lOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9IGRhdGEuZ2V0Tm9kZVRpdGxlKHNldHRpbmcsIG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBuT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLlNQQU4sIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIG5PYmouZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZy52aWV3Lm5hbWVJc0hUTUwpIHtcbiAgICAgICAgICAgICAgICAgICAgbk9iai5odG1sKGRhdGEuZ2V0Tm9kZU5hbWUoc2V0dGluZywgbm9kZSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5PYmoudGV4dChkYXRhLmdldE5vZGVOYW1lKHNldHRpbmcsIG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLmFwcGx5KHNldHRpbmcudmlldy5zaG93VGl0bGUsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0sIHNldHRpbmcudmlldy5zaG93VGl0bGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLkEsIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICBhT2JqLmF0dHIoXCJ0aXRsZVwiLCAhdGl0bGUgPyBcIlwiIDogdGl0bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXROb2RlVGFyZ2V0OiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBhT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLkEsIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIGFPYmouYXR0cihcInRhcmdldFwiLCB2aWV3Lm1ha2VOb2RlVGFyZ2V0KG5vZGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXROb2RlVXJsOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBhT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLkEsIHNldHRpbmcpLFxuICAgICAgICAgICAgICAgICAgICB1cmwgPSB2aWV3Lm1ha2VOb2RlVXJsKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmICh1cmwgPT0gbnVsbCB8fCB1cmwubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYU9iai5yZW1vdmVBdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhT2JqLmF0dHIoXCJocmVmXCIsIHVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN3aXRjaE5vZGU6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUub3BlbiB8fCAhdG9vbHMuY2FuQXN5bmMoc2V0dGluZywgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5leHBhbmRDb2xsYXBzZU5vZGUoc2V0dGluZywgbm9kZSwgIW5vZGUub3Blbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5nLmFzeW5jLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZpZXcuYXN5bmNOb2RlKHNldHRpbmcsIG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlTm9kZShzZXR0aW5nLCBub2RlLCAhbm9kZS5vcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlTm9kZShzZXR0aW5nLCBub2RlLCAhbm9kZS5vcGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgLy8gelRyZWUgZGVmaW5kXG4gICAgJC5mbi56VHJlZSA9IHtcbiAgICAgICAgY29uc3RzOiBfY29uc3RzLFxuICAgICAgICBfejoge1xuICAgICAgICAgICAgdG9vbHM6IHRvb2xzLFxuICAgICAgICAgICAgdmlldzogdmlldyxcbiAgICAgICAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0WlRyZWVPYmo6IGZ1bmN0aW9uICh0cmVlSWQpIHtcbiAgICAgICAgICAgIHZhciBvID0gZGF0YS5nZXRaVHJlZVRvb2xzKHRyZWVJZCk7XG4gICAgICAgICAgICByZXR1cm4gbyA/IG8gOiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAodHJlZUlkKSB7XG4gICAgICAgICAgICBpZiAoISF0cmVlSWQgJiYgdHJlZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmRlc3Ryb3koZGF0YS5nZXRTZXR0aW5nKHRyZWVJZCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZGVzdHJveShzZXR0aW5nc1tzXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbml0OiBmdW5jdGlvbiAob2JqLCB6U2V0dGluZywgek5vZGVzKSB7XG4gICAgICAgICAgICB2YXIgc2V0dGluZyA9IHRvb2xzLmNsb25lKF9zZXR0aW5nKTtcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHNldHRpbmcsIHpTZXR0aW5nKTtcbiAgICAgICAgICAgIHNldHRpbmcudHJlZUlkID0gb2JqLmF0dHIoXCJpZFwiKTtcbiAgICAgICAgICAgIHNldHRpbmcudHJlZU9iaiA9IG9iajtcbiAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai5lbXB0eSgpO1xuICAgICAgICAgICAgc2V0dGluZ3Nbc2V0dGluZy50cmVlSWRdID0gc2V0dGluZztcbiAgICAgICAgICAgIC8vRm9yIHNvbWUgb2xkZXIgYnJvd3NlciwoZS5nLiwgaWU2KVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlLm1heEhlaWdodCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHNldHRpbmcudmlldy5leHBhbmRTcGVlZCA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLmluaXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyksXG4gICAgICAgICAgICAgICAgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgek5vZGVzID0gek5vZGVzID8gdG9vbHMuY2xvbmUodG9vbHMuaXNBcnJheSh6Tm9kZXMpID8gek5vZGVzIDogW3pOb2Rlc10pIDogW107XG4gICAgICAgICAgICBpZiAoc2V0dGluZy5kYXRhLnNpbXBsZURhdGEuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgcm9vdFtjaGlsZEtleV0gPSBkYXRhLnRyYW5zZm9ybVRvelRyZWVGb3JtYXQoc2V0dGluZywgek5vZGVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcm9vdFtjaGlsZEtleV0gPSB6Tm9kZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRhdGEuaW5pdENhY2hlKHNldHRpbmcpO1xuICAgICAgICAgICAgZXZlbnQudW5iaW5kVHJlZShzZXR0aW5nKTtcbiAgICAgICAgICAgIGV2ZW50LmJpbmRUcmVlKHNldHRpbmcpO1xuICAgICAgICAgICAgZXZlbnQudW5iaW5kRXZlbnQoc2V0dGluZyk7XG4gICAgICAgICAgICBldmVudC5iaW5kRXZlbnQoc2V0dGluZyk7XG5cbiAgICAgICAgICAgIHZhciB6VHJlZVRvb2xzID0ge1xuICAgICAgICAgICAgICAgIHNldHRpbmc6IHNldHRpbmcsXG4gICAgICAgICAgICAgICAgYWRkTm9kZXM6IGZ1bmN0aW9uIChwYXJlbnROb2RlLCBpbmRleCwgbmV3Tm9kZXMsIGlzU2lsZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyZW50Tm9kZSkgcGFyZW50Tm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnROb2RlICYmICFwYXJlbnROb2RlLmlzUGFyZW50ICYmIHNldHRpbmcuZGF0YS5rZWVwLmxlYWYpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gcGFyc2VJbnQoaW5kZXgsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NpbGVudCA9ICEhbmV3Tm9kZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdOb2RlcyA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld05vZGVzKSByZXR1cm4gbnVsbDtcblxuXG4gICAgICAgICAgICAgICAgICAgIHZhciB4TmV3Tm9kZXMgPSB0b29scy5jbG9uZSh0b29scy5pc0FycmF5KG5ld05vZGVzKSA/IG5ld05vZGVzIDogW25ld05vZGVzXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmFkZE5vZGVzKHNldHRpbmcsIHBhcmVudE5vZGUsIGluZGV4LCB4TmV3Tm9kZXMsIChpc1NpbGVudCA9PSB0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuY2FuQXN5bmMoc2V0dGluZywgcGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuYXN5bmNOb2RlKHNldHRpbmcsIHBhcmVudE5vZGUsIGlzU2lsZW50LCBhZGRDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4TmV3Tm9kZXM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW5jZWxTZWxlY3RlZE5vZGU6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsUHJlU2VsZWN0ZWROb2RlKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmRlc3Ryb3koc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBleHBhbmRBbGw6IGZ1bmN0aW9uIChleHBhbmRGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZEZsYWcgPSAhIWV4cGFuZEZsYWc7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZXhwYW5kQ29sbGFwc2VTb25Ob2RlKHNldHRpbmcsIG51bGwsIGV4cGFuZEZsYWcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwYW5kRmxhZztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGV4cGFuZE5vZGU6IGZ1bmN0aW9uIChub2RlLCBleHBhbmRGbGFnLCBzb25TaWduLCBmb2N1cywgY2FsbGJhY2tGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kZSB8fCAhbm9kZS5pc1BhcmVudCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBhbmRGbGFnICE9PSB0cnVlICYmIGV4cGFuZEZsYWcgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRGbGFnID0gIW5vZGUub3BlbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0ZsYWcgPSAhIWNhbGxiYWNrRmxhZztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tGbGFnICYmIGV4cGFuZEZsYWcgJiYgKHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlRXhwYW5kLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCB0cnVlKSA9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhbGxiYWNrRmxhZyAmJiAhZXhwYW5kRmxhZyAmJiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVDb2xsYXBzZSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgdHJ1ZSkgPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kRmxhZyAmJiBub2RlLnBhcmVudFRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5leHBhbmRDb2xsYXBzZVBhcmVudE5vZGUoc2V0dGluZywgbm9kZS5nZXRQYXJlbnROb2RlKCksIGV4cGFuZEZsYWcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kRmxhZyA9PT0gbm9kZS5vcGVuICYmICFzb25TaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0Um9vdChzZXR0aW5nKS5leHBhbmRUcmlnZ2VyRmxhZyA9IGNhbGxiYWNrRmxhZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0b29scy5jYW5Bc3luYyhzZXR0aW5nLCBub2RlKSAmJiBzb25TaWduKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlU29uTm9kZShzZXR0aW5nLCBub2RlLCBleHBhbmRGbGFnLCB0cnVlLCBzaG93Tm9kZUZvY3VzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUub3BlbiA9ICFleHBhbmRGbGFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zd2l0Y2hOb2RlKHRoaXMuc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93Tm9kZUZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cGFuZEZsYWc7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2hvd05vZGVGb2N1cygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gJCQobm9kZSwgc2V0dGluZykuZ2V0KDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgJiYgZm9jdXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zY3JvbGxJbnRvVmlldyhhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Tm9kZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0Tm9kZXMoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXROb2RlQnlQYXJhbTogZnVuY3Rpb24gKGtleSwgdmFsdWUsIHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFrZXkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXROb2RlQnlQYXJhbShzZXR0aW5nLCBwYXJlbnROb2RlID8gcGFyZW50Tm9kZVtzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuXSA6IGRhdGEuZ2V0Tm9kZXMoc2V0dGluZyksIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Tm9kZUJ5VElkOiBmdW5jdGlvbiAodElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmdldE5vZGVDYWNoZShzZXR0aW5nLCB0SWQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Tm9kZXNCeVBhcmFtOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgcGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWtleSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmdldE5vZGVzQnlQYXJhbShzZXR0aW5nLCBwYXJlbnROb2RlID8gcGFyZW50Tm9kZVtzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuXSA6IGRhdGEuZ2V0Tm9kZXMoc2V0dGluZyksIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Tm9kZXNCeVBhcmFtRnV6enk6IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgha2V5KSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0Tm9kZXNCeVBhcmFtRnV6enkoc2V0dGluZywgcGFyZW50Tm9kZSA/IHBhcmVudE5vZGVbc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbl0gOiBkYXRhLmdldE5vZGVzKHNldHRpbmcpLCBrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldE5vZGVzQnlGaWx0ZXI6IGZ1bmN0aW9uIChmaWx0ZXIsIGlzU2luZ2xlLCBwYXJlbnROb2RlLCBpbnZva2VQYXJhbSkge1xuICAgICAgICAgICAgICAgICAgICBpc1NpbmdsZSA9ICEhaXNTaW5nbGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyIHx8ICh0eXBlb2YgZmlsdGVyICE9IFwiZnVuY3Rpb25cIikpIHJldHVybiAoaXNTaW5nbGUgPyBudWxsIDogW10pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXROb2Rlc0J5RmlsdGVyKHNldHRpbmcsIHBhcmVudE5vZGUgPyBwYXJlbnROb2RlW3NldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW5dIDogZGF0YS5nZXROb2RlcyhzZXR0aW5nKSwgZmlsdGVyLCBpc1NpbmdsZSwgaW52b2tlUGFyYW0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0Tm9kZUluZGV4OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IChub2RlLnBhcmVudFRJZCkgPyBub2RlLmdldFBhcmVudE5vZGUoKSA6IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJlbnROb2RlW2NoaWxkS2V5XS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnROb2RlW2NoaWxkS2V5XVtpXSA9PSBub2RlKSByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRTZWxlY3RlZE5vZGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gW10sIGxpc3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZykuY3VyU2VsZWN0ZWRMaXN0O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByLnB1c2gobGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkTm9kZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuaXNTZWxlY3RlZE5vZGUoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZUFzeW5jQ2hpbGROb2Rlc1Byb21pc2U6IGZ1bmN0aW9uIChwYXJlbnROb2RlLCByZWxvYWRUeXBlLCBpc1NpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgelRyZWVUb29scy5yZUFzeW5jQ2hpbGROb2RlcyhwYXJlbnROb2RlLCByZWxvYWRUeXBlLCBpc1NpbGVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBhcmVudE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVBc3luY0NoaWxkTm9kZXM6IGZ1bmN0aW9uIChwYXJlbnROb2RlLCByZWxvYWRUeXBlLCBpc1NpbGVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmcuYXN5bmMuZW5hYmxlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1Jvb3QgPSAhcGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVsb2FkVHlwZSA9PSBcInJlZnJlc2hcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gdGhpcy5zZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJlbnROb2RlW2NoaWxkS2V5XSA/IHBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aCA6IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlbW92ZU5vZGVDYWNoZShzZXR0aW5nLCBwYXJlbnROb2RlW2NoaWxkS2V5XVtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnJlbW92ZVNlbGVjdGVkTm9kZShzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGVbY2hpbGRLZXldID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSb290KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nLnRyZWVPYmouZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsT2JqID0gJCQocGFyZW50Tm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bE9iai5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuYXN5bmNOb2RlKHRoaXMuc2V0dGluZywgaXNSb290ID8gbnVsbCA6IHBhcmVudE5vZGUsICEhaXNTaWxlbnQsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nLnRyZWVPYmouZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyksXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IHJvb3Rbc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbl1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbml0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdFtzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuXSA9IG5vZGVzXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuaW5pdENhY2hlKHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNyZWF0ZU5vZGVzKHNldHRpbmcsIDAsIHJvb3Rbc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbl0sIG51bGwsIC0xKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkTm9kZXM6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVbY2hpbGRLZXldO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZUNoaWxkTm9kZXMoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlcyA/IG5vZGVzIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbW92ZU5vZGU6IGZ1bmN0aW9uIChub2RlLCBjYWxsYmFja0ZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrRmxhZyA9ICEhY2FsbGJhY2tGbGFnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tGbGFnICYmIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlUmVtb3ZlLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCB0cnVlKSA9PSBmYWxzZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZU5vZGUoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFja0ZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZy50cmVlT2JqLnRyaWdnZXIoY29uc3RzLmV2ZW50LlJFTU9WRSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNlbGVjdE5vZGU6IGZ1bmN0aW9uIChub2RlLCBhZGRGbGFnLCBpc1NpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2xzLnVDYW5EbyhzZXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmxhZyA9IHNldHRpbmcudmlldy5zZWxlY3RlZE11bHRpICYmIGFkZEZsYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5wYXJlbnRUSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmV4cGFuZENvbGxhcHNlUGFyZW50Tm9kZShzZXR0aW5nLCBub2RlLmdldFBhcmVudE5vZGUoKSwgdHJ1ZSwgZmFsc2UsIHNob3dOb2RlRm9jdXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNTaWxlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJChub2RlLCBzZXR0aW5nKS5mb2N1cygpLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZWxlY3ROb2RlKHNldHRpbmcsIG5vZGUsIGFkZEZsYWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2hvd05vZGVGb2N1cygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1NpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gJCQobm9kZSwgc2V0dGluZykuZ2V0KDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zY3JvbGxJbnRvVmlldyhhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtVG96VHJlZU5vZGVzOiBmdW5jdGlvbiAoc2ltcGxlTm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudHJhbnNmb3JtVG96VHJlZUZvcm1hdChzZXR0aW5nLCBzaW1wbGVOb2Rlcyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ub0FycmF5OiBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudHJhbnNmb3JtVG9BcnJheUZvcm1hdChzZXR0aW5nLCBub2Rlcyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1cGRhdGVOb2RlOiBmdW5jdGlvbiAobm9kZSwgY2hlY2tUeXBlRmxhZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5PYmogPSAkJChub2RlLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5PYmouZ2V0KDApICYmIHRvb2xzLnVDYW5EbyhzZXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXROb2RlTmFtZShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZVRhcmdldChzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZVVybChzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZUxpbmVJY29zKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXROb2RlRm9udENzcyhzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvb3QudHJlZVRvb2xzID0gelRyZWVUb29scztcbiAgICAgICAgICAgIGRhdGEuc2V0WlRyZWVUb29scyhzZXR0aW5nLCB6VHJlZVRvb2xzKTtcblxuICAgICAgICAgICAgaWYgKHJvb3RbY2hpbGRLZXldICYmIHJvb3RbY2hpbGRLZXldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmNyZWF0ZU5vZGVzKHNldHRpbmcsIDAsIHJvb3RbY2hpbGRLZXldLCBudWxsLCAtMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmcuYXN5bmMuZW5hYmxlICYmIHNldHRpbmcuYXN5bmMudXJsICYmIHNldHRpbmcuYXN5bmMudXJsICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHZpZXcuYXN5bmNOb2RlKHNldHRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHpUcmVlVG9vbHM7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHp0ID0gJC5mbi56VHJlZSxcbiAgICAgICAgJCQgPSB0b29scy4kLFxuICAgICAgICBjb25zdHMgPSB6dC5jb25zdHM7XG59KShqUXVlcnkpO1xuLypcbiAqIEpRdWVyeSB6VHJlZSBleGNoZWNrIHYzLjUuMjlcbiAqIGh0dHA6Ly90cmVlanMuY24vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEwIEh1bnRlci56XG4gKlxuICogTGljZW5zZWQgc2FtZSBhcyBqcXVlcnkgLSBNSVQgTGljZW5zZVxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAqXG4gKiBlbWFpbDogaHVudGVyLnpAMjYzLm5ldFxuICogRGF0ZTogMjAxNy0wNi0xOVxuICovXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAvL2RlZmF1bHQgY29uc3RzIG9mIGV4Y2hlY2tcbiAgICB2YXIgX2NvbnN0cyA9IHtcbiAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgIENIRUNLOiBcInp0cmVlX2NoZWNrXCJcbiAgICAgICAgfSxcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIENIRUNLOiBcIl9jaGVja1wiXG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrYm94OiB7XG4gICAgICAgICAgICBTVFlMRTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgREVGQVVMVDogXCJjaGtcIixcbiAgICAgICAgICAgIERJU0FCTEVEOiBcImRpc2FibGVcIixcbiAgICAgICAgICAgIEZBTFNFOiBcImZhbHNlXCIsXG4gICAgICAgICAgICBUUlVFOiBcInRydWVcIixcbiAgICAgICAgICAgIEZVTEw6IFwiZnVsbFwiLFxuICAgICAgICAgICAgUEFSVDogXCJwYXJ0XCIsXG4gICAgICAgICAgICBGT0NVUzogXCJmb2N1c1wiXG4gICAgICAgIH0sXG4gICAgICAgIHJhZGlvOiB7XG4gICAgICAgICAgICBTVFlMRTogXCJyYWRpb1wiLFxuICAgICAgICAgICAgVFlQRV9BTEw6IFwiYWxsXCIsXG4gICAgICAgICAgICBUWVBFX0xFVkVMOiBcImxldmVsXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCBzZXR0aW5nIG9mIGV4Y2hlY2tcbiAgICAgICAgX3NldHRpbmcgPSB7XG4gICAgICAgICAgICBjaGVjazoge1xuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYXV0b0NoZWNrVHJpZ2dlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2hrU3R5bGU6IF9jb25zdHMuY2hlY2tib3guU1RZTEUsXG4gICAgICAgICAgICAgICAgbm9jaGVja0luaGVyaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNoa0Rpc2FibGVkSW5oZXJpdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmFkaW9UeXBlOiBfY29uc3RzLnJhZGlvLlRZUEVfTEVWRUwsXG4gICAgICAgICAgICAgICAgY2hrYm94VHlwZToge1xuICAgICAgICAgICAgICAgICAgICBcIllcIjogXCJwc1wiLFxuICAgICAgICAgICAgICAgICAgICBcIk5cIjogXCJwc1wiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBrZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogXCJjaGVja2VkXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICBiZWZvcmVDaGVjazogbnVsbCxcbiAgICAgICAgICAgICAgICBvbkNoZWNrOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCByb290IG9mIGV4Y2hlY2tcbiAgICAgICAgX2luaXRSb290ID0gZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgIHZhciByID0gZGF0YS5nZXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgci5yYWRpb0NoZWNrZWRMaXN0ID0gW107XG4gICAgICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCBjYWNoZSBvZiBleGNoZWNrXG4gICAgICAgIF9pbml0Q2FjaGUgPSBmdW5jdGlvbiAodHJlZUlkKSB7IH0sXG4gICAgICAgIC8vZGVmYXVsdCBiaW5kIGV2ZW50IG9mIGV4Y2hlY2tcbiAgICAgICAgX2JpbmRFdmVudCA9IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHNldHRpbmcudHJlZU9iaixcbiAgICAgICAgICAgICAgICBjID0gY29uc3RzLmV2ZW50O1xuICAgICAgICAgICAgby5iaW5kKGMuQ0hFQ0ssIGZ1bmN0aW9uIChldmVudCwgc3JjRXZlbnQsIHRyZWVJZCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnNyY0V2ZW50ID0gc3JjRXZlbnQ7XG4gICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5vbkNoZWNrLCBbZXZlbnQsIHRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIF91bmJpbmRFdmVudCA9IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHNldHRpbmcudHJlZU9iaixcbiAgICAgICAgICAgICAgICBjID0gY29uc3RzLmV2ZW50O1xuICAgICAgICAgICAgby51bmJpbmQoYy5DSEVDSyk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCBldmVudCBwcm94eSBvZiBleGNoZWNrXG4gICAgICAgIF9ldmVudFByb3h5ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCxcbiAgICAgICAgICAgICAgICBzZXR0aW5nID0gZGF0YS5nZXRTZXR0aW5nKGUuZGF0YS50cmVlSWQpLFxuICAgICAgICAgICAgICAgIHRJZCA9IFwiXCIsIG5vZGUgPSBudWxsLFxuICAgICAgICAgICAgICAgIG5vZGVFdmVudFR5cGUgPSBcIlwiLCB0cmVlRXZlbnRUeXBlID0gXCJcIixcbiAgICAgICAgICAgICAgICBub2RlRXZlbnRDYWxsYmFjayA9IG51bGwsIHRyZWVFdmVudENhbGxiYWNrID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRvb2xzLmVxcyhlLnR5cGUsIFwibW91c2VvdmVyXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcuY2hlY2suZW5hYmxlICYmIHRvb2xzLmVxcyh0YXJnZXQudGFnTmFtZSwgXCJzcGFuXCIpICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ0cmVlTm9kZVwiICsgY29uc3RzLmlkLkNIRUNLKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0SWQgPSB0b29scy5nZXROb2RlTWFpbkRvbSh0YXJnZXQpLmlkO1xuICAgICAgICAgICAgICAgICAgICBub2RlRXZlbnRUeXBlID0gXCJtb3VzZW92ZXJDaGVja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodG9vbHMuZXFzKGUudHlwZSwgXCJtb3VzZW91dFwiKSkge1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmVuYWJsZSAmJiB0b29scy5lcXModGFyZ2V0LnRhZ05hbWUsIFwic3BhblwiKSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwidHJlZU5vZGVcIiArIGNvbnN0cy5pZC5DSEVDSykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odGFyZ2V0KS5pZDtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50VHlwZSA9IFwibW91c2VvdXRDaGVja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodG9vbHMuZXFzKGUudHlwZSwgXCJjbGlja1wiKSkge1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmVuYWJsZSAmJiB0b29scy5lcXModGFyZ2V0LnRhZ05hbWUsIFwic3BhblwiKSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwidHJlZU5vZGVcIiArIGNvbnN0cy5pZC5DSEVDSykgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odGFyZ2V0KS5pZDtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50VHlwZSA9IFwiY2hlY2tOb2RlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGRhdGEuZ2V0Tm9kZUNhY2hlKHNldHRpbmcsIHRJZCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChub2RlRXZlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja05vZGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVFdmVudENhbGxiYWNrID0gX2hhbmRsZXIub25DaGVja05vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1vdXNlb3ZlckNoZWNrXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlRXZlbnRDYWxsYmFjayA9IF9oYW5kbGVyLm9uTW91c2VvdmVyQ2hlY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1vdXNlb3V0Q2hlY2tcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVFdmVudENhbGxiYWNrID0gX2hhbmRsZXIub25Nb3VzZW91dENoZWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByb3h5UmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIHN0b3A6IG5vZGVFdmVudFR5cGUgPT09IFwiY2hlY2tOb2RlXCIsXG4gICAgICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgICAgICBub2RlRXZlbnRUeXBlOiBub2RlRXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgIG5vZGVFdmVudENhbGxiYWNrOiBub2RlRXZlbnRDYWxsYmFjayxcbiAgICAgICAgICAgICAgICB0cmVlRXZlbnRUeXBlOiB0cmVlRXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgIHRyZWVFdmVudENhbGxiYWNrOiB0cmVlRXZlbnRDYWxsYmFja1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBwcm94eVJlc3VsdFxuICAgICAgICB9LFxuICAgICAgICAvL2RlZmF1bHQgaW5pdCBub2RlIG9mIGV4Y2hlY2tcbiAgICAgICAgX2luaXROb2RlID0gZnVuY3Rpb24gKHNldHRpbmcsIGxldmVsLCBuLCBwYXJlbnROb2RlLCBpc0ZpcnN0Tm9kZSwgaXNMYXN0Tm9kZSwgb3BlbkZsYWcpIHtcbiAgICAgICAgICAgIGlmICghbikgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGNoZWNrZWRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoZWNrZWQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5bY2hlY2tlZEtleV0gPT0gXCJzdHJpbmdcIikgbltjaGVja2VkS2V5XSA9IHRvb2xzLmVxcyhuW2NoZWNrZWRLZXldLCBcInRydWVcIik7XG4gICAgICAgICAgICBuW2NoZWNrZWRLZXldID0gISFuW2NoZWNrZWRLZXldO1xuICAgICAgICAgICAgbi5jaGVja2VkT2xkID0gbltjaGVja2VkS2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygbi5ub2NoZWNrID09IFwic3RyaW5nXCIpIG4ubm9jaGVjayA9IHRvb2xzLmVxcyhuLm5vY2hlY2ssIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIG4ubm9jaGVjayA9ICEhbi5ub2NoZWNrIHx8IChzZXR0aW5nLmNoZWNrLm5vY2hlY2tJbmhlcml0ICYmIHBhcmVudE5vZGUgJiYgISFwYXJlbnROb2RlLm5vY2hlY2spO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuLmNoa0Rpc2FibGVkID09IFwic3RyaW5nXCIpIG4uY2hrRGlzYWJsZWQgPSB0b29scy5lcXMobi5jaGtEaXNhYmxlZCwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgbi5jaGtEaXNhYmxlZCA9ICEhbi5jaGtEaXNhYmxlZCB8fCAoc2V0dGluZy5jaGVjay5jaGtEaXNhYmxlZEluaGVyaXQgJiYgcGFyZW50Tm9kZSAmJiAhIXBhcmVudE5vZGUuY2hrRGlzYWJsZWQpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuLmhhbGZDaGVjayA9PSBcInN0cmluZ1wiKSBuLmhhbGZDaGVjayA9IHRvb2xzLmVxcyhuLmhhbGZDaGVjaywgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgbi5oYWxmQ2hlY2sgPSAhIW4uaGFsZkNoZWNrO1xuICAgICAgICAgICAgbi5jaGVja19DaGlsZF9TdGF0ZSA9IC0xO1xuICAgICAgICAgICAgbi5jaGVja19Gb2N1cyA9IGZhbHNlO1xuICAgICAgICAgICAgbi5nZXRDaGVja1N0YXR1cyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRhdGEuZ2V0Q2hlY2tTdGF0dXMoc2V0dGluZywgbik7IH07XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmNoa1N0eWxlID09IGNvbnN0cy5yYWRpby5TVFlMRSAmJiBzZXR0aW5nLmNoZWNrLnJhZGlvVHlwZSA9PSBjb25zdHMucmFkaW8uVFlQRV9BTEwgJiYgbltjaGVja2VkS2V5XSkge1xuICAgICAgICAgICAgICAgIHZhciByID0gZGF0YS5nZXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIHIucmFkaW9DaGVja2VkTGlzdC5wdXNoKG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvL2FkZCBkb20gZm9yIGNoZWNrXG4gICAgICAgIF9iZWZvcmVBID0gZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUsIGh0bWwpIHtcbiAgICAgICAgICAgIHZhciBjaGVja2VkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGVja2VkO1xuICAgICAgICAgICAgaWYgKHNldHRpbmcuY2hlY2suZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5tYWtlQ2hrRmxhZyhzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICBodG1sLnB1c2goXCI8c3BhbiBJRD0nXCIsIG5vZGUudElkLCBjb25zdHMuaWQuQ0hFQ0ssIFwiJyBjbGFzcz0nXCIsIHZpZXcubWFrZUNoa0NsYXNzKHNldHRpbmcsIG5vZGUpLCBcIicgdHJlZU5vZGVcIiwgY29uc3RzLmlkLkNIRUNLLCAobm9kZS5ub2NoZWNrID09PSB0cnVlID8gXCIgc3R5bGU9J2Rpc3BsYXk6bm9uZTsnXCIgOiBcIlwiKSwgXCI+PC9zcGFuPlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy91cGRhdGUgelRyZWVPYmosIGFkZCBtZXRob2Qgb2YgY2hlY2tcbiAgICAgICAgX3pUcmVlVG9vbHMgPSBmdW5jdGlvbiAoc2V0dGluZywgelRyZWVUb29scykge1xuICAgICAgICAgICAgelRyZWVUb29scy5jaGVja05vZGUgPSBmdW5jdGlvbiAobm9kZSwgY2hlY2tlZCwgY2hlY2tUeXBlRmxhZywgY2FsbGJhY2tGbGFnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRLZXkgPSB0aGlzLnNldHRpbmcuZGF0YS5rZXkuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGtEaXNhYmxlZCA9PT0gdHJ1ZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2VkICE9PSB0cnVlICYmIGNoZWNrZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQgPSAhbm9kZVtjaGVja2VkS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tGbGFnID0gISFjYWxsYmFja0ZsYWc7XG5cbiAgICAgICAgICAgICAgICBpZiAobm9kZVtjaGVja2VkS2V5XSA9PT0gY2hlY2tlZCAmJiAhY2hlY2tUeXBlRmxhZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYWxsYmFja0ZsYWcgJiYgdG9vbHMuYXBwbHkodGhpcy5zZXR0aW5nLmNhbGxiYWNrLmJlZm9yZUNoZWNrLCBbdGhpcy5zZXR0aW5nLnRyZWVJZCwgbm9kZV0sIHRydWUpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLnVDYW5Ebyh0aGlzLnNldHRpbmcpICYmIHRoaXMuc2V0dGluZy5jaGVjay5lbmFibGUgJiYgbm9kZS5ub2NoZWNrICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVbY2hlY2tlZEtleV0gPSBjaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tPYmogPSAkJChub2RlLCBjb25zdHMuaWQuQ0hFQ0ssIHRoaXMuc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1R5cGVGbGFnIHx8IHRoaXMuc2V0dGluZy5jaGVjay5jaGtTdHlsZSA9PT0gY29uc3RzLnJhZGlvLlNUWUxFKSB2aWV3LmNoZWNrTm9kZVJlbGF0aW9uKHRoaXMuc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Q2hrQ2xhc3ModGhpcy5zZXR0aW5nLCBjaGVja09iaiwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3NXaXRoU2VsZih0aGlzLnNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5DSEVDSywgW251bGwsIHRoaXMuc2V0dGluZy50cmVlSWQsIG5vZGVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgelRyZWVUb29scy5jaGVja0FsbE5vZGVzID0gZnVuY3Rpb24gKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB2aWV3LnJlcGFpckFsbENoayh0aGlzLnNldHRpbmcsICEhY2hlY2tlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHpUcmVlVG9vbHMuZ2V0Q2hlY2tlZE5vZGVzID0gZnVuY3Rpb24gKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSB0aGlzLnNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9IChjaGVja2VkICE9PSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0VHJlZUNoZWNrZWROb2Rlcyh0aGlzLnNldHRpbmcsIGRhdGEuZ2V0Um9vdCh0aGlzLnNldHRpbmcpW2NoaWxkS2V5XSwgY2hlY2tlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHpUcmVlVG9vbHMuZ2V0Q2hhbmdlQ2hlY2tlZE5vZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IHRoaXMuc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5nZXRUcmVlQ2hhbmdlQ2hlY2tlZE5vZGVzKHRoaXMuc2V0dGluZywgZGF0YS5nZXRSb290KHRoaXMuc2V0dGluZylbY2hpbGRLZXldKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgelRyZWVUb29scy5zZXRDaGtEaXNhYmxlZCA9IGZ1bmN0aW9uIChub2RlLCBkaXNhYmxlZCwgaW5oZXJpdFBhcmVudCwgaW5oZXJpdENoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQgPSAhIWRpc2FibGVkO1xuICAgICAgICAgICAgICAgIGluaGVyaXRQYXJlbnQgPSAhIWluaGVyaXRQYXJlbnQ7XG4gICAgICAgICAgICAgICAgaW5oZXJpdENoaWxkcmVuID0gISFpbmhlcml0Q2hpbGRyZW47XG4gICAgICAgICAgICAgICAgdmlldy5yZXBhaXJTb25DaGtEaXNhYmxlZCh0aGlzLnNldHRpbmcsIG5vZGUsIGRpc2FibGVkLCBpbmhlcml0Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrRGlzYWJsZWQodGhpcy5zZXR0aW5nLCBub2RlLmdldFBhcmVudE5vZGUoKSwgZGlzYWJsZWQsIGluaGVyaXRQYXJlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgX3VwZGF0ZU5vZGUgPSB6VHJlZVRvb2xzLnVwZGF0ZU5vZGU7XG4gICAgICAgICAgICB6VHJlZVRvb2xzLnVwZGF0ZU5vZGUgPSBmdW5jdGlvbiAobm9kZSwgY2hlY2tUeXBlRmxhZykge1xuICAgICAgICAgICAgICAgIGlmIChfdXBkYXRlTm9kZSkgX3VwZGF0ZU5vZGUuYXBwbHkoelRyZWVUb29scywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUgfHwgIXRoaXMuc2V0dGluZy5jaGVjay5lbmFibGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgbk9iaiA9ICQkKG5vZGUsIHRoaXMuc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgaWYgKG5PYmouZ2V0KDApICYmIHRvb2xzLnVDYW5Ebyh0aGlzLnNldHRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja09iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5DSEVDSywgdGhpcy5zZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrVHlwZUZsYWcgPT0gdHJ1ZSB8fCB0aGlzLnNldHRpbmcuY2hlY2suY2hrU3R5bGUgPT09IGNvbnN0cy5yYWRpby5TVFlMRSkgdmlldy5jaGVja05vZGVSZWxhdGlvbih0aGlzLnNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnNldENoa0NsYXNzKHRoaXMuc2V0dGluZywgY2hlY2tPYmosIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGFpclBhcmVudENoa0NsYXNzV2l0aFNlbGYodGhpcy5zZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vbWV0aG9kIG9mIG9wZXJhdGUgZGF0YVxuICAgICAgICBfZGF0YSA9IHtcbiAgICAgICAgICAgIGdldFJhZGlvQ2hlY2tlZExpc3Q6IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRMaXN0ID0gZGF0YS5nZXRSb290KHNldHRpbmcpLnJhZGlvQ2hlY2tlZExpc3Q7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBjaGVja2VkTGlzdC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmdldE5vZGVDYWNoZShzZXR0aW5nLCBjaGVja2VkTGlzdFtpXS50SWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkTGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07IGotLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tlZExpc3Q7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0Q2hlY2tTdGF0dXM6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5nLmNoZWNrLmVuYWJsZSB8fCBub2RlLm5vY2hlY2sgfHwgbm9kZS5jaGtEaXNhYmxlZCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgIHIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBub2RlW2NoZWNrZWRLZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFsZjogbm9kZS5oYWxmQ2hlY2sgPyBub2RlLmhhbGZDaGVjayA6IChzZXR0aW5nLmNoZWNrLmNoa1N0eWxlID09IGNvbnN0cy5yYWRpby5TVFlMRSA/IChub2RlLmNoZWNrX0NoaWxkX1N0YXRlID09PSAyKSA6IChub2RlW2NoZWNrZWRLZXldID8gKG5vZGUuY2hlY2tfQ2hpbGRfU3RhdGUgPiAtMSAmJiBub2RlLmNoZWNrX0NoaWxkX1N0YXRlIDwgMikgOiAobm9kZS5jaGVja19DaGlsZF9TdGF0ZSA+IDApKSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRUcmVlQ2hlY2tlZE5vZGVzOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZXMsIGNoZWNrZWQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGVzKSByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgb25seU9uZSA9IChjaGVja2VkICYmIHNldHRpbmcuY2hlY2suY2hrU3R5bGUgPT0gY29uc3RzLnJhZGlvLlNUWUxFICYmIHNldHRpbmcuY2hlY2sucmFkaW9UeXBlID09IGNvbnN0cy5yYWRpby5UWVBFX0FMTCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9ICFyZXN1bHRzID8gW10gOiByZXN1bHRzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc1tpXS5ub2NoZWNrICE9PSB0cnVlICYmIG5vZGVzW2ldLmNoa0Rpc2FibGVkICE9PSB0cnVlICYmIG5vZGVzW2ldW2NoZWNrZWRLZXldID09IGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25seU9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0VHJlZUNoZWNrZWROb2RlcyhzZXR0aW5nLCBub2Rlc1tpXVtjaGlsZEtleV0sIGNoZWNrZWQsIHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob25seU9uZSAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFRyZWVDaGFuZ2VDaGVja2VkTm9kZXM6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlcywgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZXMpIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGVja2VkO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSAhcmVzdWx0cyA/IFtdIDogcmVzdWx0cztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXNbaV0ubm9jaGVjayAhPT0gdHJ1ZSAmJiBub2Rlc1tpXS5jaGtEaXNhYmxlZCAhPT0gdHJ1ZSAmJiBub2Rlc1tpXVtjaGVja2VkS2V5XSAhPSBub2Rlc1tpXS5jaGVja2VkT2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gobm9kZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZ2V0VHJlZUNoYW5nZUNoZWNrZWROb2RlcyhzZXR0aW5nLCBub2Rlc1tpXVtjaGlsZEtleV0sIHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYWtlQ2hrRmxhZzogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICBjaGtGbGFnID0gLTE7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVbY2hpbGRLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZVtjaGlsZEtleV0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY05vZGUgPSBub2RlW2NoaWxkS2V5XVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmNoa1N0eWxlID09IGNvbnN0cy5yYWRpby5TVFlMRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjTm9kZS5ub2NoZWNrID09PSB0cnVlIHx8IGNOb2RlLmNoa0Rpc2FibGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IGNOb2RlLmNoZWNrX0NoaWxkX1N0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY05vZGUuaGFsZkNoZWNrID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjTm9kZVtjaGVja2VkS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IGNOb2RlLmNoZWNrX0NoaWxkX1N0YXRlID4gMCA/IDIgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hrRmxhZyA9IDI7IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG1wID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hrRmxhZyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5nLmNoZWNrLmNoa1N0eWxlID09IGNvbnN0cy5jaGVja2JveC5TVFlMRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjTm9kZS5ub2NoZWNrID09PSB0cnVlIHx8IGNOb2RlLmNoa0Rpc2FibGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IGNOb2RlLmNoZWNrX0NoaWxkX1N0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY05vZGUuaGFsZkNoZWNrID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjTm9kZVtjaGVja2VkS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSAoY05vZGUuY2hlY2tfQ2hpbGRfU3RhdGUgPT09IC0xIHx8IGNOb2RlLmNoZWNrX0NoaWxkX1N0YXRlID09PSAyKSA/IDIgOiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IChjTm9kZS5jaGVja19DaGlsZF9TdGF0ZSA+IDApID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXAgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hrRmxhZyA9IDE7IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG1wID09PSAyICYmIGNoa0ZsYWcgPiAtMSAmJiBpID4gMCAmJiB0bXAgIT09IGNoa0ZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hrRmxhZyA9IDE7IGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hrRmxhZyA9PT0gMiAmJiB0bXAgPiAtMSAmJiB0bXAgPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoa0ZsYWcgPSAxOyBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRtcCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoa0ZsYWcgPSB0bXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUuY2hlY2tfQ2hpbGRfU3RhdGUgPSBjaGtGbGFnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvL21ldGhvZCBvZiBldmVudCBwcm94eVxuICAgICAgICBfZXZlbnQgPSB7XG5cbiAgICAgICAgfSxcbiAgICAgICAgLy9tZXRob2Qgb2YgZXZlbnQgaGFuZGxlclxuICAgICAgICBfaGFuZGxlciA9IHtcbiAgICAgICAgICAgIG9uQ2hlY2tOb2RlOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGtEaXNhYmxlZCA9PT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nID0gZGF0YS5nZXRTZXR0aW5nKGV2ZW50LmRhdGEudHJlZUlkKSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVDaGVjaywgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgdHJ1ZSkgPT0gZmFsc2UpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIG5vZGVbY2hlY2tlZEtleV0gPSAhbm9kZVtjaGVja2VkS2V5XTtcbiAgICAgICAgICAgICAgICB2aWV3LmNoZWNrTm9kZVJlbGF0aW9uKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBjaGVja09iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5DSEVDSywgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRDaGtDbGFzcyhzZXR0aW5nLCBjaGVja09iaiwgbm9kZSk7XG4gICAgICAgICAgICAgICAgdmlldy5yZXBhaXJQYXJlbnRDaGtDbGFzc1dpdGhTZWxmKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5DSEVDSywgW2V2ZW50LCBzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uTW91c2VvdmVyQ2hlY2s6IGZ1bmN0aW9uIChldmVudCwgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoa0Rpc2FibGVkID09PSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmcgPSBkYXRhLmdldFNldHRpbmcoZXZlbnQuZGF0YS50cmVlSWQpLFxuICAgICAgICAgICAgICAgICAgICBjaGVja09iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5DSEVDSywgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGVja19Gb2N1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRDaGtDbGFzcyhzZXR0aW5nLCBjaGVja09iaiwgbm9kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Nb3VzZW91dENoZWNrOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5jaGtEaXNhYmxlZCA9PT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nID0gZGF0YS5nZXRTZXR0aW5nKGV2ZW50LmRhdGEudHJlZUlkKSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tPYmogPSAkJChub2RlLCBjb25zdHMuaWQuQ0hFQ0ssIHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIG5vZGUuY2hlY2tfRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2aWV3LnNldENoa0NsYXNzKHNldHRpbmcsIGNoZWNrT2JqLCBub2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy9tZXRob2Qgb2YgdG9vbHMgZm9yIHpUcmVlXG4gICAgICAgIF90b29scyA9IHtcblxuICAgICAgICB9LFxuICAgICAgICAvL21ldGhvZCBvZiBvcGVyYXRlIHp0cmVlIGRvbVxuICAgICAgICBfdmlldyA9IHtcbiAgICAgICAgICAgIGNoZWNrTm9kZVJlbGF0aW9uOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBwTm9kZSwgaSwgbCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGVja2VkLFxuICAgICAgICAgICAgICAgICAgICByID0gY29uc3RzLnJhZGlvO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmNoa1N0eWxlID09IHIuU1RZTEUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRMaXN0ID0gZGF0YS5nZXRSYWRpb0NoZWNrZWRMaXN0KHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZVtjaGVja2VkS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmcuY2hlY2sucmFkaW9UeXBlID09IHIuVFlQRV9BTEwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjaGVja2VkTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwTm9kZSA9IGNoZWNrZWRMaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocE5vZGVbY2hlY2tlZEtleV0gJiYgcE5vZGUgIT0gbm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcE5vZGVbY2hlY2tlZEtleV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRMaXN0LnNwbGljZShpLCAxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRDaGtDbGFzcyhzZXR0aW5nLCAkJChwTm9kZSwgY29uc3RzLmlkLkNIRUNLLCBzZXR0aW5nKSwgcE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBOb2RlLnBhcmVudFRJZCAhPSBub2RlLnBhcmVudFRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3NXaXRoU2VsZihzZXR0aW5nLCBwTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZExpc3QucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSAobm9kZS5wYXJlbnRUSWQpID8gbm9kZS5nZXRQYXJlbnROb2RlKCkgOiBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwTm9kZSA9IHBhcmVudE5vZGVbY2hpbGRLZXldW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocE5vZGVbY2hlY2tlZEtleV0gJiYgcE5vZGUgIT0gbm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcE5vZGVbY2hlY2tlZEtleV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Q2hrQ2xhc3Moc2V0dGluZywgJCQocE5vZGUsIGNvbnN0cy5pZC5DSEVDSywgc2V0dGluZyksIHBOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5nLmNoZWNrLnJhZGlvVHlwZSA9PSByLlRZUEVfQUxMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gY2hlY2tlZExpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgPT0gY2hlY2tlZExpc3RbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZExpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlW2NoZWNrZWRLZXldICYmICghbm9kZVtjaGlsZEtleV0gfHwgbm9kZVtjaGlsZEtleV0ubGVuZ3RoID09IDAgfHwgc2V0dGluZy5jaGVjay5jaGtib3hUeXBlLlkuaW5kZXhPZihcInNcIikgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0U29uTm9kZUNoZWNrQm94KHNldHRpbmcsIG5vZGUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kZVtjaGVja2VkS2V5XSAmJiAoIW5vZGVbY2hpbGRLZXldIHx8IG5vZGVbY2hpbGRLZXldLmxlbmd0aCA9PSAwIHx8IHNldHRpbmcuY2hlY2suY2hrYm94VHlwZS5OLmluZGV4T2YoXCJzXCIpID4gLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFNvbk5vZGVDaGVja0JveChzZXR0aW5nLCBub2RlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVbY2hlY2tlZEtleV0gJiYgc2V0dGluZy5jaGVjay5jaGtib3hUeXBlLlkuaW5kZXhPZihcInBcIikgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRQYXJlbnROb2RlQ2hlY2tCb3goc2V0dGluZywgbm9kZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlW2NoZWNrZWRLZXldICYmIHNldHRpbmcuY2hlY2suY2hrYm94VHlwZS5OLmluZGV4T2YoXCJwXCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0UGFyZW50Tm9kZUNoZWNrQm94KHNldHRpbmcsIG5vZGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYWtlQ2hrQ2xhc3M6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgIGMgPSBjb25zdHMuY2hlY2tib3gsIHIgPSBjb25zdHMucmFkaW8sXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxTdHlsZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuY2hrRGlzYWJsZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVsbFN0eWxlID0gYy5ESVNBQkxFRDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuaGFsZkNoZWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxTdHlsZSA9IGMuUEFSVDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmcuY2hlY2suY2hrU3R5bGUgPT0gci5TVFlMRSkge1xuICAgICAgICAgICAgICAgICAgICBmdWxsU3R5bGUgPSAobm9kZS5jaGVja19DaGlsZF9TdGF0ZSA8IDEpID8gYy5GVUxMIDogYy5QQVJUO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bGxTdHlsZSA9IG5vZGVbY2hlY2tlZEtleV0gPyAoKG5vZGUuY2hlY2tfQ2hpbGRfU3RhdGUgPT09IDIgfHwgbm9kZS5jaGVja19DaGlsZF9TdGF0ZSA9PT0gLTEpID8gYy5GVUxMIDogYy5QQVJUKSA6ICgobm9kZS5jaGVja19DaGlsZF9TdGF0ZSA8IDEpID8gYy5GVUxMIDogYy5QQVJUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoa05hbWUgPSBzZXR0aW5nLmNoZWNrLmNoa1N0eWxlICsgXCJfXCIgKyAobm9kZVtjaGVja2VkS2V5XSA/IGMuVFJVRSA6IGMuRkFMU0UpICsgXCJfXCIgKyBmdWxsU3R5bGU7XG4gICAgICAgICAgICAgICAgY2hrTmFtZSA9IChub2RlLmNoZWNrX0ZvY3VzICYmIG5vZGUuY2hrRGlzYWJsZWQgIT09IHRydWUpID8gY2hrTmFtZSArIFwiX1wiICsgYy5GT0NVUyA6IGNoa05hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0cy5jbGFzc05hbWUuQlVUVE9OICsgXCIgXCIgKyBjLkRFRkFVTFQgKyBcIiBcIiArIGNoa05hbWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwYWlyQWxsQ2hrOiBmdW5jdGlvbiAoc2V0dGluZywgY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmVuYWJsZSAmJiBzZXR0aW5nLmNoZWNrLmNoa1N0eWxlID09PSBjb25zdHMuY2hlY2tib3guU1RZTEUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWNrZWRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICByb290ID0gZGF0YS5nZXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvb3RbY2hpbGRLZXldLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSByb290W2NoaWxkS2V5XVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5vY2hlY2sgIT09IHRydWUgJiYgbm9kZS5jaGtEaXNhYmxlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbY2hlY2tlZEtleV0gPSBjaGVja2VkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRTb25Ob2RlQ2hlY2tCb3goc2V0dGluZywgbm9kZSwgY2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwYWlyQ2hrQ2xhc3M6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgZGF0YS5tYWtlQ2hrRmxhZyhzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2NoZWNrICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGVja09iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5DSEVDSywgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Q2hrQ2xhc3Moc2V0dGluZywgY2hlY2tPYmosIG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXBhaXJQYXJlbnRDaGtDbGFzczogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUgfHwgIW5vZGUucGFyZW50VElkKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHBOb2RlID0gbm9kZS5nZXRQYXJlbnROb2RlKCk7XG4gICAgICAgICAgICAgICAgdmlldy5yZXBhaXJDaGtDbGFzcyhzZXR0aW5nLCBwTm9kZSk7XG4gICAgICAgICAgICAgICAgdmlldy5yZXBhaXJQYXJlbnRDaGtDbGFzcyhzZXR0aW5nLCBwTm9kZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwYWlyUGFyZW50Q2hrQ2xhc3NXaXRoU2VsZjogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChub2RlW2NoaWxkS2V5XSAmJiBub2RlW2NoaWxkS2V5XS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3Moc2V0dGluZywgbm9kZVtjaGlsZEtleV1bMF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3Moc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcGFpclNvbkNoa0Rpc2FibGVkOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSwgY2hrRGlzYWJsZWQsIGluaGVyaXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoa0Rpc2FibGVkICE9IGNoa0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY2hrRGlzYWJsZWQgPSBjaGtEaXNhYmxlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5yZXBhaXJDaGtDbGFzcyhzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZVtjaGlsZEtleV0gJiYgaW5oZXJpdCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVbY2hpbGRLZXldLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNOb2RlID0gbm9kZVtjaGlsZEtleV1baV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlcGFpclNvbkNoa0Rpc2FibGVkKHNldHRpbmcsIHNOb2RlLCBjaGtEaXNhYmxlZCwgaW5oZXJpdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVwYWlyUGFyZW50Q2hrRGlzYWJsZWQ6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCBjaGtEaXNhYmxlZCwgaW5oZXJpdCkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNoa0Rpc2FibGVkICE9IGNoa0Rpc2FibGVkICYmIGluaGVyaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jaGtEaXNhYmxlZCA9IGNoa0Rpc2FibGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LnJlcGFpckNoa0NsYXNzKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrRGlzYWJsZWQoc2V0dGluZywgbm9kZS5nZXRQYXJlbnROb2RlKCksIGNoa0Rpc2FibGVkLCBpbmhlcml0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRDaGtDbGFzczogZnVuY3Rpb24gKHNldHRpbmcsIG9iaiwgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghb2JqKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubm9jaGVjayA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvYmouaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9iai5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iai5hdHRyKCdjbGFzcycsIHZpZXcubWFrZUNoa0NsYXNzKHNldHRpbmcsIG5vZGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRQYXJlbnROb2RlQ2hlY2tCb3g6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCB2YWx1ZSwgc3JjTm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLkNIRUNLLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNyY05vZGUpIHNyY05vZGUgPSBub2RlO1xuICAgICAgICAgICAgICAgIGRhdGEubWFrZUNoa0ZsYWcoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUubm9jaGVjayAhPT0gdHJ1ZSAmJiBub2RlLmNoa0Rpc2FibGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVbY2hlY2tlZEtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRDaGtDbGFzcyhzZXR0aW5nLCBjaGVja09iaiwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmNoZWNrLmF1dG9DaGVja1RyaWdnZXIgJiYgbm9kZSAhPSBzcmNOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmoudHJpZ2dlcihjb25zdHMuZXZlbnQuQ0hFQ0ssIFtudWxsLCBzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudFRJZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcFNpZ24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcE5vZGVzID0gbm9kZS5nZXRQYXJlbnROb2RlKClbY2hpbGRLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChwTm9kZXNbaV0ubm9jaGVjayAhPT0gdHJ1ZSAmJiBwTm9kZXNbaV0uY2hrRGlzYWJsZWQgIT09IHRydWUgJiYgcE5vZGVzW2ldW2NoZWNrZWRLZXldKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAoKHBOb2Rlc1tpXS5ub2NoZWNrID09PSB0cnVlIHx8IHBOb2Rlc1tpXS5jaGtEaXNhYmxlZCA9PT0gdHJ1ZSkgJiYgcE5vZGVzW2ldLmNoZWNrX0NoaWxkX1N0YXRlID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFNpZ24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwU2lnbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRQYXJlbnROb2RlQ2hlY2tCb3goc2V0dGluZywgbm9kZS5nZXRQYXJlbnROb2RlKCksIHZhbHVlLCBzcmNOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRTb25Ob2RlQ2hlY2tCb3g6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlLCB2YWx1ZSwgc3JjTm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZEtleSA9IHNldHRpbmcuZGF0YS5rZXkuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrT2JqID0gJCQobm9kZSwgY29uc3RzLmlkLkNIRUNLLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNyY05vZGUpIHNyY05vZGUgPSBub2RlO1xuXG4gICAgICAgICAgICAgICAgdmFyIGhhc0Rpc2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZVtjaGlsZEtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlW2NoaWxkS2V5XS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzTm9kZSA9IG5vZGVbY2hpbGRLZXldW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRTb25Ob2RlQ2hlY2tCb3goc2V0dGluZywgc05vZGUsIHZhbHVlLCBzcmNOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzTm9kZS5jaGtEaXNhYmxlZCA9PT0gdHJ1ZSkgaGFzRGlzYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobm9kZSAhPSBkYXRhLmdldFJvb3Qoc2V0dGluZykgJiYgbm9kZS5jaGtEaXNhYmxlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzRGlzYWJsZSAmJiBub2RlLm5vY2hlY2sgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWFrZUNoa0ZsYWcoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubm9jaGVjayAhPT0gdHJ1ZSAmJiBub2RlLmNoa0Rpc2FibGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlW2NoZWNrZWRLZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc0Rpc2FibGUpIG5vZGUuY2hlY2tfQ2hpbGRfU3RhdGUgPSAobm9kZVtjaGlsZEtleV0gJiYgbm9kZVtjaGlsZEtleV0ubGVuZ3RoID4gMCkgPyAodmFsdWUgPyAyIDogMCkgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuY2hlY2tfQ2hpbGRfU3RhdGUgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2aWV3LnNldENoa0NsYXNzKHNldHRpbmcsIGNoZWNrT2JqLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmcuY2hlY2suYXV0b0NoZWNrVHJpZ2dlciAmJiBub2RlICE9IHNyY05vZGUgJiYgbm9kZS5ub2NoZWNrICE9PSB0cnVlICYmIG5vZGUuY2hrRGlzYWJsZWQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5DSEVDSywgW251bGwsIHNldHRpbmcudHJlZUlkLCBub2RlXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBfeiA9IHtcbiAgICAgICAgICAgIHRvb2xzOiBfdG9vbHMsXG4gICAgICAgICAgICB2aWV3OiBfdmlldyxcbiAgICAgICAgICAgIGV2ZW50OiBfZXZlbnQsXG4gICAgICAgICAgICBkYXRhOiBfZGF0YVxuICAgICAgICB9O1xuICAgICQuZXh0ZW5kKHRydWUsICQuZm4uelRyZWUuY29uc3RzLCBfY29uc3RzKTtcbiAgICAkLmV4dGVuZCh0cnVlLCAkLmZuLnpUcmVlLl96LCBfeik7XG5cbiAgICB2YXIgenQgPSAkLmZuLnpUcmVlLFxuICAgICAgICB0b29scyA9IHp0Ll96LnRvb2xzLFxuICAgICAgICBjb25zdHMgPSB6dC5jb25zdHMsXG4gICAgICAgIHZpZXcgPSB6dC5fei52aWV3LFxuICAgICAgICBkYXRhID0genQuX3ouZGF0YSxcbiAgICAgICAgZXZlbnQgPSB6dC5fei5ldmVudCxcbiAgICAgICAgJCQgPSB0b29scy4kO1xuXG4gICAgZGF0YS5leFNldHRpbmcoX3NldHRpbmcpO1xuICAgIGRhdGEuYWRkSW5pdEJpbmQoX2JpbmRFdmVudCk7XG4gICAgZGF0YS5hZGRJbml0VW5CaW5kKF91bmJpbmRFdmVudCk7XG4gICAgZGF0YS5hZGRJbml0Q2FjaGUoX2luaXRDYWNoZSk7XG4gICAgZGF0YS5hZGRJbml0Tm9kZShfaW5pdE5vZGUpO1xuICAgIGRhdGEuYWRkSW5pdFByb3h5KF9ldmVudFByb3h5LCB0cnVlKTtcbiAgICBkYXRhLmFkZEluaXRSb290KF9pbml0Um9vdCk7XG4gICAgZGF0YS5hZGRCZWZvcmVBKF9iZWZvcmVBKTtcbiAgICBkYXRhLmFkZFpUcmVlVG9vbHMoX3pUcmVlVG9vbHMpO1xuXG4gICAgdmFyIF9jcmVhdGVOb2RlcyA9IHZpZXcuY3JlYXRlTm9kZXM7XG4gICAgdmlldy5jcmVhdGVOb2RlcyA9IGZ1bmN0aW9uIChzZXR0aW5nLCBsZXZlbCwgbm9kZXMsIHBhcmVudE5vZGUsIGluZGV4KSB7XG4gICAgICAgIGlmIChfY3JlYXRlTm9kZXMpIF9jcmVhdGVOb2Rlcy5hcHBseSh2aWV3LCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAoIW5vZGVzKSByZXR1cm47XG4gICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3NXaXRoU2VsZihzZXR0aW5nLCBwYXJlbnROb2RlKTtcbiAgICB9XG4gICAgdmFyIF9yZW1vdmVOb2RlID0gdmlldy5yZW1vdmVOb2RlO1xuICAgIHZpZXcucmVtb3ZlTm9kZSA9IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gbm9kZS5nZXRQYXJlbnROb2RlKCk7XG4gICAgICAgIGlmIChfcmVtb3ZlTm9kZSkgX3JlbW92ZU5vZGUuYXBwbHkodmlldywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKCFub2RlIHx8ICFwYXJlbnROb2RlKSByZXR1cm47XG4gICAgICAgIHZpZXcucmVwYWlyQ2hrQ2xhc3Moc2V0dGluZywgcGFyZW50Tm9kZSk7XG4gICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3Moc2V0dGluZywgcGFyZW50Tm9kZSk7XG4gICAgfVxuXG4gICAgdmFyIF9hcHBlbmROb2RlcyA9IHZpZXcuYXBwZW5kTm9kZXM7XG4gICAgdmlldy5hcHBlbmROb2RlcyA9IGZ1bmN0aW9uIChzZXR0aW5nLCBsZXZlbCwgbm9kZXMsIHBhcmVudE5vZGUsIGluZGV4LCBpbml0RmxhZywgb3BlbkZsYWcpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBcIlwiO1xuICAgICAgICBpZiAoX2FwcGVuZE5vZGVzKSB7XG4gICAgICAgICAgICBodG1sID0gX2FwcGVuZE5vZGVzLmFwcGx5KHZpZXcsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGRhdGEubWFrZUNoa0ZsYWcoc2V0dGluZywgcGFyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxufSkoalF1ZXJ5KTtcbi8qXG4gKiBKUXVlcnkgelRyZWUgZXhlZGl0IHYzLjUuMjlcbiAqIGh0dHA6Ly90cmVlanMuY24vXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEwIEh1bnRlci56XG4gKlxuICogTGljZW5zZWQgc2FtZSBhcyBqcXVlcnkgLSBNSVQgTGljZW5zZVxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAqXG4gKiBlbWFpbDogaHVudGVyLnpAMjYzLm5ldFxuICogRGF0ZTogMjAxNy0wNi0xOVxuICovXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAvL2RlZmF1bHQgY29uc3RzIG9mIGV4ZWRpdFxuICAgIHZhciBfY29uc3RzID0ge1xuICAgICAgICBldmVudDoge1xuICAgICAgICAgICAgRFJBRzogXCJ6dHJlZV9kcmFnXCIsXG4gICAgICAgICAgICBEUk9QOiBcInp0cmVlX2Ryb3BcIixcbiAgICAgICAgICAgIFJFTkFNRTogXCJ6dHJlZV9yZW5hbWVcIixcbiAgICAgICAgICAgIERSQUdNT1ZFOiBcInp0cmVlX2RyYWdtb3ZlXCJcbiAgICAgICAgfSxcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIEVESVQ6IFwiX2VkaXRcIixcbiAgICAgICAgICAgIElOUFVUOiBcIl9pbnB1dFwiLFxuICAgICAgICAgICAgUkVNT1ZFOiBcIl9yZW1vdmVcIlxuICAgICAgICB9LFxuICAgICAgICBtb3ZlOiB7XG4gICAgICAgICAgICBUWVBFX0lOTkVSOiBcImlubmVyXCIsXG4gICAgICAgICAgICBUWVBFX1BSRVY6IFwicHJldlwiLFxuICAgICAgICAgICAgVFlQRV9ORVhUOiBcIm5leHRcIlxuICAgICAgICB9LFxuICAgICAgICBub2RlOiB7XG4gICAgICAgICAgICBDVVJTRUxFQ1RFRF9FRElUOiBcImN1clNlbGVjdGVkTm9kZV9FZGl0XCIsXG4gICAgICAgICAgICBUTVBUQVJHRVRfVFJFRTogXCJ0bXBUYXJnZXR6VHJlZVwiLFxuICAgICAgICAgICAgVE1QVEFSR0VUX05PREU6IFwidG1wVGFyZ2V0Tm9kZVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgICAgICAvL2RlZmF1bHQgc2V0dGluZyBvZiBleGVkaXRcbiAgICAgICAgX3NldHRpbmcgPSB7XG4gICAgICAgICAgICBlZGl0OiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlZGl0TmFtZVNlbGVjdEFsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2hvd1JlbW92ZUJ0bjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaG93UmVuYW1lQnRuOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlbW92ZVRpdGxlOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgIHJlbmFtZVRpdGxlOiBcInJlbmFtZVwiLFxuICAgICAgICAgICAgICAgIGRyYWc6IHtcbiAgICAgICAgICAgICAgICAgICAgYXV0b0V4cGFuZFRyaWdnZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc0NvcHk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzTW92ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcHJldjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5uZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1pbk1vdmVTaXplOiA1LFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJNYXg6IDEwLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJNaW46IC01LFxuICAgICAgICAgICAgICAgICAgICBtYXhTaG93Tm9kZU51bTogNSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b09wZW5UaW1lOiA1MDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmlldzoge1xuICAgICAgICAgICAgICAgIGFkZEhvdmVyRG9tOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlbW92ZUhvdmVyRG9tOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICBiZWZvcmVEcmFnOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZURyYWdPcGVuOiBudWxsLFxuICAgICAgICAgICAgICAgIGJlZm9yZURyb3A6IG51bGwsXG4gICAgICAgICAgICAgICAgYmVmb3JlRWRpdE5hbWU6IG51bGwsXG4gICAgICAgICAgICAgICAgYmVmb3JlUmVuYW1lOiBudWxsLFxuICAgICAgICAgICAgICAgIG9uRHJhZzogbnVsbCxcbiAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlOiBudWxsLFxuICAgICAgICAgICAgICAgIG9uRHJvcDogbnVsbCxcbiAgICAgICAgICAgICAgICBvblJlbmFtZTogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvL2RlZmF1bHQgcm9vdCBvZiBleGVkaXRcbiAgICAgICAgX2luaXRSb290ID0gZnVuY3Rpb24gKHNldHRpbmcpIHtcbiAgICAgICAgICAgIHZhciByID0gZGF0YS5nZXRSb290KHNldHRpbmcpLCBycyA9IGRhdGEuZ2V0Um9vdHMoKTtcbiAgICAgICAgICAgIHIuY3VyRWRpdE5vZGUgPSBudWxsO1xuICAgICAgICAgICAgci5jdXJFZGl0SW5wdXQgPSBudWxsO1xuICAgICAgICAgICAgci5jdXJIb3Zlck5vZGUgPSBudWxsO1xuICAgICAgICAgICAgci5kcmFnRmxhZyA9IDA7XG4gICAgICAgICAgICByLmRyYWdOb2RlU2hvd0JlZm9yZSA9IFtdO1xuICAgICAgICAgICAgci5kcmFnTWFza0xpc3QgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHJzLnNob3dIb3ZlckRvbSA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIC8vZGVmYXVsdCBjYWNoZSBvZiBleGVkaXRcbiAgICAgICAgX2luaXRDYWNoZSA9IGZ1bmN0aW9uICh0cmVlSWQpIHsgfSxcbiAgICAgICAgLy9kZWZhdWx0IGJpbmQgZXZlbnQgb2YgZXhlZGl0XG4gICAgICAgIF9iaW5kRXZlbnQgPSBmdW5jdGlvbiAoc2V0dGluZykge1xuICAgICAgICAgICAgdmFyIG8gPSBzZXR0aW5nLnRyZWVPYmo7XG4gICAgICAgICAgICB2YXIgYyA9IGNvbnN0cy5ldmVudDtcbiAgICAgICAgICAgIG8uYmluZChjLlJFTkFNRSwgZnVuY3Rpb24gKGV2ZW50LCB0cmVlSWQsIHRyZWVOb2RlLCBpc0NhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25SZW5hbWUsIFtldmVudCwgdHJlZUlkLCB0cmVlTm9kZSwgaXNDYW5jZWxdKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBvLmJpbmQoYy5EUkFHLCBmdW5jdGlvbiAoZXZlbnQsIHNyY0V2ZW50LCB0cmVlSWQsIHRyZWVOb2Rlcykge1xuICAgICAgICAgICAgICAgIHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2sub25EcmFnLCBbc3JjRXZlbnQsIHRyZWVJZCwgdHJlZU5vZGVzXSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgby5iaW5kKGMuRFJBR01PVkUsIGZ1bmN0aW9uIChldmVudCwgc3JjRXZlbnQsIHRyZWVJZCwgdHJlZU5vZGVzKSB7XG4gICAgICAgICAgICAgICAgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5vbkRyYWdNb3ZlLCBbc3JjRXZlbnQsIHRyZWVJZCwgdHJlZU5vZGVzXSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgby5iaW5kKGMuRFJPUCwgZnVuY3Rpb24gKGV2ZW50LCBzcmNFdmVudCwgdHJlZUlkLCB0cmVlTm9kZXMsIHRhcmdldE5vZGUsIG1vdmVUeXBlLCBpc0NvcHkpIHtcbiAgICAgICAgICAgICAgICB0b29scy5hcHBseShzZXR0aW5nLmNhbGxiYWNrLm9uRHJvcCwgW3NyY0V2ZW50LCB0cmVlSWQsIHRyZWVOb2RlcywgdGFyZ2V0Tm9kZSwgbW92ZVR5cGUsIGlzQ29weV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIF91bmJpbmRFdmVudCA9IGZ1bmN0aW9uIChzZXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHNldHRpbmcudHJlZU9iajtcbiAgICAgICAgICAgIHZhciBjID0gY29uc3RzLmV2ZW50O1xuICAgICAgICAgICAgby51bmJpbmQoYy5SRU5BTUUpO1xuICAgICAgICAgICAgby51bmJpbmQoYy5EUkFHKTtcbiAgICAgICAgICAgIG8udW5iaW5kKGMuRFJBR01PVkUpO1xuICAgICAgICAgICAgby51bmJpbmQoYy5EUk9QKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy9kZWZhdWx0IGV2ZW50IHByb3h5IG9mIGV4ZWRpdFxuICAgICAgICBfZXZlbnRQcm94eSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQsXG4gICAgICAgICAgICAgICAgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhlLmRhdGEudHJlZUlkKSxcbiAgICAgICAgICAgICAgICByZWxhdGVkVGFyZ2V0ID0gZS5yZWxhdGVkVGFyZ2V0LFxuICAgICAgICAgICAgICAgIHRJZCA9IFwiXCIsIG5vZGUgPSBudWxsLFxuICAgICAgICAgICAgICAgIG5vZGVFdmVudFR5cGUgPSBcIlwiLCB0cmVlRXZlbnRUeXBlID0gXCJcIixcbiAgICAgICAgICAgICAgICBub2RlRXZlbnRDYWxsYmFjayA9IG51bGwsIHRyZWVFdmVudENhbGxiYWNrID0gbnVsbCxcbiAgICAgICAgICAgICAgICB0bXAgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodG9vbHMuZXFzKGUudHlwZSwgXCJtb3VzZW92ZXJcIikpIHtcbiAgICAgICAgICAgICAgICB0bXAgPSB0b29scy5nZXRNRG9tKHNldHRpbmcsIHRhcmdldCwgW3sgdGFnTmFtZTogXCJhXCIsIGF0dHJOYW1lOiBcInRyZWVOb2RlXCIgKyBjb25zdHMuaWQuQSB9XSk7XG4gICAgICAgICAgICAgICAgaWYgKHRtcCkge1xuICAgICAgICAgICAgICAgICAgICB0SWQgPSB0b29scy5nZXROb2RlTWFpbkRvbSh0bXApLmlkO1xuICAgICAgICAgICAgICAgICAgICBub2RlRXZlbnRUeXBlID0gXCJob3Zlck92ZXJOb2RlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0b29scy5lcXMoZS50eXBlLCBcIm1vdXNlb3V0XCIpKSB7XG4gICAgICAgICAgICAgICAgdG1wID0gdG9vbHMuZ2V0TURvbShzZXR0aW5nLCByZWxhdGVkVGFyZ2V0LCBbeyB0YWdOYW1lOiBcImFcIiwgYXR0ck5hbWU6IFwidHJlZU5vZGVcIiArIGNvbnN0cy5pZC5BIH1dKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRtcCkge1xuICAgICAgICAgICAgICAgICAgICB0SWQgPSBcInJlbW92ZVwiO1xuICAgICAgICAgICAgICAgICAgICBub2RlRXZlbnRUeXBlID0gXCJob3Zlck91dE5vZGVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRvb2xzLmVxcyhlLnR5cGUsIFwibW91c2Vkb3duXCIpKSB7XG4gICAgICAgICAgICAgICAgdG1wID0gdG9vbHMuZ2V0TURvbShzZXR0aW5nLCB0YXJnZXQsIFt7IHRhZ05hbWU6IFwiYVwiLCBhdHRyTmFtZTogXCJ0cmVlTm9kZVwiICsgY29uc3RzLmlkLkEgfV0pO1xuICAgICAgICAgICAgICAgIGlmICh0bXApIHtcbiAgICAgICAgICAgICAgICAgICAgdElkID0gdG9vbHMuZ2V0Tm9kZU1haW5Eb20odG1wKS5pZDtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50VHlwZSA9IFwibW91c2Vkb3duTm9kZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0SWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBkYXRhLmdldE5vZGVDYWNoZShzZXR0aW5nLCB0SWQpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZUV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibW91c2Vkb3duTm9kZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUV2ZW50Q2FsbGJhY2sgPSBfaGFuZGxlci5vbk1vdXNlZG93bk5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhvdmVyT3Zlck5vZGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVFdmVudENhbGxiYWNrID0gX2hhbmRsZXIub25Ib3Zlck92ZXJOb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJob3Zlck91dE5vZGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVFdmVudENhbGxiYWNrID0gX2hhbmRsZXIub25Ib3Zlck91dE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJveHlSZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgc3RvcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgICAgICBub2RlRXZlbnRUeXBlOiBub2RlRXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgIG5vZGVFdmVudENhbGxiYWNrOiBub2RlRXZlbnRDYWxsYmFjayxcbiAgICAgICAgICAgICAgICB0cmVlRXZlbnRUeXBlOiB0cmVlRXZlbnRUeXBlLFxuICAgICAgICAgICAgICAgIHRyZWVFdmVudENhbGxiYWNrOiB0cmVlRXZlbnRDYWxsYmFja1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBwcm94eVJlc3VsdFxuICAgICAgICB9LFxuICAgICAgICAvL2RlZmF1bHQgaW5pdCBub2RlIG9mIGV4ZWRpdFxuICAgICAgICBfaW5pdE5vZGUgPSBmdW5jdGlvbiAoc2V0dGluZywgbGV2ZWwsIG4sIHBhcmVudE5vZGUsIGlzRmlyc3ROb2RlLCBpc0xhc3ROb2RlLCBvcGVuRmxhZykge1xuICAgICAgICAgICAgaWYgKCFuKSByZXR1cm47XG4gICAgICAgICAgICBuLmlzSG92ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIG4uZWRpdE5hbWVGbGFnID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIC8vdXBkYXRlIHpUcmVlT2JqLCBhZGQgbWV0aG9kIG9mIGVkaXRcbiAgICAgICAgX3pUcmVlVG9vbHMgPSBmdW5jdGlvbiAoc2V0dGluZywgelRyZWVUb29scykge1xuICAgICAgICAgICAgelRyZWVUb29scy5jYW5jZWxFZGl0TmFtZSA9IGZ1bmN0aW9uIChuZXdOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3QodGhpcy5zZXR0aW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3QuY3VyRWRpdE5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEN1ckVkaXROb2RlKHRoaXMuc2V0dGluZywgbmV3TmFtZSA/IG5ld05hbWUgOiBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHpUcmVlVG9vbHMuY29weU5vZGUgPSBmdW5jdGlvbiAodGFyZ2V0Tm9kZSwgbm9kZSwgbW92ZVR5cGUsIGlzU2lsZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Tm9kZSAmJiAhdGFyZ2V0Tm9kZS5pc1BhcmVudCAmJiB0aGlzLnNldHRpbmcuZGF0YS5rZWVwLmxlYWYgJiYgbW92ZVR5cGUgPT09IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIG5ld05vZGUgPSB0b29scy5jbG9uZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVUeXBlID0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVUeXBlID09IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29weUNhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5hZGROb2RlcyhfdGhpcy5zZXR0aW5nLCB0YXJnZXROb2RlLCAtMSwgW25ld05vZGVdLCBpc1NpbGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuY2FuQXN5bmModGhpcy5zZXR0aW5nLCB0YXJnZXROb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5hc3luY05vZGUodGhpcy5zZXR0aW5nLCB0YXJnZXROb2RlLCBpc1NpbGVudCwgY29weUNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5hZGROb2Rlcyh0aGlzLnNldHRpbmcsIHRhcmdldE5vZGUucGFyZW50Tm9kZSwgLTEsIFtuZXdOb2RlXSwgaXNTaWxlbnQpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3Lm1vdmVOb2RlKHRoaXMuc2V0dGluZywgdGFyZ2V0Tm9kZSwgbmV3Tm9kZSwgbW92ZVR5cGUsIGZhbHNlLCBpc1NpbGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgelRyZWVUb29scy5lZGl0TmFtZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlIHx8ICFub2RlLnRJZCB8fCBub2RlICE9PSBkYXRhLmdldE5vZGVDYWNoZSh0aGlzLnNldHRpbmcsIG5vZGUudElkKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudFRJZCkgdmlldy5leHBhbmRDb2xsYXBzZVBhcmVudE5vZGUodGhpcy5zZXR0aW5nLCBub2RlLmdldFBhcmVudE5vZGUoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmlldy5lZGl0Tm9kZSh0aGlzLnNldHRpbmcsIG5vZGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB6VHJlZVRvb2xzLm1vdmVOb2RlID0gZnVuY3Rpb24gKHRhcmdldE5vZGUsIG5vZGUsIG1vdmVUeXBlLCBpc1NpbGVudCkge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGUgJiYgIXRhcmdldE5vZGUuaXNQYXJlbnQgJiYgdGhpcy5zZXR0aW5nLmRhdGEua2VlcC5sZWFmICYmIG1vdmVUeXBlID09PSBjb25zdHMubW92ZS5UWVBFX0lOTkVSKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0Tm9kZSAmJiAoKG5vZGUucGFyZW50VElkID09IHRhcmdldE5vZGUudElkICYmIG1vdmVUeXBlID09IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHx8ICQkKG5vZGUsIHRoaXMuc2V0dGluZykuZmluZChcIiNcIiArIHRhcmdldE5vZGUudElkKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0YXJnZXROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1vdmVDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5tb3ZlTm9kZShfdGhpcy5zZXR0aW5nLCB0YXJnZXROb2RlLCBub2RlLCBtb3ZlVHlwZSwgZmFsc2UsIGlzU2lsZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvb2xzLmNhbkFzeW5jKHRoaXMuc2V0dGluZywgdGFyZ2V0Tm9kZSkgJiYgbW92ZVR5cGUgPT09IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5hc3luY05vZGUodGhpcy5zZXR0aW5nLCB0YXJnZXROb2RlLCBpc1NpbGVudCwgbW92ZUNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb3ZlQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB6VHJlZVRvb2xzLnNldEVkaXRhYmxlID0gZnVuY3Rpb24gKGVkaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nLmVkaXQuZW5hYmxlID0gZWRpdGFibGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvL21ldGhvZCBvZiBvcGVyYXRlIGRhdGFcbiAgICAgICAgX2RhdGEgPSB7XG4gICAgICAgICAgICBzZXRTb25Ob2RlTGV2ZWw6IGZ1bmN0aW9uIChzZXR0aW5nLCBwYXJlbnROb2RlLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkS2V5ID0gc2V0dGluZy5kYXRhLmtleS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBub2RlLmxldmVsID0gKHBhcmVudE5vZGUpID8gcGFyZW50Tm9kZS5sZXZlbCArIDEgOiAwO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZVtjaGlsZEtleV0pIHJldHVybjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVbY2hpbGRLZXldLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZVtjaGlsZEtleV1baV0pIGRhdGEuc2V0U29uTm9kZUxldmVsKHNldHRpbmcsIG5vZGUsIG5vZGVbY2hpbGRLZXldW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vbWV0aG9kIG9mIGV2ZW50IHByb3h5XG4gICAgICAgIF9ldmVudCA9IHtcblxuICAgICAgICB9LFxuICAgICAgICAvL21ldGhvZCBvZiBldmVudCBoYW5kbGVyXG4gICAgICAgIF9oYW5kbGVyID0ge1xuICAgICAgICAgICAgb25Ib3Zlck92ZXJOb2RlOiBmdW5jdGlvbiAoZXZlbnQsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhldmVudC5kYXRhLnRyZWVJZCksXG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvb3QuY3VySG92ZXJOb2RlICE9IG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgX2hhbmRsZXIub25Ib3Zlck91dE5vZGUoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb290LmN1ckhvdmVyTm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgdmlldy5hZGRIb3ZlckRvbShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkhvdmVyT3V0Tm9kZTogZnVuY3Rpb24gKGV2ZW50LCBub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmcgPSBkYXRhLmdldFNldHRpbmcoZXZlbnQuZGF0YS50cmVlSWQpLFxuICAgICAgICAgICAgICAgICAgICByb290ID0gZGF0YS5nZXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIGlmIChyb290LmN1ckhvdmVyTm9kZSAmJiAhZGF0YS5pc1NlbGVjdGVkTm9kZShzZXR0aW5nLCByb290LmN1ckhvdmVyTm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5yZW1vdmVUcmVlRG9tKHNldHRpbmcsIHJvb3QuY3VySG92ZXJOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5jdXJIb3Zlck5vZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbk1vdXNlZG93bk5vZGU6IGZ1bmN0aW9uIChldmVudE1vdXNlRG93biwgX25vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSwgbCxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZyA9IGRhdGEuZ2V0U2V0dGluZyhldmVudE1vdXNlRG93bi5kYXRhLnRyZWVJZCksXG4gICAgICAgICAgICAgICAgICAgIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyksIHJvb3RzID0gZGF0YS5nZXRSb290cygpO1xuICAgICAgICAgICAgICAgIC8vcmlnaHQgY2xpY2sgY2FuJ3QgZHJhZyAmIGRyb3BcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRNb3VzZURvd24uYnV0dG9uID09IDIgfHwgIXNldHRpbmcuZWRpdC5lbmFibGUgfHwgKCFzZXR0aW5nLmVkaXQuZHJhZy5pc0NvcHkgJiYgIXNldHRpbmcuZWRpdC5kcmFnLmlzTW92ZSkpIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgICAgICAgLy9pbnB1dCBvZiBlZGl0IG5vZGUgbmFtZSBjYW4ndCBkcmFnICYgZHJvcFxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudE1vdXNlRG93bi50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIF9ub2RlcyA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKS5jdXJTZWxlY3RlZExpc3QsXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU2VsZWN0ZWROb2RlKHNldHRpbmcsIF9ub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlcyA9IFtfbm9kZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IF9ub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfbm9kZXNbaV0uZWRpdE5hbWVGbGFnICYmIHRvb2xzLmVxcyh0YXJnZXQudGFnTmFtZSwgXCJpbnB1dFwiKSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwidHJlZU5vZGVcIiArIGNvbnN0cy5pZC5JTlBVVCkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2goX25vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2Rlc1swXS5wYXJlbnRUSWQgIT09IF9ub2Rlc1tpXS5wYXJlbnRUSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IFtfbm9kZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2aWV3LmVkaXROb2RlQmx1ciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmlldy5jYW5jZWxDdXJFZGl0Tm9kZShzZXR0aW5nKTtcblxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSAkKHNldHRpbmcudHJlZU9iai5nZXQoMCkub3duZXJEb2N1bWVudCksXG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSAkKHNldHRpbmcudHJlZU9iai5nZXQoMCkub3duZXJEb2N1bWVudC5ib2R5KSwgY3VyTm9kZSwgdG1wQXJyb3csIHRtcFRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgaXNPdGhlclRyZWUgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2V0dGluZyA9IHNldHRpbmcsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVNldHRpbmcgPSBzZXR0aW5nLFxuICAgICAgICAgICAgICAgICAgICBwcmVOb2RlLCBuZXh0Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgcHJlVG1wVGFyZ2V0Tm9kZUlkID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcHJlVG1wTW92ZVR5cGUgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXROb2RlSWQgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtb3ZlVHlwZSA9IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIsXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlRG93blggPSBldmVudE1vdXNlRG93bi5jbGllbnRYLFxuICAgICAgICAgICAgICAgICAgICBtb3VzZURvd25ZID0gZXZlbnRNb3VzZURvd24uY2xpZW50WSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0b29scy51Q2FuRG8oc2V0dGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jLmJpbmQoXCJtb3VzZW1vdmVcIiwgX2RvY01vdXNlTW92ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9kb2NNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hdm9pZCBzdGFydCBkcmFnIGFmdGVyIGNsaWNrIG5vZGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuZHJhZ0ZsYWcgPT0gMCAmJiBNYXRoLmFicyhtb3VzZURvd25YIC0gZXZlbnQuY2xpZW50WCkgPCBzZXR0aW5nLmVkaXQuZHJhZy5taW5Nb3ZlU2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgTWF0aC5hYnMobW91c2VEb3duWSAtIGV2ZW50LmNsaWVudFkpIDwgc2V0dGluZy5lZGl0LmRyYWcubWluTW92ZVNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBpLCBsLCB0bXBOb2RlLCB0bXBEb20sIHRtcE5vZGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBib2R5LmNzcyhcImN1cnNvclwiLCBcInBvaW50ZXJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuZHJhZ0ZsYWcgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2xzLmFwcGx5KHNldHRpbmcuY2FsbGJhY2suYmVmb3JlRHJhZywgW3NldHRpbmcudHJlZUlkLCBub2Rlc10sIHRydWUpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvY01vdXNlVXAoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LmRyYWdOb2RlU2hvd0JlZm9yZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBOb2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcE5vZGUuaXNQYXJlbnQgJiYgdG1wTm9kZS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZXhwYW5kQ29sbGFwc2VOb2RlKHNldHRpbmcsIHRtcE5vZGUsICF0bXBOb2RlLm9wZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290LmRyYWdOb2RlU2hvd0JlZm9yZVt0bXBOb2RlLnRJZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuZHJhZ05vZGVTaG93QmVmb3JlW3RtcE5vZGUudElkXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5kcmFnRmxhZyA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290cy5zaG93SG92ZXJEb20gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzLnNob3dJZmFtZU1hc2soc2V0dGluZywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc29ydFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzT3JkZXIgPSB0cnVlLCBsYXN0SW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBOb2RlcyA9IG5vZGVzWzBdLnBhcmVudFRJZCA/IG5vZGVzWzBdLmdldFBhcmVudE5vZGUoKVtjaGlsZEtleV0gOiBkYXRhLmdldE5vZGVzKHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE5vZGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHBOb2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuZHJhZ05vZGVTaG93QmVmb3JlW3BOb2Rlc1tpXS50SWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc09yZGVyICYmIGxhc3RJbmRleCA+IC0xICYmIChsYXN0SW5kZXggKyAxKSAhPT0gaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3JkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE5vZGVzLnB1c2gocE5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gdG1wTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlcyA9IHRtcE5vZGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNPcmRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZU5vZGUgPSBub2Rlc1swXS5nZXRQcmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXS5nZXROZXh0Tm9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NldCBub2RlIGluIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlID0gJCQoXCI8dWwgY2xhc3M9J3pUcmVlRHJhZ1VMJz48L3VsPlwiLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBOb2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wTm9kZS5lZGl0TmFtZUZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNlbGVjdE5vZGUoc2V0dGluZywgdG1wTm9kZSwgaSA+IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcucmVtb3ZlVHJlZURvbShzZXR0aW5nLCB0bXBOb2RlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gc2V0dGluZy5lZGl0LmRyYWcubWF4U2hvd05vZGVOdW0gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcERvbSA9ICQkKFwiPGxpIGlkPSdcIiArIHRtcE5vZGUudElkICsgXCJfdG1wJz48L2xpPlwiLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBEb20uYXBwZW5kKCQkKHRtcE5vZGUsIGNvbnN0cy5pZC5BLCBzZXR0aW5nKS5jbG9uZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBEb20uY3NzKFwicGFkZGluZ1wiLCBcIjBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wRG9tLmNoaWxkcmVuKFwiI1wiICsgdG1wTm9kZS50SWQgKyBjb25zdHMuaWQuQSkucmVtb3ZlQ2xhc3MoY29uc3RzLm5vZGUuQ1VSU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ck5vZGUuYXBwZW5kKHRtcERvbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gc2V0dGluZy5lZGl0LmRyYWcubWF4U2hvd05vZGVOdW0gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcERvbSA9ICQkKFwiPGxpIGlkPSdcIiArIHRtcE5vZGUudElkICsgXCJfbW9yZXRtcCc+PGE+ICAuLi4gIDwvYT48L2xpPlwiLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5hcHBlbmQodG1wRG9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmF0dHIoXCJpZFwiLCBub2Rlc1swXS50SWQgKyBjb25zdHMuaWQuVUwgKyBcIl90bXBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmFkZENsYXNzKHNldHRpbmcudHJlZU9iai5hdHRyKFwiY2xhc3NcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyTm9kZS5hcHBlbmRUbyhib2R5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQXJyb3cgPSAkJChcIjxzcGFuIGNsYXNzPSd0bXB6VHJlZU1vdmVfYXJyb3cnPjwvc3Bhbj5cIiwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBBcnJvdy5hdHRyKFwiaWRcIiwgXCJ6VHJlZU1vdmVfYXJyb3dfdG1wXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQXJyb3cuYXBwZW5kVG8oYm9keSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5EUkFHLCBbZXZlbnQsIHNldHRpbmcudHJlZUlkLCBub2Rlc10pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuZHJhZ0ZsYWcgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcFRhcmdldCAmJiB0bXBBcnJvdy5hdHRyKFwiaWRcIikgPT0gZXZlbnQudGFyZ2V0LmlkICYmIHRtcFRhcmdldE5vZGVJZCAmJiAoZXZlbnQuY2xpZW50WCArIGRvYy5zY3JvbGxMZWZ0KCkgKyAyKSA+ICgkKFwiI1wiICsgdG1wVGFyZ2V0Tm9kZUlkICsgY29uc3RzLmlkLkEsIHRtcFRhcmdldCkub2Zmc2V0KCkubGVmdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeFQgPSAkKFwiI1wiICsgdG1wVGFyZ2V0Tm9kZUlkICsgY29uc3RzLmlkLkEsIHRtcFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0ID0gKHhULmxlbmd0aCA+IDApID8geFQuZ2V0KDApIDogZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0bXBUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXQucmVtb3ZlQ2xhc3MoY29uc3RzLm5vZGUuVE1QVEFSR0VUX1RSRUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBUYXJnZXROb2RlSWQpICQoXCIjXCIgKyB0bXBUYXJnZXROb2RlSWQgKyBjb25zdHMuaWQuQSwgdG1wVGFyZ2V0KS5yZW1vdmVDbGFzcyhjb25zdHMubm9kZS5UTVBUQVJHRVRfTk9ERSArIFwiX1wiICsgY29uc3RzLm1vdmUuVFlQRV9QUkVWKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoY29uc3RzLm5vZGUuVE1QVEFSR0VUX05PREUgKyBcIl9cIiArIF9jb25zdHMubW92ZS5UWVBFX05FWFQpLnJlbW92ZUNsYXNzKGNvbnN0cy5ub2RlLlRNUFRBUkdFVF9OT0RFICsgXCJfXCIgKyBfY29uc3RzLm1vdmUuVFlQRV9JTk5FUik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wVGFyZ2V0Tm9kZUlkID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9qdWRnZSBkcmFnICYgZHJvcCBpbiBtdWx0aSB6dHJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNPdGhlclRyZWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNldHRpbmcgPSBzZXR0aW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gZGF0YS5nZXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyBpbiBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1tzXS50cmVlSWQgJiYgc2V0dGluZ3Nbc10uZWRpdC5lbmFibGUgJiYgc2V0dGluZ3Nbc10udHJlZUlkICE9IHNldHRpbmcudHJlZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIChldmVudC50YXJnZXQuaWQgPT0gc2V0dGluZ3Nbc10udHJlZUlkIHx8ICQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKFwiI1wiICsgc2V0dGluZ3Nbc10udHJlZUlkKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc090aGVyVHJlZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNldHRpbmcgPSBzZXR0aW5nc1tzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2NTY3JvbGxUb3AgPSBkb2Muc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jU2Nyb2xsTGVmdCA9IGRvYy5zY3JvbGxMZWZ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZU9mZnNldCA9IHRhcmdldFNldHRpbmcudHJlZU9iai5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSB0YXJnZXRTZXR0aW5nLnRyZWVPYmouZ2V0KDApLnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IHRhcmdldFNldHRpbmcudHJlZU9iai5nZXQoMCkuc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZFRvcCA9IChldmVudC5jbGllbnRZICsgZG9jU2Nyb2xsVG9wIC0gdHJlZU9mZnNldC50b3ApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRCb3R0b20gPSAodGFyZ2V0U2V0dGluZy50cmVlT2JqLmhlaWdodCgpICsgdHJlZU9mZnNldC50b3AgLSBldmVudC5jbGllbnRZIC0gZG9jU2Nyb2xsVG9wKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkTGVmdCA9IChldmVudC5jbGllbnRYICsgZG9jU2Nyb2xsTGVmdCAtIHRyZWVPZmZzZXQubGVmdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZFJpZ2h0ID0gKHRhcmdldFNldHRpbmcudHJlZU9iai53aWR0aCgpICsgdHJlZU9mZnNldC5sZWZ0IC0gZXZlbnQuY2xpZW50WCAtIGRvY1Njcm9sbExlZnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG9wID0gKGRUb3AgPCBzZXR0aW5nLmVkaXQuZHJhZy5ib3JkZXJNYXggJiYgZFRvcCA+IHNldHRpbmcuZWRpdC5kcmFnLmJvcmRlck1pbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCb3R0b20gPSAoZEJvdHRvbSA8IHNldHRpbmcuZWRpdC5kcmFnLmJvcmRlck1heCAmJiBkQm90dG9tID4gc2V0dGluZy5lZGl0LmRyYWcuYm9yZGVyTWluKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xlZnQgPSAoZExlZnQgPCBzZXR0aW5nLmVkaXQuZHJhZy5ib3JkZXJNYXggJiYgZExlZnQgPiBzZXR0aW5nLmVkaXQuZHJhZy5ib3JkZXJNaW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmlnaHQgPSAoZFJpZ2h0IDwgc2V0dGluZy5lZGl0LmRyYWcuYm9yZGVyTWF4ICYmIGRSaWdodCA+IHNldHRpbmcuZWRpdC5kcmFnLmJvcmRlck1pbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUcmVlSW5uZXIgPSBkVG9wID4gc2V0dGluZy5lZGl0LmRyYWcuYm9yZGVyTWluICYmIGRCb3R0b20gPiBzZXR0aW5nLmVkaXQuZHJhZy5ib3JkZXJNaW4gJiYgZExlZnQgPiBzZXR0aW5nLmVkaXQuZHJhZy5ib3JkZXJNaW4gJiYgZFJpZ2h0ID4gc2V0dGluZy5lZGl0LmRyYWcuYm9yZGVyTWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVHJlZVRvcCA9IChpc1RvcCAmJiB0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsVG9wKCkgPD0gMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUcmVlQm90dG9tID0gKGlzQm90dG9tICYmICh0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsVG9wKCkgKyB0YXJnZXRTZXR0aW5nLnRyZWVPYmouaGVpZ2h0KCkgKyAxMCkgPj0gc2Nyb2xsSGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RyZWVMZWZ0ID0gKGlzTGVmdCAmJiB0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCgpIDw9IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVHJlZVJpZ2h0ID0gKGlzUmlnaHQgJiYgKHRhcmdldFNldHRpbmcudHJlZU9iai5zY3JvbGxMZWZ0KCkgKyB0YXJnZXRTZXR0aW5nLnRyZWVPYmoud2lkdGgoKSArIDEwKSA+PSBzY3JvbGxXaWR0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgJiYgdG9vbHMuaXNDaGlsZE9yU2VsZihldmVudC50YXJnZXQsIHRhcmdldFNldHRpbmcudHJlZUlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IG5vZGUgPGxpPiBkb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0T2JqID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0YXJnZXRPYmogJiYgdGFyZ2V0T2JqLnRhZ05hbWUgJiYgIXRvb2xzLmVxcyh0YXJnZXRPYmoudGFnTmFtZSwgXCJsaVwiKSAmJiB0YXJnZXRPYmouaWQgIT0gdGFyZ2V0U2V0dGluZy50cmVlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0T2JqID0gdGFyZ2V0T2JqLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbk1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZG9uJ3QgbW92ZSB0byBzZWxmIG9yIGNoaWxkcmVuIG9mIHNlbGZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE9iai5pZCA9PT0gdG1wTm9kZS50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbk1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQkKHRtcE5vZGUsIHNldHRpbmcpLmZpbmQoXCIjXCIgKyB0YXJnZXRPYmouaWQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbk1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW5Nb3ZlICYmIGV2ZW50LnRhcmdldCAmJiB0b29scy5pc0NoaWxkT3JTZWxmKGV2ZW50LnRhcmdldCwgdGFyZ2V0T2JqLmlkICsgY29uc3RzLmlkLkEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFRhcmdldCA9ICQodGFyZ2V0T2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVGFyZ2V0Tm9kZUlkID0gdGFyZ2V0T2JqLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGUgbW91c2UgbXVzdCBiZSBpbiB6VHJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wTm9kZSA9IG5vZGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVHJlZUlubmVyICYmIHRvb2xzLmlzQ2hpbGRPclNlbGYoZXZlbnQudGFyZ2V0LCB0YXJnZXRTZXR0aW5nLnRyZWVJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2p1ZGdlIG1vdXNlIG1vdmUgaW4gcm9vdCBvZiB6dHJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG1wVGFyZ2V0ICYmIChldmVudC50YXJnZXQuaWQgPT0gdGFyZ2V0U2V0dGluZy50cmVlSWQgfHwgaXNUcmVlVG9wIHx8IGlzVHJlZUJvdHRvbSB8fCBpc1RyZWVMZWZ0IHx8IGlzVHJlZVJpZ2h0KSAmJiAoaXNPdGhlclRyZWUgfHwgKCFpc090aGVyVHJlZSAmJiB0bXBOb2RlLnBhcmVudFRJZCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFRhcmdldCA9IHRhcmdldFNldHRpbmcudHJlZU9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hdXRvIHNjcm9sbCB0b3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2V0dGluZy50cmVlT2JqLnNjcm9sbFRvcCh0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsVG9wKCkgLSAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0JvdHRvbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsVG9wKHRhcmdldFNldHRpbmcudHJlZU9iai5zY3JvbGxUb3AoKSArIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCh0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCgpIC0gMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCh0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCgpICsgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2F1dG8gc2Nyb2xsIGxlZnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wVGFyZ2V0ICYmIHRtcFRhcmdldCAhPSB0YXJnZXRTZXR0aW5nLnRyZWVPYmogJiYgdG1wVGFyZ2V0Lm9mZnNldCgpLmxlZnQgPCB0YXJnZXRTZXR0aW5nLnRyZWVPYmoub2Zmc2V0KCkubGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCh0YXJnZXRTZXR0aW5nLnRyZWVPYmouc2Nyb2xsTGVmdCgpICsgdG1wVGFyZ2V0Lm9mZnNldCgpLmxlZnQgLSB0YXJnZXRTZXR0aW5nLnRyZWVPYmoub2Zmc2V0KCkubGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3BcIjogKGV2ZW50LmNsaWVudFkgKyBkb2NTY3JvbGxUb3AgKyAzKSArIFwicHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxlZnRcIjogKGV2ZW50LmNsaWVudFggKyBkb2NTY3JvbGxMZWZ0ICsgMykgKyBcInB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZFggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRZID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBUYXJnZXQgJiYgdG1wVGFyZ2V0LmF0dHIoXCJpZFwiKSAhPSB0YXJnZXRTZXR0aW5nLnRyZWVJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXBUYXJnZXROb2RlID0gdG1wVGFyZ2V0Tm9kZUlkID09IG51bGwgPyBudWxsIDogZGF0YS5nZXROb2RlQ2FjaGUodGFyZ2V0U2V0dGluZywgdG1wVGFyZ2V0Tm9kZUlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb3B5ID0gKChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpICYmIHNldHRpbmcuZWRpdC5kcmFnLmlzTW92ZSAmJiBzZXR0aW5nLmVkaXQuZHJhZy5pc0NvcHkpIHx8ICghc2V0dGluZy5lZGl0LmRyYWcuaXNNb3ZlICYmIHNldHRpbmcuZWRpdC5kcmFnLmlzQ29weSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJldiA9ICEhKHByZU5vZGUgJiYgdG1wVGFyZ2V0Tm9kZUlkID09PSBwcmVOb2RlLnRJZCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV4dCA9ICEhKG5leHROb2RlICYmIHRtcFRhcmdldE5vZGVJZCA9PT0gbmV4dE5vZGUudElkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbm5lciA9ICh0bXBOb2RlLnBhcmVudFRJZCAmJiB0bXBOb2RlLnBhcmVudFRJZCA9PSB0bXBUYXJnZXROb2RlSWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5QcmV2ID0gKGlzQ29weSB8fCAhaXNOZXh0KSAmJiB0b29scy5hcHBseSh0YXJnZXRTZXR0aW5nLmVkaXQuZHJhZy5wcmV2LCBbdGFyZ2V0U2V0dGluZy50cmVlSWQsIG5vZGVzLCB0bXBUYXJnZXROb2RlXSwgISF0YXJnZXRTZXR0aW5nLmVkaXQuZHJhZy5wcmV2KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuTmV4dCA9IChpc0NvcHkgfHwgIWlzUHJldikgJiYgdG9vbHMuYXBwbHkodGFyZ2V0U2V0dGluZy5lZGl0LmRyYWcubmV4dCwgW3RhcmdldFNldHRpbmcudHJlZUlkLCBub2RlcywgdG1wVGFyZ2V0Tm9kZV0sICEhdGFyZ2V0U2V0dGluZy5lZGl0LmRyYWcubmV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbklubmVyID0gKGlzQ29weSB8fCAhaXNJbm5lcikgJiYgISh0YXJnZXRTZXR0aW5nLmRhdGEua2VlcC5sZWFmICYmICF0bXBUYXJnZXROb2RlLmlzUGFyZW50KSAmJiB0b29scy5hcHBseSh0YXJnZXRTZXR0aW5nLmVkaXQuZHJhZy5pbm5lciwgW3RhcmdldFNldHRpbmcudHJlZUlkLCBub2RlcywgdG1wVGFyZ2V0Tm9kZV0sICEhdGFyZ2V0U2V0dGluZy5lZGl0LmRyYWcuaW5uZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJNb3ZlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXROb2RlSWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVHlwZSA9IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEFycm93LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogXCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuelRyZWVNb3ZlVGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh3aW5kb3cuelRyZWVNb3ZlVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnpUcmVlTW92ZVRhcmdldE5vZGVUSWQgPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5QcmV2ICYmICFjYW5OZXh0ICYmICFjYW5Jbm5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhck1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wVGFyZ2V0QSA9ICQoXCIjXCIgKyB0bXBUYXJnZXROb2RlSWQgKyBjb25zdHMuaWQuQSwgdG1wVGFyZ2V0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE5leHRBID0gdG1wVGFyZ2V0Tm9kZS5pc0xhc3ROb2RlID8gbnVsbCA6ICQoXCIjXCIgKyB0bXBUYXJnZXROb2RlLmdldE5leHROb2RlKCkudElkICsgY29uc3RzLmlkLkEsIHRtcFRhcmdldC5uZXh0KCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVG9wID0gdG1wVGFyZ2V0QS5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBMZWZ0ID0gdG1wVGFyZ2V0QS5vZmZzZXQoKS5sZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlBlcmNlbnQgPSBjYW5QcmV2ID8gKGNhbklubmVyID8gMC4yNSA6IChjYW5OZXh0ID8gMC41IDogMSkpIDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0UGVyY2VudCA9IGNhbk5leHQgPyAoY2FuSW5uZXIgPyAwLjc1IDogKGNhblByZXYgPyAwLjUgOiAwKSkgOiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRZX3BlcmNlbnQgPSAoZXZlbnQuY2xpZW50WSArIGRvY1Njcm9sbFRvcCAtIHRtcFRvcCkgLyB0bXBUYXJnZXRBLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJldlBlcmNlbnQgPT0gMSB8fCBkWV9wZXJjZW50IDw9IHByZXZQZXJjZW50ICYmIGRZX3BlcmNlbnQgPj0gLS4yKSAmJiBjYW5QcmV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkWCA9IDEgLSB0bXBBcnJvdy53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFkgPSB0bXBUb3AgLSB0bXBBcnJvdy5oZWlnaHQoKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVHlwZSA9IGNvbnN0cy5tb3ZlLlRZUEVfUFJFVjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgobmV4dFBlcmNlbnQgPT0gMCB8fCBkWV9wZXJjZW50ID49IG5leHRQZXJjZW50ICYmIGRZX3BlcmNlbnQgPD0gMS4yKSAmJiBjYW5OZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkWCA9IDEgLSB0bXBBcnJvdy53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFkgPSAodG1wTmV4dEEgPT0gbnVsbCB8fCAodG1wVGFyZ2V0Tm9kZS5pc1BhcmVudCAmJiB0bXBUYXJnZXROb2RlLm9wZW4pKSA/ICh0bXBUb3AgKyB0bXBUYXJnZXRBLmhlaWdodCgpIC0gdG1wQXJyb3cuaGVpZ2h0KCkgLyAyKSA6ICh0bXBOZXh0QS5vZmZzZXQoKS50b3AgLSB0bXBBcnJvdy5oZWlnaHQoKSAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVR5cGUgPSBjb25zdHMubW92ZS5UWVBFX05FWFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FuSW5uZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRYID0gNSAtIHRtcEFycm93LndpZHRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkWSA9IHRtcFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUeXBlID0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcFRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wQXJyb3cuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogXCJibG9ja1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wXCI6IGRZICsgXCJweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdFwiOiAodG1wTGVmdCArIGRYKSArIFwicHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXRBLmFkZENsYXNzKGNvbnN0cy5ub2RlLlRNUFRBUkdFVF9OT0RFICsgXCJfXCIgKyBtb3ZlVHlwZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVUbXBUYXJnZXROb2RlSWQgIT0gdG1wVGFyZ2V0Tm9kZUlkIHx8IHByZVRtcE1vdmVUeXBlICE9IG1vdmVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBUYXJnZXROb2RlICYmIHRtcFRhcmdldE5vZGUuaXNQYXJlbnQgJiYgbW92ZVR5cGUgPT0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydFRpbWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnpUcmVlTW92ZVRpbWVyICYmIHdpbmRvdy56VHJlZU1vdmVUYXJnZXROb2RlVElkICE9PSB0bXBUYXJnZXROb2RlLnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQod2luZG93LnpUcmVlTW92ZVRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnpUcmVlTW92ZVRhcmdldE5vZGVUSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LnpUcmVlTW92ZVRpbWVyICYmIHdpbmRvdy56VHJlZU1vdmVUYXJnZXROb2RlVElkID09PSB0bXBUYXJnZXROb2RlLnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFRpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy56VHJlZU1vdmVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVUeXBlICE9IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBUYXJnZXROb2RlICYmIHRtcFRhcmdldE5vZGUuaXNQYXJlbnQgJiYgIXRtcFRhcmdldE5vZGUub3BlbiAmJiAobmV3IERhdGUoKSkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lID4gdGFyZ2V0U2V0dGluZy5lZGl0LmRyYWcuYXV0b09wZW5UaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgdG9vbHMuYXBwbHkodGFyZ2V0U2V0dGluZy5jYWxsYmFjay5iZWZvcmVEcmFnT3BlbiwgW3RhcmdldFNldHRpbmcudHJlZUlkLCB0bXBUYXJnZXROb2RlXSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnN3aXRjaE5vZGUodGFyZ2V0U2V0dGluZywgdG1wVGFyZ2V0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNldHRpbmcuZWRpdC5kcmFnLmF1dG9FeHBhbmRUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5FWFBBTkQsIFt0YXJnZXRTZXR0aW5nLnRyZWVJZCwgdG1wVGFyZ2V0Tm9kZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGFyZ2V0U2V0dGluZy5lZGl0LmRyYWcuYXV0b09wZW5UaW1lICsgNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuelRyZWVNb3ZlVGFyZ2V0Tm9kZVRJZCA9IHRtcFRhcmdldE5vZGUudElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVR5cGUgPSBjb25zdHMubW92ZS5UWVBFX0lOTkVSO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBUYXJnZXQgJiYgdG9vbHMuYXBwbHkodGFyZ2V0U2V0dGluZy5lZGl0LmRyYWcuaW5uZXIsIFt0YXJnZXRTZXR0aW5nLnRyZWVJZCwgbm9kZXMsIG51bGxdLCAhIXRhcmdldFNldHRpbmcuZWRpdC5kcmFnLmlubmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXQuYWRkQ2xhc3MoY29uc3RzLm5vZGUuVE1QVEFSR0VUX1RSRUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEFycm93LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGlzcGxheVwiOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuelRyZWVNb3ZlVGltZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHdpbmRvdy56VHJlZU1vdmVUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy56VHJlZU1vdmVUYXJnZXROb2RlVElkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVUbXBUYXJnZXROb2RlSWQgPSB0bXBUYXJnZXROb2RlSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVUbXBNb3ZlVHlwZSA9IG1vdmVUeXBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmoudHJpZ2dlcihjb25zdHMuZXZlbnQuRFJBR01PVkUsIFtldmVudCwgc2V0dGluZy50cmVlSWQsIG5vZGVzXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRvYy5iaW5kKFwibW91c2V1cFwiLCBfZG9jTW91c2VVcCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gX2RvY01vdXNlVXAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy56VHJlZU1vdmVUaW1lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHdpbmRvdy56VHJlZU1vdmVUaW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuelRyZWVNb3ZlVGFyZ2V0Tm9kZVRJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJlVG1wVGFyZ2V0Tm9kZUlkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcHJlVG1wTW92ZVR5cGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkb2MudW5iaW5kKFwibW91c2Vtb3ZlXCIsIF9kb2NNb3VzZU1vdmUpO1xuICAgICAgICAgICAgICAgICAgICBkb2MudW5iaW5kKFwibW91c2V1cFwiLCBfZG9jTW91c2VVcCk7XG4gICAgICAgICAgICAgICAgICAgIGRvYy51bmJpbmQoXCJzZWxlY3RzdGFydFwiLCBfZG9jU2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgYm9keS5jc3MoXCJjdXJzb3JcIiwgXCJhdXRvXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG1wVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXQucmVtb3ZlQ2xhc3MoY29uc3RzLm5vZGUuVE1QVEFSR0VUX1RSRUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcFRhcmdldE5vZGVJZCkgJChcIiNcIiArIHRtcFRhcmdldE5vZGVJZCArIGNvbnN0cy5pZC5BLCB0bXBUYXJnZXQpLnJlbW92ZUNsYXNzKGNvbnN0cy5ub2RlLlRNUFRBUkdFVF9OT0RFICsgXCJfXCIgKyBjb25zdHMubW92ZS5UWVBFX1BSRVYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGNvbnN0cy5ub2RlLlRNUFRBUkdFVF9OT0RFICsgXCJfXCIgKyBfY29uc3RzLm1vdmUuVFlQRV9ORVhUKS5yZW1vdmVDbGFzcyhjb25zdHMubm9kZS5UTVBUQVJHRVRfTk9ERSArIFwiX1wiICsgX2NvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xzLnNob3dJZmFtZU1hc2soc2V0dGluZywgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJvb3RzLnNob3dIb3ZlckRvbSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290LmRyYWdGbGFnID09IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5kcmFnRmxhZyA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGksIGwsIHRtcE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcE5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0bXBOb2RlLmlzUGFyZW50ICYmIHJvb3QuZHJhZ05vZGVTaG93QmVmb3JlW3RtcE5vZGUudElkXSAmJiAhdG1wTm9kZS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5leHBhbmRDb2xsYXBzZU5vZGUoc2V0dGluZywgdG1wTm9kZSwgIXRtcE5vZGUub3Blbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJvb3QuZHJhZ05vZGVTaG93QmVmb3JlW3RtcE5vZGUudElkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJOb2RlKSBjdXJOb2RlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG1wQXJyb3cpIHRtcEFycm93LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0NvcHkgPSAoKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgJiYgc2V0dGluZy5lZGl0LmRyYWcuaXNNb3ZlICYmIHNldHRpbmcuZWRpdC5kcmFnLmlzQ29weSkgfHwgKCFzZXR0aW5nLmVkaXQuZHJhZy5pc01vdmUgJiYgc2V0dGluZy5lZGl0LmRyYWcuaXNDb3B5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NvcHkgJiYgdG1wVGFyZ2V0ICYmIHRtcFRhcmdldE5vZGVJZCAmJiBub2Rlc1swXS5wYXJlbnRUSWQgJiYgdG1wVGFyZ2V0Tm9kZUlkID09IG5vZGVzWzBdLnBhcmVudFRJZCAmJiBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX0lOTkVSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0bXBUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcmFnVGFyZ2V0Tm9kZSA9IHRtcFRhcmdldE5vZGVJZCA9PSBudWxsID8gbnVsbCA6IGRhdGEuZ2V0Tm9kZUNhY2hlKHRhcmdldFNldHRpbmcsIHRtcFRhcmdldE5vZGVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVEcm9wLCBbdGFyZ2V0U2V0dGluZy50cmVlSWQsIG5vZGVzLCBkcmFnVGFyZ2V0Tm9kZSwgbW92ZVR5cGUsIGlzQ29weV0sIHRydWUpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZWxlY3ROb2Rlcyhzb3VyY2VTZXR0aW5nLCBub2Rlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld05vZGVzID0gaXNDb3B5ID8gdG9vbHMuY2xvbmUobm9kZXMpIDogbm9kZXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyb3BDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNPdGhlclRyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5yZW1vdmVOb2RlKHNldHRpbmcsIG5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVR5cGUgPT0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5hZGROb2Rlcyh0YXJnZXRTZXR0aW5nLCBkcmFnVGFyZ2V0Tm9kZSwgLTEsIG5ld05vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuYWRkTm9kZXModGFyZ2V0U2V0dGluZywgZHJhZ1RhcmdldE5vZGUuZ2V0UGFyZW50Tm9kZSgpLCBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX1BSRVYgPyBkcmFnVGFyZ2V0Tm9kZS5nZXRJbmRleCgpIDogZHJhZ1RhcmdldE5vZGUuZ2V0SW5kZXgoKSArIDEsIG5ld05vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NvcHkgJiYgbW92ZVR5cGUgPT0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5hZGROb2Rlcyh0YXJnZXRTZXR0aW5nLCBkcmFnVGFyZ2V0Tm9kZSwgLTEsIG5ld05vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0NvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuYWRkTm9kZXModGFyZ2V0U2V0dGluZywgZHJhZ1RhcmdldE5vZGUuZ2V0UGFyZW50Tm9kZSgpLCBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX1BSRVYgPyBkcmFnVGFyZ2V0Tm9kZS5nZXRJbmRleCgpIDogZHJhZ1RhcmdldE5vZGUuZ2V0SW5kZXgoKSArIDEsIG5ld05vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlVHlwZSAhPSBjb25zdHMubW92ZS5UWVBFX05FWFQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gbmV3Tm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcubW92ZU5vZGUodGFyZ2V0U2V0dGluZywgZHJhZ1RhcmdldE5vZGUsIG5ld05vZGVzW2ldLCBtb3ZlVHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gLTEsIGwgPSBuZXdOb2Rlcy5sZW5ndGggLSAxOyBpIDwgbDsgbC0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcubW92ZU5vZGUodGFyZ2V0U2V0dGluZywgZHJhZ1RhcmdldE5vZGUsIG5ld05vZGVzW2xdLCBtb3ZlVHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNlbGVjdE5vZGVzKHRhcmdldFNldHRpbmcsIG5ld05vZGVzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gJCQobmV3Tm9kZXNbMF0sIHNldHRpbmcpLmdldCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNjcm9sbEludG9WaWV3KGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy50cmVlT2JqLnRyaWdnZXIoY29uc3RzLmV2ZW50LkRST1AsIFtldmVudCwgdGFyZ2V0U2V0dGluZy50cmVlSWQsIG5ld05vZGVzLCBkcmFnVGFyZ2V0Tm9kZSwgbW92ZVR5cGUsIGlzQ29weV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVR5cGUgPT0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUiAmJiB0b29scy5jYW5Bc3luYyh0YXJnZXRTZXR0aW5nLCBkcmFnVGFyZ2V0Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmFzeW5jTm9kZSh0YXJnZXRTZXR0aW5nLCBkcmFnVGFyZ2V0Tm9kZSwgZmFsc2UsIGRyb3BDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNlbGVjdE5vZGVzKHNvdXJjZVNldHRpbmcsIG5vZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmcudHJlZU9iai50cmlnZ2VyKGNvbnN0cy5ldmVudC5EUk9QLCBbZXZlbnQsIHNldHRpbmcudHJlZUlkLCBub2RlcywgbnVsbCwgbnVsbCwgbnVsbF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZG9jLmJpbmQoXCJzZWxlY3RzdGFydFwiLCBfZG9jU2VsZWN0KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBfZG9jU2VsZWN0KCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9Bdm9pZCBGaXJlRm94J3MgQnVnXG4gICAgICAgICAgICAgICAgLy9JZiB6VHJlZSBEaXYgQ1NTIHNldCAnb3ZlcmZsb3cnLCBzbyBkcmFnIG5vZGUgb3V0c2lkZSBvZiB6VHJlZSwgYW5kIGV2ZW50LnRhcmdldCBpcyBlcnJvci5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRNb3VzZURvd24ucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRNb3VzZURvd24ucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vbWV0aG9kIG9mIHRvb2xzIGZvciB6VHJlZVxuICAgICAgICBfdG9vbHMgPSB7XG4gICAgICAgICAgICBnZXRBYnM6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICB2YXIgb1JlY3QgPSBvYmouZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIHJldHVybiBbb1JlY3QubGVmdCArIHNjcm9sbExlZnQsIG9SZWN0LnRvcCArIHNjcm9sbFRvcF07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRGb2N1czogZnVuY3Rpb24gKGlucHV0T2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0T2JqLmdldCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dE9iai5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB0b29scy5zZXRDdXJzb3JQb3NpdGlvbihpbnB1dE9iai5nZXQoMCksIGlucHV0T2JqLnZhbCgpLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlucHV0U2VsZWN0OiBmdW5jdGlvbiAoaW5wdXRPYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRPYmouZ2V0KDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0T2JqLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0T2JqLnNlbGVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRDdXJzb3JQb3NpdGlvbjogZnVuY3Rpb24gKG9iaiwgcG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iai5zZXRTZWxlY3Rpb25SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBvYmouZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldFNlbGVjdGlvblJhbmdlKHBvcywgcG9zKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5jcmVhdGVUZXh0UmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gb2JqLmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2hvd0lmYW1lTWFzazogZnVuY3Rpb24gKHNldHRpbmcsIHNob3dTaWduKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgLy9jbGVhciBmdWxsIG1hc2tcbiAgICAgICAgICAgICAgICB3aGlsZSAocm9vdC5kcmFnTWFza0xpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByb290LmRyYWdNYXNrTGlzdFswXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5kcmFnTWFza0xpc3Quc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNob3dTaWduKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vc2hvdyBtYXNrXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWVMaXN0ID0gJCQoXCJpZnJhbWVcIiwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWZyYW1lTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBpZnJhbWVMaXN0LmdldChpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdG9vbHMuZ2V0QWJzKG9iaiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ01hc2sgPSAkJChcIjxkaXYgaWQ9J3pUcmVlTWFza19cIiArIGkgKyBcIicgY2xhc3M9J3pUcmVlTWFzaycgc3R5bGU9J3RvcDpcIiArIHJbMV0gKyBcInB4OyBsZWZ0OlwiICsgclswXSArIFwicHg7IHdpZHRoOlwiICsgb2JqLm9mZnNldFdpZHRoICsgXCJweDsgaGVpZ2h0OlwiICsgb2JqLm9mZnNldEhlaWdodCArIFwicHg7Jz48L2Rpdj5cIiwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnTWFzay5hcHBlbmRUbygkJChcImJvZHlcIiwgc2V0dGluZykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5kcmFnTWFza0xpc3QucHVzaChkcmFnTWFzayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vbWV0aG9kIG9mIG9wZXJhdGUgenRyZWUgZG9tXG4gICAgICAgIF92aWV3ID0ge1xuICAgICAgICAgICAgYWRkRWRpdEJ0bjogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5lZGl0TmFtZUZsYWcgfHwgJCQobm9kZSwgY29uc3RzLmlkLkVESVQsIHNldHRpbmcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRvb2xzLmFwcGx5KHNldHRpbmcuZWRpdC5zaG93UmVuYW1lQnRuLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCBzZXR0aW5nLmVkaXQuc2hvd1JlbmFtZUJ0bikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYU9iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5BLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgZWRpdFN0ciA9IFwiPHNwYW4gY2xhc3M9J1wiICsgY29uc3RzLmNsYXNzTmFtZS5CVVRUT04gKyBcIiBlZGl0JyBpZD0nXCIgKyBub2RlLnRJZCArIGNvbnN0cy5pZC5FRElUICsgXCInIHRpdGxlPSdcIiArIHRvb2xzLmFwcGx5KHNldHRpbmcuZWRpdC5yZW5hbWVUaXRsZSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgc2V0dGluZy5lZGl0LnJlbmFtZVRpdGxlKSArIFwiJyB0cmVlTm9kZVwiICsgY29uc3RzLmlkLkVESVQgKyBcIiBzdHlsZT0nZGlzcGxheTpub25lOyc+PC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgIGFPYmouYXBwZW5kKGVkaXRTdHIpO1xuXG4gICAgICAgICAgICAgICAgJCQobm9kZSwgY29uc3RzLmlkLkVESVQsIHNldHRpbmcpLmJpbmQoJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b29scy51Q2FuRG8oc2V0dGluZykgfHwgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVFZGl0TmFtZSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgdHJ1ZSkgPT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZWRpdE5vZGUoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApLnNob3coKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGRSZW1vdmVCdG46IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZWRpdE5hbWVGbGFnIHx8ICQkKG5vZGUsIGNvbnN0cy5pZC5SRU1PVkUsIHNldHRpbmcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRvb2xzLmFwcGx5KHNldHRpbmcuZWRpdC5zaG93UmVtb3ZlQnRuLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdLCBzZXR0aW5nLmVkaXQuc2hvd1JlbW92ZUJ0bikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYU9iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5BLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU3RyID0gXCI8c3BhbiBjbGFzcz0nXCIgKyBjb25zdHMuY2xhc3NOYW1lLkJVVFRPTiArIFwiIHJlbW92ZScgaWQ9J1wiICsgbm9kZS50SWQgKyBjb25zdHMuaWQuUkVNT1ZFICsgXCInIHRpdGxlPSdcIiArIHRvb2xzLmFwcGx5KHNldHRpbmcuZWRpdC5yZW1vdmVUaXRsZSwgW3NldHRpbmcudHJlZUlkLCBub2RlXSwgc2V0dGluZy5lZGl0LnJlbW92ZVRpdGxlKSArIFwiJyB0cmVlTm9kZVwiICsgY29uc3RzLmlkLlJFTU9WRSArIFwiIHN0eWxlPSdkaXNwbGF5Om5vbmU7Jz48L3NwYW4+XCI7XG4gICAgICAgICAgICAgICAgYU9iai5hcHBlbmQocmVtb3ZlU3RyKTtcblxuICAgICAgICAgICAgICAgICQkKG5vZGUsIGNvbnN0cy5pZC5SRU1PVkUsIHNldHRpbmcpLmJpbmQoJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b29scy51Q2FuRG8oc2V0dGluZykgfHwgdG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVSZW1vdmUsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0sIHRydWUpID09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZU5vZGUoc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmoudHJpZ2dlcihjb25zdHMuZXZlbnQuUkVNT1ZFLCBbc2V0dGluZy50cmVlSWQsIG5vZGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICkuYmluZCgnbW91c2Vkb3duJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGV2ZW50TW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICkuc2hvdygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZEhvdmVyRG9tOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmdldFJvb3RzKCkuc2hvd0hvdmVyRG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNIb3ZlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmVkaXQuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmFkZEVkaXRCdG4oc2V0dGluZywgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmFkZFJlbW92ZUJ0bihzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0b29scy5hcHBseShzZXR0aW5nLnZpZXcuYWRkSG92ZXJEb20sIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWxDdXJFZGl0Tm9kZTogZnVuY3Rpb24gKHNldHRpbmcsIGZvcmNlTmFtZSwgaXNDYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUtleSA9IHNldHRpbmcuZGF0YS5rZXkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHJvb3QuY3VyRWRpdE5vZGU7XG5cbiAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRPYmogPSByb290LmN1ckVkaXRJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld05hbWUgPSBmb3JjZU5hbWUgPyBmb3JjZU5hbWUgOiAoaXNDYW5jZWwgPyBub2RlW25hbWVLZXldIDogaW5wdXRPYmoudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbHMuYXBwbHkoc2V0dGluZy5jYWxsYmFjay5iZWZvcmVSZW5hbWUsIFtzZXR0aW5nLnRyZWVJZCwgbm9kZSwgbmV3TmFtZSwgaXNDYW5jZWxdLCB0cnVlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBub2RlW25hbWVLZXldID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFPYmogPSAkJChub2RlLCBjb25zdHMuaWQuQSwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGFPYmoucmVtb3ZlQ2xhc3MoY29uc3RzLm5vZGUuQ1VSU0VMRUNURURfRURJVCk7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0T2JqLnVuYmluZCgpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnNldE5vZGVOYW1lKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmVkaXROYW1lRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByb290LmN1ckVkaXROb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5jdXJFZGl0SW5wdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnNlbGVjdE5vZGUoc2V0dGluZywgbm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnRyZWVPYmoudHJpZ2dlcihjb25zdHMuZXZlbnQuUkVOQU1FLCBbc2V0dGluZy50cmVlSWQsIG5vZGUsIGlzQ2FuY2VsXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvb3Qubm9TZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVkaXROb2RlOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciByb290ID0gZGF0YS5nZXRSb290KHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIHZpZXcuZWRpdE5vZGVCbHVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaXNTZWxlY3RlZE5vZGUoc2V0dGluZywgbm9kZSkgJiYgcm9vdC5jdXJFZGl0Tm9kZSA9PSBub2RlICYmIG5vZGUuZWRpdE5hbWVGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0b29scy5pbnB1dEZvY3VzKHJvb3QuY3VyRWRpdElucHV0KTsgfSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVLZXkgPSBzZXR0aW5nLmRhdGEua2V5Lm5hbWU7XG4gICAgICAgICAgICAgICAgbm9kZS5lZGl0TmFtZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZpZXcucmVtb3ZlVHJlZURvbShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEN1ckVkaXROb2RlKHNldHRpbmcpO1xuICAgICAgICAgICAgICAgIHZpZXcuc2VsZWN0Tm9kZShzZXR0aW5nLCBub2RlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgJCQobm9kZSwgY29uc3RzLmlkLlNQQU4sIHNldHRpbmcpLmh0bWwoXCI8aW5wdXQgdHlwZT10ZXh0IGNsYXNzPSdyZW5hbWUnIGlkPSdcIiArIG5vZGUudElkICsgY29uc3RzLmlkLklOUFVUICsgXCInIHRyZWVOb2RlXCIgKyBjb25zdHMuaWQuSU5QVVQgKyBcIiA+XCIpO1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dE9iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5JTlBVVCwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgaW5wdXRPYmouYXR0cihcInZhbHVlXCIsIG5vZGVbbmFtZUtleV0pO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nLmVkaXQuZWRpdE5hbWVTZWxlY3RBbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbHMuaW5wdXRTZWxlY3QoaW5wdXRPYmopO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xzLmlucHV0Rm9jdXMoaW5wdXRPYmopO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlucHV0T2JqLmJpbmQoJ2JsdXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2aWV3LmVkaXROb2RlQmx1cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5jYW5jZWxDdXJFZGl0Tm9kZShzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmJpbmQoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gXCIxM1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmVkaXROb2RlQmx1ciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEN1ckVkaXROb2RlKHNldHRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gXCIyN1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEN1ckVkaXROb2RlKHNldHRpbmcsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pLmJpbmQoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICQkKG5vZGUsIGNvbnN0cy5pZC5BLCBzZXR0aW5nKS5hZGRDbGFzcyhjb25zdHMubm9kZS5DVVJTRUxFQ1RFRF9FRElUKTtcbiAgICAgICAgICAgICAgICByb290LmN1ckVkaXRJbnB1dCA9IGlucHV0T2JqO1xuICAgICAgICAgICAgICAgIHJvb3Qubm9TZWxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByb290LmN1ckVkaXROb2RlID0gbm9kZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3ZlTm9kZTogZnVuY3Rpb24gKHNldHRpbmcsIHRhcmdldE5vZGUsIG5vZGUsIG1vdmVUeXBlLCBhbmltYXRlRmxhZywgaXNTaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm9vdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRLZXkgPSBzZXR0aW5nLmRhdGEua2V5LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlID09IG5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZy5kYXRhLmtlZXAubGVhZiAmJiB0YXJnZXROb2RlICYmICF0YXJnZXROb2RlLmlzUGFyZW50ICYmIG1vdmVUeXBlID09IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgb2xkUGFyZW50Tm9kZSA9IChub2RlLnBhcmVudFRJZCA/IG5vZGUuZ2V0UGFyZW50Tm9kZSgpIDogcm9vdCksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGVJc1Jvb3QgPSAodGFyZ2V0Tm9kZSA9PT0gbnVsbCB8fCB0YXJnZXROb2RlID09IHJvb3QpO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlSXNSb290ICYmIHRhcmdldE5vZGUgPT09IG51bGwpIHRhcmdldE5vZGUgPSByb290O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlSXNSb290KSBtb3ZlVHlwZSA9IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVI7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFBhcmVudE5vZGUgPSAodGFyZ2V0Tm9kZS5wYXJlbnRUSWQgPyB0YXJnZXROb2RlLmdldFBhcmVudE5vZGUoKSA6IHJvb3QpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1vdmVUeXBlICE9IGNvbnN0cy5tb3ZlLlRZUEVfUFJFViAmJiBtb3ZlVHlwZSAhPSBjb25zdHMubW92ZS5UWVBFX05FWFQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVR5cGUgPSBjb25zdHMubW92ZS5UWVBFX0lOTkVSO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX0lOTkVSKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlSXNSb290KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3BhcmVudFRJZCBvZiByb290IG5vZGUgaXMgbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnRUSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXROb2RlLmlzUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5pc1BhcmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZS5vcGVuID0gISF0YXJnZXROb2RlLm9wZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXROb2RlTGluZUljb3Moc2V0dGluZywgdGFyZ2V0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudFRJZCA9IHRhcmdldE5vZGUudElkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9tb3ZlIG5vZGUgRG9tXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldE9iaiwgdGFyZ2V0X3VsT2JqO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXROb2RlSXNSb290KSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE9iaiA9IHNldHRpbmcudHJlZU9iajtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3VsT2JqID0gdGFyZ2V0T2JqO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNTaWxlbnQgJiYgbW92ZVR5cGUgPT0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5leHBhbmRDb2xsYXBzZU5vZGUoc2V0dGluZywgdGFyZ2V0Tm9kZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1NpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5leHBhbmRDb2xsYXBzZU5vZGUoc2V0dGluZywgdGFyZ2V0Tm9kZS5nZXRQYXJlbnROb2RlKCksIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRPYmogPSAkJCh0YXJnZXROb2RlLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3VsT2JqID0gJCQodGFyZ2V0Tm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGFyZ2V0T2JqLmdldCgwKSAmJiAhdGFyZ2V0X3VsT2JqLmdldCgwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsc3RyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Lm1ha2VVbEh0bWwoc2V0dGluZywgdGFyZ2V0Tm9kZSwgdWxzdHIsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE9iai5hcHBlbmQodWxzdHIuam9pbignJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldF91bE9iaiA9ICQkKHRhcmdldE5vZGUsIGNvbnN0cy5pZC5VTCwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBub2RlRG9tID0gJCQobm9kZSwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgaWYgKCFub2RlRG9tLmdldCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRG9tID0gdmlldy5hcHBlbmROb2RlcyhzZXR0aW5nLCBub2RlLmxldmVsLCBbbm9kZV0sIG51bGwsIC0xLCBmYWxzZSwgdHJ1ZSkuam9pbignJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGFyZ2V0T2JqLmdldCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlRG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0X3VsT2JqLmdldCgwKSAmJiBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX0lOTkVSKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldF91bE9iai5hcHBlbmQobm9kZURvbSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRPYmouZ2V0KDApICYmIG1vdmVUeXBlID09IGNvbnN0cy5tb3ZlLlRZUEVfUFJFVikge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRPYmouYmVmb3JlKG5vZGVEb20pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0T2JqLmdldCgwKSAmJiBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX05FWFQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0T2JqLmFmdGVyKG5vZGVEb20pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vcmVwYWlyIHRoZSBkYXRhIGFmdGVyIG1vdmVcbiAgICAgICAgICAgICAgICB2YXIgaSwgbCxcbiAgICAgICAgICAgICAgICAgICAgdG1wU3JjSW5kZXggPSAtMSxcbiAgICAgICAgICAgICAgICAgICAgdG1wVGFyZ2V0SW5kZXggPSAwLFxuICAgICAgICAgICAgICAgICAgICBvbGROZWlnaGJvciA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG5ld05laWdoYm9yID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgb2xkTGV2ZWwgPSBub2RlLmxldmVsO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmlzRmlyc3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRtcFNyY0luZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZE5laWdoYm9yID0gb2xkUGFyZW50Tm9kZVtjaGlsZEtleV1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGROZWlnaGJvci5pc0ZpcnN0Tm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGUuaXNMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0bXBTcmNJbmRleCA9IG9sZFBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIG9sZE5laWdoYm9yID0gb2xkUGFyZW50Tm9kZVtjaGlsZEtleV1bdG1wU3JjSW5kZXggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgb2xkTmVpZ2hib3IuaXNMYXN0Tm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IG9sZFBhcmVudE5vZGVbY2hpbGRLZXldLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFBhcmVudE5vZGVbY2hpbGRLZXldW2ldLnRJZCA9PSBub2RlLnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFNyY0luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG1wU3JjSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBvbGRQYXJlbnROb2RlW2NoaWxkS2V5XS5zcGxpY2UodG1wU3JjSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobW92ZVR5cGUgIT0gY29uc3RzLm1vdmUuVFlQRV9JTk5FUikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGFyZ2V0UGFyZW50Tm9kZVtjaGlsZEtleV0ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UGFyZW50Tm9kZVtjaGlsZEtleV1baV0udElkID09IHRhcmdldE5vZGUudElkKSB0bXBUYXJnZXRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVUeXBlID09IGNvbnN0cy5tb3ZlLlRZUEVfSU5ORVIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXROb2RlW2NoaWxkS2V5XSkgdGFyZ2V0Tm9kZVtjaGlsZEtleV0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldE5vZGVbY2hpbGRLZXldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld05laWdoYm9yID0gdGFyZ2V0Tm9kZVtjaGlsZEtleV1bdGFyZ2V0Tm9kZVtjaGlsZEtleV0ubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdOZWlnaGJvci5pc0xhc3ROb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZVtjaGlsZEtleV0uc3BsaWNlKHRhcmdldE5vZGVbY2hpbGRLZXldLmxlbmd0aCwgMCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNMYXN0Tm9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNGaXJzdE5vZGUgPSAodGFyZ2V0Tm9kZVtjaGlsZEtleV0ubGVuZ3RoID09IDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0Tm9kZS5pc0ZpcnN0Tm9kZSAmJiBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX1BSRVYpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UGFyZW50Tm9kZVtjaGlsZEtleV0uc3BsaWNlKHRtcFRhcmdldEluZGV4LCAwLCBub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3TmVpZ2hib3IgPSB0YXJnZXROb2RlO1xuICAgICAgICAgICAgICAgICAgICBuZXdOZWlnaGJvci5pc0ZpcnN0Tm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudFRJZCA9IHRhcmdldE5vZGUucGFyZW50VElkO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmlzRmlyc3ROb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pc0xhc3ROb2RlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldE5vZGUuaXNMYXN0Tm9kZSAmJiBtb3ZlVHlwZSA9PSBjb25zdHMubW92ZS5UWVBFX05FWFQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UGFyZW50Tm9kZVtjaGlsZEtleV0uc3BsaWNlKHRtcFRhcmdldEluZGV4ICsgMSwgMCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIG5ld05laWdoYm9yID0gdGFyZ2V0Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgbmV3TmVpZ2hib3IuaXNMYXN0Tm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudFRJZCA9IHRhcmdldE5vZGUucGFyZW50VElkO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmlzRmlyc3ROb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaXNMYXN0Tm9kZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVR5cGUgPT0gY29uc3RzLm1vdmUuVFlQRV9QUkVWKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRQYXJlbnROb2RlW2NoaWxkS2V5XS5zcGxpY2UodG1wVGFyZ2V0SW5kZXgsIDAsIG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UGFyZW50Tm9kZVtjaGlsZEtleV0uc3BsaWNlKHRtcFRhcmdldEluZGV4ICsgMSwgMCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnRUSWQgPSB0YXJnZXROb2RlLnBhcmVudFRJZDtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5pc0ZpcnN0Tm9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmlzTGFzdE5vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YS5maXhQSWRLZXlWYWx1ZShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICBkYXRhLnNldFNvbk5vZGVMZXZlbChzZXR0aW5nLCBub2RlLmdldFBhcmVudE5vZGUoKSwgbm9kZSk7XG5cbiAgICAgICAgICAgICAgICAvL3JlcGFpciBub2RlIHdoYXQgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZUxpbmVJY29zKHNldHRpbmcsIG5vZGUpO1xuICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyTm9kZUxldmVsQ2xhc3Moc2V0dGluZywgbm9kZSwgb2xkTGV2ZWwpXG5cbiAgICAgICAgICAgICAgICAvL3JlcGFpciBub2RlJ3Mgb2xkIHBhcmVudE5vZGUgZG9tXG4gICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5nLmRhdGEua2VlcC5wYXJlbnQgJiYgb2xkUGFyZW50Tm9kZVtjaGlsZEtleV0ubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICAvL29sZCBwYXJlbnROb2RlIGhhcyBubyBjaGlsZCBub2Rlc1xuICAgICAgICAgICAgICAgICAgICBvbGRQYXJlbnROb2RlLmlzUGFyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG9sZFBhcmVudE5vZGUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wX3VsT2JqID0gJCQob2xkUGFyZW50Tm9kZSwgY29uc3RzLmlkLlVMLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcF9zd2l0Y2hPYmogPSAkJChvbGRQYXJlbnROb2RlLCBjb25zdHMuaWQuU1dJVENILCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcF9pY29PYmogPSAkJChvbGRQYXJlbnROb2RlLCBjb25zdHMuaWQuSUNPTiwgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZVN3aXRjaENsYXNzKG9sZFBhcmVudE5vZGUsIHRtcF9zd2l0Y2hPYmosIGNvbnN0cy5mb2xkZXIuRE9DVSk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcucmVwbGFjZUljb0NsYXNzKG9sZFBhcmVudE5vZGUsIHRtcF9pY29PYmosIGNvbnN0cy5mb2xkZXIuRE9DVSk7XG4gICAgICAgICAgICAgICAgICAgIHRtcF91bE9iai5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2xkTmVpZ2hib3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9vbGQgbmVpZ2JvciBub2RlXG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0Tm9kZUxpbmVJY29zKHNldHRpbmcsIG9sZE5laWdoYm9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL25ldyBuZWlnYm9yIG5vZGVcbiAgICAgICAgICAgICAgICBpZiAobmV3TmVpZ2hib3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zZXROb2RlTGluZUljb3Moc2V0dGluZywgbmV3TmVpZ2hib3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vcmVwYWlyIGNoZWNrYm94IC8gcmFkaW9cbiAgICAgICAgICAgICAgICBpZiAoISFzZXR0aW5nLmNoZWNrICYmIHNldHRpbmcuY2hlY2suZW5hYmxlICYmIHZpZXcucmVwYWlyQ2hrQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5yZXBhaXJDaGtDbGFzcyhzZXR0aW5nLCBvbGRQYXJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5yZXBhaXJQYXJlbnRDaGtDbGFzc1dpdGhTZWxmKHNldHRpbmcsIG9sZFBhcmVudE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2xkUGFyZW50Tm9kZSAhPSBub2RlLnBhcmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3NXaXRoU2VsZihzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2V4cGFuZCBwYXJlbnRzIGFmdGVyIG1vdmVcbiAgICAgICAgICAgICAgICBpZiAoIWlzU2lsZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZXhwYW5kQ29sbGFwc2VQYXJlbnROb2RlKHNldHRpbmcsIG5vZGUuZ2V0UGFyZW50Tm9kZSgpLCB0cnVlLCBhbmltYXRlRmxhZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbW92ZUVkaXRCdG46IGZ1bmN0aW9uIChzZXR0aW5nLCBub2RlKSB7XG4gICAgICAgICAgICAgICAgJCQobm9kZSwgY29uc3RzLmlkLkVESVQsIHNldHRpbmcpLnVuYmluZCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbW92ZVJlbW92ZUJ0bjogZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUpIHtcbiAgICAgICAgICAgICAgICAkJChub2RlLCBjb25zdHMuaWQuUkVNT1ZFLCBzZXR0aW5nKS51bmJpbmQoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVUcmVlRG9tOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuaXNIb3ZlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZpZXcucmVtb3ZlRWRpdEJ0bihzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZVJlbW92ZUJ0bihzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgICAgICAgICB0b29scy5hcHBseShzZXR0aW5nLnZpZXcucmVtb3ZlSG92ZXJEb20sIFtzZXR0aW5nLnRyZWVJZCwgbm9kZV0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlcGFpck5vZGVMZXZlbENsYXNzOiBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSwgb2xkTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICBpZiAob2xkTGV2ZWwgPT09IG5vZGUubGV2ZWwpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgbGlPYmogPSAkJChub2RlLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgYU9iaiA9ICQkKG5vZGUsIGNvbnN0cy5pZC5BLCBzZXR0aW5nKSxcbiAgICAgICAgICAgICAgICAgICAgdWxPYmogPSAkJChub2RlLCBjb25zdHMuaWQuVUwsIHNldHRpbmcpLFxuICAgICAgICAgICAgICAgICAgICBvbGRDbGFzcyA9IGNvbnN0cy5jbGFzc05hbWUuTEVWRUwgKyBvbGRMZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3MgPSBjb25zdHMuY2xhc3NOYW1lLkxFVkVMICsgbm9kZS5sZXZlbDtcbiAgICAgICAgICAgICAgICBsaU9iai5yZW1vdmVDbGFzcyhvbGRDbGFzcyk7XG4gICAgICAgICAgICAgICAgbGlPYmouYWRkQ2xhc3MobmV3Q2xhc3MpO1xuICAgICAgICAgICAgICAgIGFPYmoucmVtb3ZlQ2xhc3Mob2xkQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGFPYmouYWRkQ2xhc3MobmV3Q2xhc3MpO1xuICAgICAgICAgICAgICAgIHVsT2JqLnJlbW92ZUNsYXNzKG9sZENsYXNzKTtcbiAgICAgICAgICAgICAgICB1bE9iai5hZGRDbGFzcyhuZXdDbGFzcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsZWN0Tm9kZXM6IGZ1bmN0aW9uIChzZXR0aW5nLCBub2Rlcykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2VsZWN0Tm9kZShzZXR0aW5nLCBub2Rlc1tpXSwgaSA+IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBfeiA9IHtcbiAgICAgICAgICAgIHRvb2xzOiBfdG9vbHMsXG4gICAgICAgICAgICB2aWV3OiBfdmlldyxcbiAgICAgICAgICAgIGV2ZW50OiBfZXZlbnQsXG4gICAgICAgICAgICBkYXRhOiBfZGF0YVxuICAgICAgICB9O1xuICAgICQuZXh0ZW5kKHRydWUsICQuZm4uelRyZWUuY29uc3RzLCBfY29uc3RzKTtcbiAgICAkLmV4dGVuZCh0cnVlLCAkLmZuLnpUcmVlLl96LCBfeik7XG5cbiAgICB2YXIgenQgPSAkLmZuLnpUcmVlLFxuICAgICAgICB0b29scyA9IHp0Ll96LnRvb2xzLFxuICAgICAgICBjb25zdHMgPSB6dC5jb25zdHMsXG4gICAgICAgIHZpZXcgPSB6dC5fei52aWV3LFxuICAgICAgICBkYXRhID0genQuX3ouZGF0YSxcbiAgICAgICAgZXZlbnQgPSB6dC5fei5ldmVudCxcbiAgICAgICAgJCQgPSB0b29scy4kO1xuXG4gICAgZGF0YS5leFNldHRpbmcoX3NldHRpbmcpO1xuICAgIGRhdGEuYWRkSW5pdEJpbmQoX2JpbmRFdmVudCk7XG4gICAgZGF0YS5hZGRJbml0VW5CaW5kKF91bmJpbmRFdmVudCk7XG4gICAgZGF0YS5hZGRJbml0Q2FjaGUoX2luaXRDYWNoZSk7XG4gICAgZGF0YS5hZGRJbml0Tm9kZShfaW5pdE5vZGUpO1xuICAgIGRhdGEuYWRkSW5pdFByb3h5KF9ldmVudFByb3h5KTtcbiAgICBkYXRhLmFkZEluaXRSb290KF9pbml0Um9vdCk7XG4gICAgZGF0YS5hZGRaVHJlZVRvb2xzKF96VHJlZVRvb2xzKTtcblxuICAgIHZhciBfY2FuY2VsUHJlU2VsZWN0ZWROb2RlID0gdmlldy5jYW5jZWxQcmVTZWxlY3RlZE5vZGU7XG4gICAgdmlldy5jYW5jZWxQcmVTZWxlY3RlZE5vZGUgPSBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICB2YXIgbGlzdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKS5jdXJTZWxlY3RlZExpc3Q7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gbGlzdC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghbm9kZSB8fCBub2RlID09PSBsaXN0W2ldKSB7XG4gICAgICAgICAgICAgICAgdmlldy5yZW1vdmVUcmVlRG9tKHNldHRpbmcsIGxpc3RbaV0pO1xuICAgICAgICAgICAgICAgIGlmIChub2RlKSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoX2NhbmNlbFByZVNlbGVjdGVkTm9kZSkgX2NhbmNlbFByZVNlbGVjdGVkTm9kZS5hcHBseSh2aWV3LCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIHZhciBfY3JlYXRlTm9kZXMgPSB2aWV3LmNyZWF0ZU5vZGVzO1xuICAgIHZpZXcuY3JlYXRlTm9kZXMgPSBmdW5jdGlvbiAoc2V0dGluZywgbGV2ZWwsIG5vZGVzLCBwYXJlbnROb2RlLCBpbmRleCkge1xuICAgICAgICBpZiAoX2NyZWF0ZU5vZGVzKSB7XG4gICAgICAgICAgICBfY3JlYXRlTm9kZXMuYXBwbHkodmlldywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5vZGVzKSByZXR1cm47XG4gICAgICAgIGlmICh2aWV3LnJlcGFpclBhcmVudENoa0NsYXNzV2l0aFNlbGYpIHtcbiAgICAgICAgICAgIHZpZXcucmVwYWlyUGFyZW50Q2hrQ2xhc3NXaXRoU2VsZihzZXR0aW5nLCBwYXJlbnROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBfbWFrZU5vZGVVcmwgPSB2aWV3Lm1ha2VOb2RlVXJsO1xuICAgIHZpZXcubWFrZU5vZGVVcmwgPSBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICByZXR1cm4gc2V0dGluZy5lZGl0LmVuYWJsZSA/IG51bGwgOiAoX21ha2VOb2RlVXJsLmFwcGx5KHZpZXcsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIHZhciBfcmVtb3ZlTm9kZSA9IHZpZXcucmVtb3ZlTm9kZTtcbiAgICB2aWV3LnJlbW92ZU5vZGUgPSBmdW5jdGlvbiAoc2V0dGluZywgbm9kZSkge1xuICAgICAgICB2YXIgcm9vdCA9IGRhdGEuZ2V0Um9vdChzZXR0aW5nKTtcbiAgICAgICAgaWYgKHJvb3QuY3VyRWRpdE5vZGUgPT09IG5vZGUpIHJvb3QuY3VyRWRpdE5vZGUgPSBudWxsO1xuICAgICAgICBpZiAoX3JlbW92ZU5vZGUpIHtcbiAgICAgICAgICAgIF9yZW1vdmVOb2RlLmFwcGx5KHZpZXcsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX3NlbGVjdE5vZGUgPSB2aWV3LnNlbGVjdE5vZGU7XG4gICAgdmlldy5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKHNldHRpbmcsIG5vZGUsIGFkZEZsYWcpIHtcbiAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgIGlmIChkYXRhLmlzU2VsZWN0ZWROb2RlKHNldHRpbmcsIG5vZGUpICYmIHJvb3QuY3VyRWRpdE5vZGUgPT0gbm9kZSAmJiBub2RlLmVkaXROYW1lRmxhZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfc2VsZWN0Tm9kZSkgX3NlbGVjdE5vZGUuYXBwbHkodmlldywgYXJndW1lbnRzKTtcbiAgICAgICAgdmlldy5hZGRIb3ZlckRvbShzZXR0aW5nLCBub2RlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIF91Q2FuRG8gPSB0b29scy51Q2FuRG87XG4gICAgdG9vbHMudUNhbkRvID0gZnVuY3Rpb24gKHNldHRpbmcsIGUpIHtcbiAgICAgICAgdmFyIHJvb3QgPSBkYXRhLmdldFJvb3Qoc2V0dGluZyk7XG4gICAgICAgIGlmIChlICYmICh0b29scy5lcXMoZS50eXBlLCBcIm1vdXNlb3ZlclwiKSB8fCB0b29scy5lcXMoZS50eXBlLCBcIm1vdXNlb3V0XCIpIHx8IHRvb2xzLmVxcyhlLnR5cGUsIFwibW91c2Vkb3duXCIpIHx8IHRvb2xzLmVxcyhlLnR5cGUsIFwibW91c2V1cFwiKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb290LmN1ckVkaXROb2RlKSB7XG4gICAgICAgICAgICB2aWV3LmVkaXROb2RlQmx1ciA9IGZhbHNlO1xuICAgICAgICAgICAgcm9vdC5jdXJFZGl0SW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCFyb290LmN1ckVkaXROb2RlKSAmJiAoX3VDYW5EbyA/IF91Q2FuRG8uYXBwbHkodmlldywgYXJndW1lbnRzKSA6IHRydWUpO1xuICAgIH1cbn0pKGpRdWVyeSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFEQTtBQXZDQTtBQUZBO0FBOENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBZEE7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUE3Q0E7QUE5Q0E7QUFvSEE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxJQTtBQW9JQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBNUlBO0FBOElBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkxBO0FBcUxBO0FBQUE7QUFFQTtBQVNBO0FBaE1BO0FBa01BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWJBO0FBZUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFaQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFwUkE7QUFzUkE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXpUQTtBQTJUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUExVEE7QUF3VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6VkE7QUF4VUE7QUFvcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFyRUE7QUFwcUJBO0FBNHVCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpEQTtBQTV1QkE7QUF3eUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5REE7QUF4eUJBO0FBeTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWhEQTtBQUNBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBdEJBO0FBd0JBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcHZCQTtBQUNBO0FBQ0E7QUFxdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBek5BO0FBMk5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFwUkE7QUF1UkE7QUFBQTtBQUFBO0FBR0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFqQkE7QUFBQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQVlBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQWxCQTtBQXhCQTtBQWdEQTtBQUNBO0FBQ0E7QUFDQTtBQW5EQTtBQXFEQTtBQXJEQTtBQXVEQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOURBO0FBZ0VBO0FBQUE7QUFFQTtBQUNBO0FBbkVBO0FBcUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBbkhBO0FBcUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpJQTtBQTJJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakpBO0FBbUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoTkE7QUFrTkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFwR0E7QUFsTkE7QUF5VEE7QUF6VEE7QUE2VEE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBN0JBO0FBN1RBO0FBNlZBO0FBN1ZBO0FBaVdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQTVNQTtBQWpXQTtBQWlqQkE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFqQkE7QUFBQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFQQTtBQXFCQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUExQkE7QUF4QkE7QUErREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhFQTtBQTBFQTtBQTFFQTtBQTRFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTlGQTtBQWdHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRHQTtBQXdHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUEzSkE7QUE2SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpLQTtBQW1LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL05BO0FBaU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQWpPQTtBQTZPQTtBQTdPQTtBQWlQQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQTNDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFuZEE7QUFqUEE7QUF1c0JBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakRBO0FBdnNCQTtBQTJ2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyVUE7QUEzdkJBO0FBb2tDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/zTree/js/jquery.ztree.all.js\n");

/***/ }),

/***/ "./src/views/admin/userMenu.vue":
/*!**************************************!*\
  !*** ./src/views/admin/userMenu.vue ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userMenu.vue?vue&type=template&id=2ede03b8&scoped=true& */ \"./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&\");\n/* harmony import */ var _userMenu_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./userMenu.vue?vue&type=script&lang=js& */ \"./src/views/admin/userMenu.vue?vue&type=script&lang=js&\");\n/* empty/unused harmony star reexport *//* harmony import */ var _userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true& */ \"./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true&\");\n/* harmony import */ var _node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */ \"./node_modules/vue-loader/lib/runtime/componentNormalizer.js\");\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\n  _userMenu_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"render\"],\n  _userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"],\n  false,\n  null,\n  \"2ede03b8\",\n  null\n  \n)\n\n/* hot reload */\nif (true) {\n  var api = __webpack_require__(/*! ./node_modules/vue-hot-reload-api/dist/index.js */ \"./node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(__webpack_require__(/*! vue */ \"./node_modules/vue/dist/vue.esm.js\"))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2ede03b8')) {\n      api.createRecord('2ede03b8', component.options)\n    } else {\n      api.reload('2ede03b8', component.options)\n    }\n    module.hot.accept(/*! ./userMenu.vue?vue&type=template&id=2ede03b8&scoped=true& */ \"./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&\", function(__WEBPACK_OUTDATED_DEPENDENCIES__) { /* harmony import */ _userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./userMenu.vue?vue&type=template&id=2ede03b8&scoped=true& */ \"./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&\");\n(function () {\n      api.rerender('2ede03b8', {\n        render: _userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"render\"],\n        staticRenderFns: _userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"]\n      })\n    })(__WEBPACK_OUTDATED_DEPENDENCIES__); }.bind(this))\n  }\n}\ncomponent.options.__file = \"src/views/admin/userMenu.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlck1lbnUudnVlLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL2FkbWluL3VzZXJNZW51LnZ1ZT84NTdkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTJlZGUwM2I4JnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL3VzZXJNZW51LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL3VzZXJNZW51LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTJlZGUwM2I4Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiMmVkZTAzYjhcIixcbiAgbnVsbFxuICBcbilcblxuLyogaG90IHJlbG9hZCAqL1xuaWYgKG1vZHVsZS5ob3QpIHtcbiAgdmFyIGFwaSA9IHJlcXVpcmUoXCIvVXNlcnMvYXBwbGUvV09SS19TUEFDRS8yMDE5MDcyNHVzZXItc2VydmUtcGVyZ2UvdXNlci1zZXJ2ZXItcGFnZS9ub2RlX21vZHVsZXMvdnVlLWhvdC1yZWxvYWQtYXBpL2Rpc3QvaW5kZXguanNcIilcbiAgYXBpLmluc3RhbGwocmVxdWlyZSgndnVlJykpXG4gIGlmIChhcGkuY29tcGF0aWJsZSkge1xuICAgIG1vZHVsZS5ob3QuYWNjZXB0KClcbiAgICBpZiAoIWFwaS5pc1JlY29yZGVkKCcyZWRlMDNiOCcpKSB7XG4gICAgICBhcGkuY3JlYXRlUmVjb3JkKCcyZWRlMDNiOCcsIGNvbXBvbmVudC5vcHRpb25zKVxuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVsb2FkKCcyZWRlMDNiOCcsIGNvbXBvbmVudC5vcHRpb25zKVxuICAgIH1cbiAgICBtb2R1bGUuaG90LmFjY2VwdChcIi4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTJlZGUwM2I4JnNjb3BlZD10cnVlJlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBhcGkucmVyZW5kZXIoJzJlZGUwM2I4Jywge1xuICAgICAgICByZW5kZXI6IHJlbmRlcixcbiAgICAgICAgc3RhdGljUmVuZGVyRm5zOiBzdGF0aWNSZW5kZXJGbnNcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuY29tcG9uZW50Lm9wdGlvbnMuX19maWxlID0gXCJzcmMvdmlld3MvYWRtaW4vdXNlck1lbnUudnVlXCJcbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/userMenu.vue\n");

/***/ }),

/***/ "./src/views/admin/userMenu.vue?vue&type=script&lang=js&":
/*!***************************************************************!*\
  !*** ./src/views/admin/userMenu.vue?vue&type=script&lang=js& ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib??vue-loader-options!./userMenu.vue?vue&type=script&lang=js& */ \"./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=script&lang=js&\");\n/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_cache_loader_dist_cjs_js_ref_12_0_node_modules_babel_loader_lib_index_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"]); //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3cy9hZG1pbi91c2VyTWVudS52dWU/ZmRiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMTItMCEuLi8uLi8uLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTAtMCEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3VzZXJNZW51LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTEyLTAhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS0wLTAhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi91c2VyTWVudS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmXCIiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/userMenu.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true&":
/*!************************************************************************************************!*\
  !*** ./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true& ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib??vue-loader-options!./userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true& */ \"./node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js?!./node_modules/css-loader/index.js?!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true&\");\n/* harmony import */ var _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_vue_cli_service_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_style_index_0_id_2ede03b8_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default.a); //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9MmVkZTAzYjgmbGFuZz1zY3NzJnNjb3BlZD10cnVlJi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3cy9hZG1pbi91c2VyTWVudS52dWU/N2ExNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL2NsaS1zZXJ2aWNlL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcz8/cmVmLS04LW9uZU9mLTEtMCEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz8/cmVmLS04LW9uZU9mLTEtMSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy9zdHlsZVBvc3RMb2FkZXIuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS04LW9uZU9mLTEtMiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tOC1vbmVPZi0xLTMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS0wLTAhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi91c2VyTWVudS52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0yZWRlMDNiOCZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvY2xpLXNlcnZpY2Uvbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzPz9yZWYtLTgtb25lT2YtMS0wIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzPz9yZWYtLTgtb25lT2YtMS0xIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3N0eWxlUG9zdExvYWRlci5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTgtb25lT2YtMS0yIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS04LW9uZU9mLTEtMyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTAtMCEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3VzZXJNZW51LnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTJlZGUwM2I4Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/views/admin/userMenu.vue?vue&type=style&index=0&id=2ede03b8&lang=scss&scoped=true&\n");

/***/ }),

/***/ "./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&":
/*!*********************************************************************************!*\
  !*** ./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true& ***!
  \*********************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _cache_loader_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_5354fe5c_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!cache-loader?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"5354fe5c-vue-loader-template\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib??vue-loader-options!./userMenu.vue?vue&type=template&id=2ede03b8&scoped=true& */ \"./node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"5354fe5c-vue-loader-template\\\"}!./node_modules/vue-loader/lib/loaders/templateLoader.js?!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return _cache_loader_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_5354fe5c_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"render\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"staticRenderFns\", function() { return _cache_loader_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_5354fe5c_vue_loader_template_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_userMenu_vue_vue_type_template_id_2ede03b8_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"]; });\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmlld3MvYWRtaW4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTJlZGUwM2I4JnNjb3BlZD10cnVlJi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3cy9hZG1pbi91c2VyTWVudS52dWU/YTRlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLSFjYWNoZS1sb2FkZXI/e1xcXCJjYWNoZURpcmVjdG9yeVxcXCI6XFxcIm5vZGVfbW9kdWxlcy8uY2FjaGUvdnVlLWxvYWRlclxcXCIsXFxcImNhY2hlSWRlbnRpZmllclxcXCI6XFxcIjUzNTRmZTVjLXZ1ZS1sb2FkZXItdGVtcGxhdGVcXFwifSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvbG9hZGVycy90ZW1wbGF0ZUxvYWRlci5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tMC0wIS4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vdXNlck1lbnUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTJlZGUwM2I4JnNjb3BlZD10cnVlJlwiIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/views/admin/userMenu.vue?vue&type=template&id=2ede03b8&scoped=true&\n");

/***/ })

}]);